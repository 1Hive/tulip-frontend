{"ast":null,"code":"var _jsxFileName = \"/Users/fabian/Documents/Projects/1hive/tulip-frontend/src/contexts/Localisation/languageContext.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { StringTranslations } from '@crowdin/crowdin-api-client';\nimport { TranslationsContext } from 'contexts/Localisation/translationsContext';\nimport { allLanguages, EN } from 'config/localisation/languageCodes';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CACHE_KEY = 'pancakeSwapLanguage';\nconst LanguageContext = /*#__PURE__*/React.createContext({\n  selectedLanguage: EN,\n  setSelectedLanguage: () => undefined,\n  translatedLanguage: EN,\n  setTranslatedLanguage: () => undefined\n});\nconst fileId = 8;\nconst projectId = parseInt(process.env.REACT_APP_CROWDIN_PROJECTID);\nconst stringTranslationsApi = new StringTranslations({\n  token: process.env.REACT_APP_CROWDIN_APIKEY\n});\n\nconst fetchTranslationsForSelectedLanguage = selectedLanguage => {\n  return stringTranslationsApi.listLanguageTranslations(projectId, selectedLanguage.code, undefined, fileId, 200);\n};\n\nconst LanguageContextProvider = ({\n  children\n}) => {\n  _s();\n\n  const [selectedLanguage, setSelectedLanguage] = useState(EN);\n  const [translatedLanguage, setTranslatedLanguage] = useState(EN);\n  const [translations, setTranslations] = useState([]);\n\n  const getStoredLang = storedLangCode => {\n    return allLanguages.filter(language => {\n      return language.code === storedLangCode;\n    })[0];\n  };\n\n  useEffect(() => {\n    const storedLangCode = localStorage.getItem(CACHE_KEY);\n\n    if (storedLangCode) {\n      const storedLang = getStoredLang(storedLangCode);\n      setSelectedLanguage(storedLang);\n    } else {\n      setSelectedLanguage(EN);\n    }\n  }, []);\n  useEffect(() => {\n    if (selectedLanguage) {\n      fetchTranslationsForSelectedLanguage(selectedLanguage).then(translationApiResponse => {\n        if (translationApiResponse.data.length < 1) {\n          setTranslations([]);\n        } else {\n          setTranslations(translationApiResponse.data);\n        }\n      }).then(() => setTranslatedLanguage(selectedLanguage)).catch(e => {\n        setTranslations([]);\n        console.error('Error while loading translations', e);\n      });\n    }\n  }, [selectedLanguage, setTranslations]);\n\n  const handleLanguageSelect = langObject => {\n    setSelectedLanguage(langObject);\n    localStorage.setItem(CACHE_KEY, langObject.code);\n  };\n\n  return /*#__PURE__*/_jsxDEV(LanguageContext.Provider, {\n    value: {\n      selectedLanguage,\n      setSelectedLanguage: handleLanguageSelect,\n      translatedLanguage,\n      setTranslatedLanguage\n    },\n    children: /*#__PURE__*/_jsxDEV(TranslationsContext.Provider, {\n      value: {\n        translations,\n        setTranslations\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n};\n\n_s(LanguageContextProvider, \"xBwFn6rM05cDs06lVQZtx43Z7xc=\");\n\n_c = LanguageContextProvider;\nexport { LanguageContext, LanguageContextProvider };\n\nvar _c;\n\n$RefreshReg$(_c, \"LanguageContextProvider\");","map":{"version":3,"sources":["/Users/fabian/Documents/Projects/1hive/tulip-frontend/src/contexts/Localisation/languageContext.tsx"],"names":["React","useState","useEffect","StringTranslations","TranslationsContext","allLanguages","EN","CACHE_KEY","LanguageContext","createContext","selectedLanguage","setSelectedLanguage","undefined","translatedLanguage","setTranslatedLanguage","fileId","projectId","parseInt","process","env","REACT_APP_CROWDIN_PROJECTID","stringTranslationsApi","token","REACT_APP_CROWDIN_APIKEY","fetchTranslationsForSelectedLanguage","listLanguageTranslations","code","LanguageContextProvider","children","translations","setTranslations","getStoredLang","storedLangCode","filter","language","localStorage","getItem","storedLang","then","translationApiResponse","data","length","catch","e","console","error","handleLanguageSelect","langObject","setItem"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { StringTranslations } from '@crowdin/crowdin-api-client'\nimport { TranslationsContext } from 'contexts/Localisation/translationsContext'\nimport { allLanguages, EN } from 'config/localisation/languageCodes'\n\nconst CACHE_KEY = 'pancakeSwapLanguage'\n\nexport interface LangType {\n  code: string\n  language: string\n}\n\nexport interface LanguageState {\n  selectedLanguage: LangType\n  setSelectedLanguage: (langObject: LangType) => void\n  translatedLanguage: LangType\n  setTranslatedLanguage: React.Dispatch<React.SetStateAction<LangType>>\n}\n\nconst LanguageContext = React.createContext({\n  selectedLanguage: EN,\n  setSelectedLanguage: () => undefined,\n  translatedLanguage: EN,\n  setTranslatedLanguage: () => undefined,\n} as LanguageState)\n\nconst fileId = 8\nconst projectId = parseInt(process.env.REACT_APP_CROWDIN_PROJECTID)\nconst stringTranslationsApi = new StringTranslations({\n  token: process.env.REACT_APP_CROWDIN_APIKEY,\n})\n\nconst fetchTranslationsForSelectedLanguage = (selectedLanguage) => {\n  return stringTranslationsApi.listLanguageTranslations(projectId, selectedLanguage.code, undefined, fileId, 200)\n}\n\nconst LanguageContextProvider = ({ children }) => {\n  const [selectedLanguage, setSelectedLanguage] = useState<any>(EN)\n  const [translatedLanguage, setTranslatedLanguage] = useState<any>(EN)\n  const [translations, setTranslations] = useState<Array<any>>([])\n\n  const getStoredLang = (storedLangCode: string) => {\n    return allLanguages.filter((language) => {\n      return language.code === storedLangCode\n    })[0]\n  }\n\n  useEffect(() => {\n    const storedLangCode = localStorage.getItem(CACHE_KEY)\n    if (storedLangCode) {\n      const storedLang = getStoredLang(storedLangCode)\n      setSelectedLanguage(storedLang)\n    } else {\n      setSelectedLanguage(EN)\n    }\n  }, [])\n\n  useEffect(() => {\n    if (selectedLanguage) {\n      fetchTranslationsForSelectedLanguage(selectedLanguage)\n        .then((translationApiResponse) => {\n          if (translationApiResponse.data.length < 1) {\n            setTranslations([])\n          } else {\n            setTranslations(translationApiResponse.data)\n          }\n        })\n        .then(() => setTranslatedLanguage(selectedLanguage))\n        .catch((e) => {\n          setTranslations([])\n          console.error('Error while loading translations', e)\n        })\n    }\n  }, [selectedLanguage, setTranslations])\n\n  const handleLanguageSelect = (langObject: LangType) => {\n    setSelectedLanguage(langObject)\n    localStorage.setItem(CACHE_KEY, langObject.code)\n  }\n\n  return (\n    <LanguageContext.Provider\n      value={{ selectedLanguage, setSelectedLanguage: handleLanguageSelect, translatedLanguage, setTranslatedLanguage }}\n    >\n      <TranslationsContext.Provider value={{ translations, setTranslations }}>{children}</TranslationsContext.Provider>\n    </LanguageContext.Provider>\n  )\n}\n\nexport { LanguageContext, LanguageContextProvider }\n"]},"metadata":{},"sourceType":"module"}