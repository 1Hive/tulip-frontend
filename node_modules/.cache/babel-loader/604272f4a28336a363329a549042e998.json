{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Store = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf3 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _require = require('postmsg-rpc'),\n    caller = _require.caller;\n\nvar _require2 = require('abstract-leveldown'),\n    AbstractLevelDOWN = _require2.AbstractLevelDOWN;\n\nvar _require3 = require('./utils'),\n    serialize = _require3.serialize,\n    deserialize = _require3.deserialize;\n\nvar Store = /*#__PURE__*/function (_AbstractLevelDOWN) {\n  (0, _inherits2[\"default\"])(Store, _AbstractLevelDOWN);\n\n  function Store(location, options) {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, Store);\n\n    for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      args[_key - 2] = arguments[_key];\n    }\n\n    _this = (0, _possibleConstructorReturn2[\"default\"])(this, (_getPrototypeOf2 = (0, _getPrototypeOf3[\"default\"])(Store)).call.apply(_getPrototypeOf2, [this, location, options].concat(args)));\n    _this.location = location;\n    _this.opts = Object.assign({}, options);\n    delete options.postMessage;\n    caller('create', _this.opts).apply(void 0, [_this.location, options].concat(args));\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(Store, [{\n    key: \"_serializeKey\",\n    value: function _serializeKey(key) {\n      return serialize(key);\n    }\n  }, {\n    key: \"_serializeValue\",\n    value: function _serializeValue(value) {\n      return serialize(value);\n    }\n  }, {\n    key: \"_deserialize\",\n    value: function _deserialize(v) {\n      return deserialize(v);\n    }\n  }, {\n    key: \"_open\",\n    value: function () {\n      var _open2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(options, callback) {\n        var open;\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                open = caller('open', this.opts);\n                _context.prev = 1;\n                _context.next = 4;\n                return open(this.location, options);\n\n              case 4:\n                _context.next = 9;\n                break;\n\n              case 6:\n                _context.prev = 6;\n                _context.t0 = _context[\"catch\"](1);\n                callback(_context.t0);\n\n              case 9:\n                callback();\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[1, 6]]);\n      }));\n\n      function _open(_x, _x2) {\n        return _open2.apply(this, arguments);\n      }\n\n      return _open;\n    }()\n  }, {\n    key: \"_close\",\n    value: function () {\n      var _close2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(callback) {\n        var close;\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                close = caller('close', this.opts);\n                _context2.prev = 1;\n                _context2.next = 4;\n                return close(this.location);\n\n              case 4:\n                _context2.next = 9;\n                break;\n\n              case 6:\n                _context2.prev = 6;\n                _context2.t0 = _context2[\"catch\"](1);\n                callback(_context2.t0);\n\n              case 9:\n                callback();\n\n              case 10:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[1, 6]]);\n      }));\n\n      function _close(_x3) {\n        return _close2.apply(this, arguments);\n      }\n\n      return _close;\n    }()\n  }, {\n    key: \"_get\",\n    value: function () {\n      var _get2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(key, options, callback) {\n        var get, response;\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                get = caller('get', this.opts);\n                _context3.prev = 1;\n                _context3.next = 4;\n                return get(this.location, key, options);\n\n              case 4:\n                response = _context3.sent;\n                _context3.next = 11;\n                break;\n\n              case 7:\n                _context3.prev = 7;\n                _context3.t0 = _context3[\"catch\"](1);\n                _context3.t0.notFound = true;\n                return _context3.abrupt(\"return\", callback(_context3.t0));\n\n              case 11:\n                callback(null, this._deserialize(response));\n\n              case 12:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[1, 7]]);\n      }));\n\n      function _get(_x4, _x5, _x6) {\n        return _get2.apply(this, arguments);\n      }\n\n      return _get;\n    }()\n  }, {\n    key: \"_put\",\n    value: function () {\n      var _put2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(key, value, options, callback) {\n        var put, response;\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                put = caller('put', this.opts);\n                _context4.prev = 1;\n                _context4.next = 4;\n                return put(this.location, key, value, options);\n\n              case 4:\n                response = _context4.sent;\n                _context4.next = 10;\n                break;\n\n              case 7:\n                _context4.prev = 7;\n                _context4.t0 = _context4[\"catch\"](1);\n                callback(_context4.t0);\n\n              case 10:\n                callback(null, response);\n\n              case 11:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[1, 7]]);\n      }));\n\n      function _put(_x7, _x8, _x9, _x10) {\n        return _put2.apply(this, arguments);\n      }\n\n      return _put;\n    }()\n  }, {\n    key: \"_del\",\n    value: function () {\n      var _del2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5(key, options, callback) {\n        var del, response;\n        return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                del = caller('del', this.opts);\n                _context5.prev = 1;\n                _context5.next = 4;\n                return del(this.location, key, options);\n\n              case 4:\n                response = _context5.sent;\n                _context5.next = 10;\n                break;\n\n              case 7:\n                _context5.prev = 7;\n                _context5.t0 = _context5[\"catch\"](1);\n                callback(_context5.t0);\n\n              case 10:\n                callback(null, response);\n\n              case 11:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[1, 7]]);\n      }));\n\n      function _del(_x11, _x12, _x13) {\n        return _del2.apply(this, arguments);\n      }\n\n      return _del;\n    }()\n  }, {\n    key: \"_batch\",\n    value: function () {\n      var _batch2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee6(arr, options, callback) {\n        var batch, response;\n        return _regenerator[\"default\"].wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                batch = caller('batch', this.opts);\n                _context6.prev = 1;\n                _context6.next = 4;\n                return batch(this.location, arr, options);\n\n              case 4:\n                response = _context6.sent;\n                _context6.next = 10;\n                break;\n\n              case 7:\n                _context6.prev = 7;\n                _context6.t0 = _context6[\"catch\"](1);\n                callback(_context6.t0);\n\n              case 10:\n                callback(null, response);\n\n              case 11:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this, [[1, 7]]);\n      }));\n\n      function _batch(_x14, _x15, _x16) {\n        return _batch2.apply(this, arguments);\n      }\n\n      return _batch;\n    }()\n  }]);\n  return Store;\n}(AbstractLevelDOWN);\n\nexports.Store = Store;","map":null,"metadata":{},"sourceType":"script"}