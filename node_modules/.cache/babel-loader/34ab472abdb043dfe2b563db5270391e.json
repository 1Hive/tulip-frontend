{"ast":null,"code":"'use strict';\n\nconst Store = require('orbit-db-store');\n\nconst CounterIndex = require('./CounterIndex');\n\nconst Counter = require('crdts/src/G-Counter');\n\nclass CounterStore extends Store {\n  constructor(ipfs, id, dbname, options = {}) {\n    if (!options.Index) {\n      Object.assign(options, {\n        Index: CounterIndex\n      });\n    }\n\n    super(ipfs, id, dbname, options);\n    this._type = 'counter';\n  }\n\n  get value() {\n    return this._index.get().value;\n  }\n\n  inc(amount, options = {}) {\n    const counter = new Counter(this.identity.publicKey, Object.assign({}, this._index.get()._counters));\n    counter.increment(amount);\n    return this._addOperation({\n      op: 'COUNTER',\n      key: null,\n      value: counter.toJSON()\n    }, options);\n  }\n\n}\n\nmodule.exports = CounterStore;","map":null,"metadata":{},"sourceType":"script"}