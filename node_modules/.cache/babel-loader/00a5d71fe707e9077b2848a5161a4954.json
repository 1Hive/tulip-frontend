{"ast":null,"code":"var _jsxFileName = \"/Users/fabianmolina/Documents/1hive/tulip-frontend/src/components/LineChart/LineChart.js\";\nimport React, { Component } from 'react';\nimport moment from 'moment';\nimport data from './ExampleData.json';\nimport './LineChart.css';\n\nclass LineChart extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hoverLoc: null,\n      activePoint: null\n    };\n  } // GET X & Y || MAX & MIN\n\n\n  getX() {\n    const {\n      data\n    } = this.props;\n    return {\n      min: data[0].x,\n      max: data[data.length - 1].x\n    };\n  }\n\n  getY() {\n    const {\n      data\n    } = this.props;\n    return {\n      min: data.reduce((min, p) => p.y < min ? p.y : min, data[0].y),\n      max: data.reduce((max, p) => p.y > max ? p.y : max, data[0].y)\n    };\n  } // GET SVG COORDINATES\n\n\n  getSvgX(x) {\n    const {\n      svgWidth,\n      yLabelSize\n    } = this.props;\n    return yLabelSize + x / this.getX().max * (svgWidth - yLabelSize);\n  }\n\n  getSvgY(y) {\n    const {\n      svgHeight,\n      xLabelSize\n    } = this.props;\n    const gY = this.getY();\n    return ((svgHeight - xLabelSize) * gY.max - (svgHeight - xLabelSize) * y) / (gY.max - gY.min);\n  } // BUILD SVG PATH\n\n\n  makePath() {\n    const {\n      data,\n      color\n    } = this.props;\n    let pathD = 'M ' + this.getSvgX(data[0].x) + ' ' + this.getSvgY(data[0].y) + ' ';\n    pathD += data.map((point, i) => {\n      return 'L ' + this.getSvgX(point.x) + ' ' + this.getSvgY(point.y) + ' ';\n    });\n    return /*#__PURE__*/React.createElement(\"path\", {\n      className: \"linechart_path\",\n      d: pathD,\n      style: {\n        stroke: color\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 7\n      }\n    });\n  } // BUILD SHADED AREA\n\n\n  makeArea() {\n    const {\n      data\n    } = this.props;\n    let pathD = 'M ' + this.getSvgX(data[0].x) + ' ' + this.getSvgY(data[0].y) + ' ';\n    pathD += data.map((point, i) => {\n      return 'L ' + this.getSvgX(point.x) + ' ' + this.getSvgY(point.y) + ' ';\n    });\n    const x = this.getX();\n    const y = this.getY();\n    pathD += 'L ' + this.getSvgX(x.max) + ' ' + this.getSvgY(y.min) + ' ' + 'L ' + this.getSvgX(x.min) + ' ' + this.getSvgY(y.min) + ' ';\n    return /*#__PURE__*/React.createElement(\"svg\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"defs\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"linearGradient\", {\n      id: \"MyGradient\",\n      gradientTransform: \"rotate(80)\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"stop\", {\n      offset: \"35%\",\n      stopColor: \"#7ce0d680\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"stop\", {\n      offset: \"95%\",\n      stopColor: \"#7ce0d600\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(\"path\", {\n      className: \"linechart_area\",\n      d: pathD,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }\n    }));\n  } // BUILD GRID AXIS\n\n\n  makeAxis() {\n    const {\n      yLabelSize\n    } = this.props;\n    const x = this.getX();\n    const y = this.getY();\n    return /*#__PURE__*/React.createElement(\"g\", {\n      className: \"linechart_axis\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"line\", {\n      x1: this.getSvgX(x.min) - yLabelSize,\n      y1: this.getSvgY(y.min),\n      x2: this.getSvgX(x.max),\n      y2: this.getSvgY(y.min),\n      strokeDasharray: \"5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"line\", {\n      x1: this.getSvgX(x.min) - yLabelSize,\n      y1: this.getSvgY(y.max),\n      x2: this.getSvgX(x.max),\n      y2: this.getSvgY(y.max),\n      strokeDasharray: \"5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }\n    }));\n  }\n\n  makeLabels() {\n    const {\n      svgHeight,\n      svgWidth,\n      xLabelSize,\n      yLabelSize\n    } = this.props;\n    const padding = 5;\n    return /*#__PURE__*/React.createElement(\"g\", {\n      className: \"linechart_label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"text\", {\n      transform: `translate(${yLabelSize / 2}, 20)`,\n      textAnchor: \"middle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }\n    }, this.getY().max.toLocaleString('us-EN', {\n      style: 'currency',\n      currency: 'USD'\n    })), /*#__PURE__*/React.createElement(\"text\", {\n      transform: `translate(${yLabelSize / 2}, ${svgHeight - xLabelSize - padding})`,\n      textAnchor: \"middle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }\n    }, this.getY().min.toLocaleString('us-EN', {\n      style: 'currency',\n      currency: 'USD'\n    })), /*#__PURE__*/React.createElement(\"text\", {\n      transform: `translate(${yLabelSize}, ${svgHeight})`,\n      textAnchor: \"start\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }\n    }, this.props.data[0].d), /*#__PURE__*/React.createElement(\"text\", {\n      transform: `translate(${svgWidth}, ${svgHeight})`,\n      textAnchor: \"end\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }\n    }, this.props.data[this.props.data.length - 1].d));\n  } // FIND CLOSEST POINT TO MOUSE\n\n\n  getCoords(e) {\n    const {\n      svgWidth,\n      data,\n      yLabelSize\n    } = this.props;\n    const svgLocation = document.getElementsByClassName('linechart')[0].getBoundingClientRect();\n    const adjustment = (svgLocation.width - svgWidth) / 2; // takes padding into consideration\n\n    const relativeLoc = e.clientX - svgLocation.left - adjustment;\n    const svgData = [];\n    data.map((point, i) => {\n      svgData.push({\n        svgX: this.getSvgX(point.x),\n        svgY: this.getSvgY(point.y),\n        d: point.d,\n        p: point.p\n      });\n    });\n    let closestPoint = {};\n\n    for (let i = 0, c = 500; i < svgData.length; i++) {\n      if (Math.abs(svgData[i].svgX - this.state.hoverLoc) <= c) {\n        c = Math.abs(svgData[i].svgX - this.state.hoverLoc);\n        closestPoint = svgData[i];\n      }\n    }\n\n    if (relativeLoc - yLabelSize < 0) {\n      this.stopHover();\n    } else {\n      this.setState({\n        hoverLoc: relativeLoc,\n        activePoint: closestPoint\n      });\n      this.props.onChartHover(relativeLoc, closestPoint);\n    }\n  } // STOP HOVER\n\n\n  stopHover() {\n    this.setState({\n      hoverLoc: null,\n      activePoint: null\n    });\n    this.props.onChartHover(null, null);\n  } // MAKE ACTIVE POINT\n\n\n  makeActivePoint() {\n    const {\n      color,\n      pointRadius\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"circle\", {\n      className: \"linechart_point\",\n      style: {\n        stroke: color\n      },\n      r: pointRadius,\n      cx: this.state.activePoint.svgX,\n      cy: this.state.activePoint.svgY,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 7\n      }\n    });\n  } // MAKE HOVER LINE\n\n\n  createLine() {\n    const {\n      svgHeight,\n      xLabelSize\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"line\", {\n      className: \"hoverLine\",\n      x1: this.state.hoverLoc,\n      y1: -8,\n      x2: this.state.hoverLoc,\n      y2: svgHeight - xLabelSize,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 7\n      }\n    });\n  }\n\n  render() {\n    const {\n      svgHeight,\n      svgWidth\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"svg\", {\n      width: svgWidth,\n      height: svgHeight,\n      viewBox: `10 -10 ${svgWidth} ${svgHeight}`,\n      className: \"linechart\",\n      onMouseLeave: () => this.stopHover(),\n      onMouseMove: e => this.getCoords(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"g\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 9\n      }\n    }, this.props.showAxis && this.makeAxis(), this.makePath(), this.makeArea(), this.props.showLabels && this.makeLabels(), this.props.showHoverLoc && this.state.hoverLoc ? this.createLine() : null, this.state.hoverLoc ? this.makeActivePoint() : null));\n  }\n\n}\n\nexport const loadExampleData = () => {\n  const sortedData = [];\n  let count = 0;\n\n  for (const date in data.bpi) {\n    sortedData.push({\n      d: moment(date).format('MMM DD'),\n      p: data.bpi[date].toLocaleString('us-EN', {\n        style: 'currency',\n        currency: 'USD'\n      }),\n      x: count,\n      y: data.bpi[date]\n    });\n    count++;\n  }\n\n  return sortedData;\n}; // DEFAULT PROPS\n\nLineChart.defaultProps = {\n  data: loadExampleData(),\n  color: '#7CE0D6',\n  pointRadius: 6,\n  svgHeight: 300,\n  svgWidth: 900,\n  xLabelSize: 20,\n  yLabelSize: 80,\n  showLabels: false,\n  showHoverLoc: false,\n  showAxis: false\n};\nexport default LineChart;","map":{"version":3,"sources":["/Users/fabianmolina/Documents/1hive/tulip-frontend/src/components/LineChart/LineChart.js"],"names":["React","Component","moment","data","LineChart","constructor","props","state","hoverLoc","activePoint","getX","min","x","max","length","getY","reduce","p","y","getSvgX","svgWidth","yLabelSize","getSvgY","svgHeight","xLabelSize","gY","makePath","color","pathD","map","point","i","stroke","makeArea","makeAxis","makeLabels","padding","toLocaleString","style","currency","d","getCoords","e","svgLocation","document","getElementsByClassName","getBoundingClientRect","adjustment","width","relativeLoc","clientX","left","svgData","push","svgX","svgY","closestPoint","c","Math","abs","stopHover","setState","onChartHover","makeActivePoint","pointRadius","createLine","render","showAxis","showLabels","showHoverLoc","loadExampleData","sortedData","count","date","bpi","format","defaultProps"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AACA,OAAO,iBAAP;;AAEA,MAAMC,SAAN,SAAwBH,SAAxB,CAAkC;AAChCI,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,QAAQ,EAAE,IADC;AAEXC,MAAAA,WAAW,EAAE;AAFF,KAAb;AAID,GAP+B,CAShC;;;AACAC,EAAAA,IAAI,GAAG;AACL,UAAM;AAAEP,MAAAA;AAAF,QAAW,KAAKG,KAAtB;AACA,WAAO;AACLK,MAAAA,GAAG,EAAER,IAAI,CAAC,CAAD,CAAJ,CAAQS,CADR;AAELC,MAAAA,GAAG,EAAEV,IAAI,CAACA,IAAI,CAACW,MAAL,GAAc,CAAf,CAAJ,CAAsBF;AAFtB,KAAP;AAID;;AAEDG,EAAAA,IAAI,GAAG;AACL,UAAM;AAAEZ,MAAAA;AAAF,QAAW,KAAKG,KAAtB;AACA,WAAO;AACLK,MAAAA,GAAG,EAAER,IAAI,CAACa,MAAL,CAAY,CAACL,GAAD,EAAMM,CAAN,KAAaA,CAAC,CAACC,CAAF,GAAMP,GAAN,GAAYM,CAAC,CAACC,CAAd,GAAkBP,GAA3C,EAAiDR,IAAI,CAAC,CAAD,CAAJ,CAAQe,CAAzD,CADA;AAELL,MAAAA,GAAG,EAAEV,IAAI,CAACa,MAAL,CAAY,CAACH,GAAD,EAAMI,CAAN,KAAaA,CAAC,CAACC,CAAF,GAAML,GAAN,GAAYI,CAAC,CAACC,CAAd,GAAkBL,GAA3C,EAAiDV,IAAI,CAAC,CAAD,CAAJ,CAAQe,CAAzD;AAFA,KAAP;AAID,GAxB+B,CA0BhC;;;AACAC,EAAAA,OAAO,CAACP,CAAD,EAAI;AACT,UAAM;AAAEQ,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,QAA2B,KAAKf,KAAtC;AACA,WAAOe,UAAU,GAAIT,CAAC,GAAG,KAAKF,IAAL,GAAYG,GAAjB,IAAyBO,QAAQ,GAAGC,UAApC,CAApB;AACD;;AAEDC,EAAAA,OAAO,CAACJ,CAAD,EAAI;AACT,UAAM;AAAEK,MAAAA,SAAF;AAAaC,MAAAA;AAAb,QAA4B,KAAKlB,KAAvC;AACA,UAAMmB,EAAE,GAAG,KAAKV,IAAL,EAAX;AACA,WACE,CAAC,CAACQ,SAAS,GAAGC,UAAb,IAA2BC,EAAE,CAACZ,GAA9B,GAAoC,CAACU,SAAS,GAAGC,UAAb,IAA2BN,CAAhE,KACCO,EAAE,CAACZ,GAAH,GAASY,EAAE,CAACd,GADb,CADF;AAID,GAvC+B,CAyChC;;;AACAe,EAAAA,QAAQ,GAAG;AACT,UAAM;AAAEvB,MAAAA,IAAF;AAAQwB,MAAAA;AAAR,QAAkB,KAAKrB,KAA7B;AACA,QAAIsB,KAAK,GACP,OAAO,KAAKT,OAAL,CAAahB,IAAI,CAAC,CAAD,CAAJ,CAAQS,CAArB,CAAP,GAAiC,GAAjC,GAAuC,KAAKU,OAAL,CAAanB,IAAI,CAAC,CAAD,CAAJ,CAAQe,CAArB,CAAvC,GAAiE,GADnE;AAGAU,IAAAA,KAAK,IAAIzB,IAAI,CAAC0B,GAAL,CAAS,CAACC,KAAD,EAAQC,CAAR,KAAc;AAC9B,aAAO,OAAO,KAAKZ,OAAL,CAAaW,KAAK,CAAClB,CAAnB,CAAP,GAA+B,GAA/B,GAAqC,KAAKU,OAAL,CAAaQ,KAAK,CAACZ,CAAnB,CAArC,GAA6D,GAApE;AACD,KAFQ,CAAT;AAIA,wBACE;AAAM,MAAA,SAAS,EAAC,gBAAhB;AAAiC,MAAA,CAAC,EAAEU,KAApC;AAA2C,MAAA,KAAK,EAAE;AAAEI,QAAAA,MAAM,EAAEL;AAAV,OAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AAGD,GAtD+B,CAwDhC;;;AACAM,EAAAA,QAAQ,GAAG;AACT,UAAM;AAAE9B,MAAAA;AAAF,QAAW,KAAKG,KAAtB;AACA,QAAIsB,KAAK,GACP,OAAO,KAAKT,OAAL,CAAahB,IAAI,CAAC,CAAD,CAAJ,CAAQS,CAArB,CAAP,GAAiC,GAAjC,GAAuC,KAAKU,OAAL,CAAanB,IAAI,CAAC,CAAD,CAAJ,CAAQe,CAArB,CAAvC,GAAiE,GADnE;AAGAU,IAAAA,KAAK,IAAIzB,IAAI,CAAC0B,GAAL,CAAS,CAACC,KAAD,EAAQC,CAAR,KAAc;AAC9B,aAAO,OAAO,KAAKZ,OAAL,CAAaW,KAAK,CAAClB,CAAnB,CAAP,GAA+B,GAA/B,GAAqC,KAAKU,OAAL,CAAaQ,KAAK,CAACZ,CAAnB,CAArC,GAA6D,GAApE;AACD,KAFQ,CAAT;AAIA,UAAMN,CAAC,GAAG,KAAKF,IAAL,EAAV;AACA,UAAMQ,CAAC,GAAG,KAAKH,IAAL,EAAV;AACAa,IAAAA,KAAK,IACH,OACA,KAAKT,OAAL,CAAaP,CAAC,CAACC,GAAf,CADA,GAEA,GAFA,GAGA,KAAKS,OAAL,CAAaJ,CAAC,CAACP,GAAf,CAHA,GAIA,GAJA,GAKA,IALA,GAMA,KAAKQ,OAAL,CAAaP,CAAC,CAACD,GAAf,CANA,GAOA,GAPA,GAQA,KAAKW,OAAL,CAAaJ,CAAC,CAACP,GAAf,CARA,GASA,GAVF;AAYA,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAgB,MAAA,EAAE,EAAC,YAAnB;AAAgC,MAAA,iBAAiB,EAAC,YAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAM,MAAA,MAAM,EAAC,KAAb;AAAmB,MAAA,SAAS,EAAC,WAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE;AAAM,MAAA,MAAM,EAAC,KAAb;AAAmB,MAAA,SAAS,EAAC,WAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CADF,CADF,eAOE;AAAM,MAAA,SAAS,EAAC,gBAAhB;AAAiC,MAAA,CAAC,EAAEiB,KAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPF,CADF;AAWD,GA3F+B,CA6FhC;;;AACAM,EAAAA,QAAQ,GAAG;AACT,UAAM;AAAEb,MAAAA;AAAF,QAAiB,KAAKf,KAA5B;AACA,UAAMM,CAAC,GAAG,KAAKF,IAAL,EAAV;AACA,UAAMQ,CAAC,GAAG,KAAKH,IAAL,EAAV;AAEA,wBACE;AAAG,MAAA,SAAS,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,EAAE,EAAE,KAAKI,OAAL,CAAaP,CAAC,CAACD,GAAf,IAAsBU,UAD5B;AAEE,MAAA,EAAE,EAAE,KAAKC,OAAL,CAAaJ,CAAC,CAACP,GAAf,CAFN;AAGE,MAAA,EAAE,EAAE,KAAKQ,OAAL,CAAaP,CAAC,CAACC,GAAf,CAHN;AAIE,MAAA,EAAE,EAAE,KAAKS,OAAL,CAAaJ,CAAC,CAACP,GAAf,CAJN;AAKE,MAAA,eAAe,EAAC,GALlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAQE;AACE,MAAA,EAAE,EAAE,KAAKQ,OAAL,CAAaP,CAAC,CAACD,GAAf,IAAsBU,UAD5B;AAEE,MAAA,EAAE,EAAE,KAAKC,OAAL,CAAaJ,CAAC,CAACL,GAAf,CAFN;AAGE,MAAA,EAAE,EAAE,KAAKM,OAAL,CAAaP,CAAC,CAACC,GAAf,CAHN;AAIE,MAAA,EAAE,EAAE,KAAKS,OAAL,CAAaJ,CAAC,CAACL,GAAf,CAJN;AAKE,MAAA,eAAe,EAAC,GALlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARF,CADF;AAkBD;;AAEDsB,EAAAA,UAAU,GAAG;AACX,UAAM;AAAEZ,MAAAA,SAAF;AAAaH,MAAAA,QAAb;AAAuBI,MAAAA,UAAvB;AAAmCH,MAAAA;AAAnC,QAAkD,KAAKf,KAA7D;AACA,UAAM8B,OAAO,GAAG,CAAhB;AACA,wBACE;AAAG,MAAA,SAAS,EAAC,iBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEE;AACE,MAAA,SAAS,EAAG,aAAYf,UAAU,GAAG,CAAE,OADzC;AAEE,MAAA,UAAU,EAAC,QAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIG,KAAKN,IAAL,GAAYF,GAAZ,CAAgBwB,cAAhB,CAA+B,OAA/B,EAAwC;AACvCC,MAAAA,KAAK,EAAE,UADgC;AAEvCC,MAAAA,QAAQ,EAAE;AAF6B,KAAxC,CAJH,CAFF,eAWE;AACE,MAAA,SAAS,EAAG,aAAYlB,UAAU,GAAG,CAAE,KAAIE,SAAS,GAClDC,UADyC,GAEzCY,OAAQ,GAHZ;AAIE,MAAA,UAAU,EAAC,QAJb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAMG,KAAKrB,IAAL,GAAYJ,GAAZ,CAAgB0B,cAAhB,CAA+B,OAA/B,EAAwC;AACvCC,MAAAA,KAAK,EAAE,UADgC;AAEvCC,MAAAA,QAAQ,EAAE;AAF6B,KAAxC,CANH,CAXF,eAuBE;AACE,MAAA,SAAS,EAAG,aAAYlB,UAAW,KAAIE,SAAU,GADnD;AAEE,MAAA,UAAU,EAAC,OAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIG,KAAKjB,KAAL,CAAWH,IAAX,CAAgB,CAAhB,EAAmBqC,CAJtB,CAvBF,eA6BE;AACE,MAAA,SAAS,EAAG,aAAYpB,QAAS,KAAIG,SAAU,GADjD;AAEE,MAAA,UAAU,EAAC,KAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIG,KAAKjB,KAAL,CAAWH,IAAX,CAAgB,KAAKG,KAAL,CAAWH,IAAX,CAAgBW,MAAhB,GAAyB,CAAzC,EAA4C0B,CAJ/C,CA7BF,CADF;AAsCD,GAhK+B,CAkKhC;;;AACAC,EAAAA,SAAS,CAACC,CAAD,EAAI;AACX,UAAM;AAAEtB,MAAAA,QAAF;AAAYjB,MAAAA,IAAZ;AAAkBkB,MAAAA;AAAlB,QAAiC,KAAKf,KAA5C;AACA,UAAMqC,WAAW,GAAGC,QAAQ,CACzBC,sBADiB,CACM,WADN,EACmB,CADnB,EAEjBC,qBAFiB,EAApB;AAGA,UAAMC,UAAU,GAAG,CAACJ,WAAW,CAACK,KAAZ,GAAoB5B,QAArB,IAAiC,CAApD,CALW,CAK2C;;AACtD,UAAM6B,WAAW,GAAGP,CAAC,CAACQ,OAAF,GAAYP,WAAW,CAACQ,IAAxB,GAA+BJ,UAAnD;AAEA,UAAMK,OAAO,GAAG,EAAhB;AACAjD,IAAAA,IAAI,CAAC0B,GAAL,CAAS,CAACC,KAAD,EAAQC,CAAR,KAAc;AACrBqB,MAAAA,OAAO,CAACC,IAAR,CAAa;AACXC,QAAAA,IAAI,EAAE,KAAKnC,OAAL,CAAaW,KAAK,CAAClB,CAAnB,CADK;AAEX2C,QAAAA,IAAI,EAAE,KAAKjC,OAAL,CAAaQ,KAAK,CAACZ,CAAnB,CAFK;AAGXsB,QAAAA,CAAC,EAAEV,KAAK,CAACU,CAHE;AAIXvB,QAAAA,CAAC,EAAEa,KAAK,CAACb;AAJE,OAAb;AAMD,KAPD;AASA,QAAIuC,YAAY,GAAG,EAAnB;;AACA,SAAK,IAAIzB,CAAC,GAAG,CAAR,EAAW0B,CAAC,GAAG,GAApB,EAAyB1B,CAAC,GAAGqB,OAAO,CAACtC,MAArC,EAA6CiB,CAAC,EAA9C,EAAkD;AAChD,UAAI2B,IAAI,CAACC,GAAL,CAASP,OAAO,CAACrB,CAAD,CAAP,CAAWuB,IAAX,GAAkB,KAAK/C,KAAL,CAAWC,QAAtC,KAAmDiD,CAAvD,EAA0D;AACxDA,QAAAA,CAAC,GAAGC,IAAI,CAACC,GAAL,CAASP,OAAO,CAACrB,CAAD,CAAP,CAAWuB,IAAX,GAAkB,KAAK/C,KAAL,CAAWC,QAAtC,CAAJ;AACAgD,QAAAA,YAAY,GAAGJ,OAAO,CAACrB,CAAD,CAAtB;AACD;AACF;;AAED,QAAIkB,WAAW,GAAG5B,UAAd,GAA2B,CAA/B,EAAkC;AAChC,WAAKuC,SAAL;AACD,KAFD,MAEO;AACL,WAAKC,QAAL,CAAc;AACZrD,QAAAA,QAAQ,EAAEyC,WADE;AAEZxC,QAAAA,WAAW,EAAE+C;AAFD,OAAd;AAIA,WAAKlD,KAAL,CAAWwD,YAAX,CAAwBb,WAAxB,EAAqCO,YAArC;AACD;AACF,GAtM+B,CAwMhC;;;AACAI,EAAAA,SAAS,GAAG;AACV,SAAKC,QAAL,CAAc;AAAErD,MAAAA,QAAQ,EAAE,IAAZ;AAAkBC,MAAAA,WAAW,EAAE;AAA/B,KAAd;AACA,SAAKH,KAAL,CAAWwD,YAAX,CAAwB,IAAxB,EAA8B,IAA9B;AACD,GA5M+B,CA8MhC;;;AACAC,EAAAA,eAAe,GAAG;AAChB,UAAM;AAAEpC,MAAAA,KAAF;AAASqC,MAAAA;AAAT,QAAyB,KAAK1D,KAApC;AACA,wBACE;AACE,MAAA,SAAS,EAAC,iBADZ;AAEE,MAAA,KAAK,EAAE;AAAE0B,QAAAA,MAAM,EAAEL;AAAV,OAFT;AAGE,MAAA,CAAC,EAAEqC,WAHL;AAIE,MAAA,EAAE,EAAE,KAAKzD,KAAL,CAAWE,WAAX,CAAuB6C,IAJ7B;AAKE,MAAA,EAAE,EAAE,KAAK/C,KAAL,CAAWE,WAAX,CAAuB8C,IAL7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AASD,GA1N+B,CA4NhC;;;AACAU,EAAAA,UAAU,GAAG;AACX,UAAM;AAAE1C,MAAAA,SAAF;AAAaC,MAAAA;AAAb,QAA4B,KAAKlB,KAAvC;AACA,wBACE;AACE,MAAA,SAAS,EAAC,WADZ;AAEE,MAAA,EAAE,EAAE,KAAKC,KAAL,CAAWC,QAFjB;AAGE,MAAA,EAAE,EAAE,CAAC,CAHP;AAIE,MAAA,EAAE,EAAE,KAAKD,KAAL,CAAWC,QAJjB;AAKE,MAAA,EAAE,EAAEe,SAAS,GAAGC,UALlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AASD;;AAED0C,EAAAA,MAAM,GAAG;AACP,UAAM;AAAE3C,MAAAA,SAAF;AAAaH,MAAAA;AAAb,QAA0B,KAAKd,KAArC;AACA,wBACE;AACE,MAAA,KAAK,EAAEc,QADT;AAEE,MAAA,MAAM,EAAEG,SAFV;AAGE,MAAA,OAAO,EAAG,UAASH,QAAS,IAAGG,SAAU,EAH3C;AAIE,MAAA,SAAS,EAAC,WAJZ;AAKE,MAAA,YAAY,EAAE,MAAM,KAAKqC,SAAL,EALtB;AAME,MAAA,WAAW,EAAElB,CAAC,IAAI,KAAKD,SAAL,CAAeC,CAAf,CANpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKpC,KAAL,CAAW6D,QAAX,IAAuB,KAAKjC,QAAL,EAD1B,EAEG,KAAKR,QAAL,EAFH,EAGG,KAAKO,QAAL,EAHH,EAIG,KAAK3B,KAAL,CAAW8D,UAAX,IAAyB,KAAKjC,UAAL,EAJ5B,EAKG,KAAK7B,KAAL,CAAW+D,YAAX,IAA2B,KAAK9D,KAAL,CAAWC,QAAtC,GACG,KAAKyD,UAAL,EADH,GAEG,IAPN,EAQG,KAAK1D,KAAL,CAAWC,QAAX,GAAsB,KAAKuD,eAAL,EAAtB,GAA+C,IARlD,CARF,CADF;AAqBD;;AAjQ+B;;AAoQlC,OAAO,MAAMO,eAAe,GAAG,MAAM;AACnC,QAAMC,UAAU,GAAG,EAAnB;AACA,MAAIC,KAAK,GAAG,CAAZ;;AACA,OAAK,MAAMC,IAAX,IAAmBtE,IAAI,CAACuE,GAAxB,EAA6B;AAC3BH,IAAAA,UAAU,CAAClB,IAAX,CAAgB;AACdb,MAAAA,CAAC,EAAEtC,MAAM,CAACuE,IAAD,CAAN,CAAaE,MAAb,CAAoB,QAApB,CADW;AAEd1D,MAAAA,CAAC,EAAEd,IAAI,CAACuE,GAAL,CAASD,IAAT,EAAepC,cAAf,CAA8B,OAA9B,EAAuC;AACxCC,QAAAA,KAAK,EAAE,UADiC;AAExCC,QAAAA,QAAQ,EAAE;AAF8B,OAAvC,CAFW;AAMd3B,MAAAA,CAAC,EAAE4D,KANW;AAOdtD,MAAAA,CAAC,EAAEf,IAAI,CAACuE,GAAL,CAASD,IAAT;AAPW,KAAhB;AASAD,IAAAA,KAAK;AACN;;AAED,SAAOD,UAAP;AACD,CAjBM,C,CAkBP;;AACAnE,SAAS,CAACwE,YAAV,GAAyB;AACvBzE,EAAAA,IAAI,EAAEmE,eAAe,EADE;AAEvB3C,EAAAA,KAAK,EAAE,SAFgB;AAGvBqC,EAAAA,WAAW,EAAE,CAHU;AAIvBzC,EAAAA,SAAS,EAAE,GAJY;AAKvBH,EAAAA,QAAQ,EAAE,GALa;AAMvBI,EAAAA,UAAU,EAAE,EANW;AAOvBH,EAAAA,UAAU,EAAE,EAPW;AAQvB+C,EAAAA,UAAU,EAAE,KARW;AASvBC,EAAAA,YAAY,EAAE,KATS;AAUvBF,EAAAA,QAAQ,EAAE;AAVa,CAAzB;AAaA,eAAe/D,SAAf","sourcesContent":["import React, { Component } from 'react'\r\nimport moment from 'moment'\r\nimport data from './ExampleData.json'\r\nimport './LineChart.css'\r\n\r\nclass LineChart extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      hoverLoc: null,\r\n      activePoint: null,\r\n    }\r\n  }\r\n\r\n  // GET X & Y || MAX & MIN\r\n  getX() {\r\n    const { data } = this.props\r\n    return {\r\n      min: data[0].x,\r\n      max: data[data.length - 1].x,\r\n    }\r\n  }\r\n\r\n  getY() {\r\n    const { data } = this.props\r\n    return {\r\n      min: data.reduce((min, p) => (p.y < min ? p.y : min), data[0].y),\r\n      max: data.reduce((max, p) => (p.y > max ? p.y : max), data[0].y),\r\n    }\r\n  }\r\n\r\n  // GET SVG COORDINATES\r\n  getSvgX(x) {\r\n    const { svgWidth, yLabelSize } = this.props\r\n    return yLabelSize + (x / this.getX().max) * (svgWidth - yLabelSize)\r\n  }\r\n\r\n  getSvgY(y) {\r\n    const { svgHeight, xLabelSize } = this.props\r\n    const gY = this.getY()\r\n    return (\r\n      ((svgHeight - xLabelSize) * gY.max - (svgHeight - xLabelSize) * y) /\r\n      (gY.max - gY.min)\r\n    )\r\n  }\r\n\r\n  // BUILD SVG PATH\r\n  makePath() {\r\n    const { data, color } = this.props\r\n    let pathD =\r\n      'M ' + this.getSvgX(data[0].x) + ' ' + this.getSvgY(data[0].y) + ' '\r\n\r\n    pathD += data.map((point, i) => {\r\n      return 'L ' + this.getSvgX(point.x) + ' ' + this.getSvgY(point.y) + ' '\r\n    })\r\n\r\n    return (\r\n      <path className=\"linechart_path\" d={pathD} style={{ stroke: color }} />\r\n    )\r\n  }\r\n\r\n  // BUILD SHADED AREA\r\n  makeArea() {\r\n    const { data } = this.props\r\n    let pathD =\r\n      'M ' + this.getSvgX(data[0].x) + ' ' + this.getSvgY(data[0].y) + ' '\r\n\r\n    pathD += data.map((point, i) => {\r\n      return 'L ' + this.getSvgX(point.x) + ' ' + this.getSvgY(point.y) + ' '\r\n    })\r\n\r\n    const x = this.getX()\r\n    const y = this.getY()\r\n    pathD +=\r\n      'L ' +\r\n      this.getSvgX(x.max) +\r\n      ' ' +\r\n      this.getSvgY(y.min) +\r\n      ' ' +\r\n      'L ' +\r\n      this.getSvgX(x.min) +\r\n      ' ' +\r\n      this.getSvgY(y.min) +\r\n      ' '\r\n\r\n    return (\r\n      <svg>\r\n        <defs>\r\n          <linearGradient id=\"MyGradient\" gradientTransform=\"rotate(80)\">\r\n            <stop offset=\"35%\" stopColor=\"#7ce0d680\" />\r\n            <stop offset=\"95%\" stopColor=\"#7ce0d600\" />\r\n          </linearGradient>\r\n        </defs>\r\n        <path className=\"linechart_area\" d={pathD} />\r\n      </svg>\r\n    )\r\n  }\r\n\r\n  // BUILD GRID AXIS\r\n  makeAxis() {\r\n    const { yLabelSize } = this.props\r\n    const x = this.getX()\r\n    const y = this.getY()\r\n\r\n    return (\r\n      <g className=\"linechart_axis\">\r\n        <line\r\n          x1={this.getSvgX(x.min) - yLabelSize}\r\n          y1={this.getSvgY(y.min)}\r\n          x2={this.getSvgX(x.max)}\r\n          y2={this.getSvgY(y.min)}\r\n          strokeDasharray=\"5\"\r\n        />\r\n        <line\r\n          x1={this.getSvgX(x.min) - yLabelSize}\r\n          y1={this.getSvgY(y.max)}\r\n          x2={this.getSvgX(x.max)}\r\n          y2={this.getSvgY(y.max)}\r\n          strokeDasharray=\"5\"\r\n        />\r\n      </g>\r\n    )\r\n  }\r\n\r\n  makeLabels() {\r\n    const { svgHeight, svgWidth, xLabelSize, yLabelSize } = this.props\r\n    const padding = 5\r\n    return (\r\n      <g className=\"linechart_label\">\r\n        {/* Y AXIS LABELS */}\r\n        <text\r\n          transform={`translate(${yLabelSize / 2}, 20)`}\r\n          textAnchor=\"middle\"\r\n        >\r\n          {this.getY().max.toLocaleString('us-EN', {\r\n            style: 'currency',\r\n            currency: 'USD',\r\n          })}\r\n        </text>\r\n        <text\r\n          transform={`translate(${yLabelSize / 2}, ${svgHeight -\r\n            xLabelSize -\r\n            padding})`}\r\n          textAnchor=\"middle\"\r\n        >\r\n          {this.getY().min.toLocaleString('us-EN', {\r\n            style: 'currency',\r\n            currency: 'USD',\r\n          })}\r\n        </text>\r\n        {/* X AXIS LABELS */}\r\n        <text\r\n          transform={`translate(${yLabelSize}, ${svgHeight})`}\r\n          textAnchor=\"start\"\r\n        >\r\n          {this.props.data[0].d}\r\n        </text>\r\n        <text\r\n          transform={`translate(${svgWidth}, ${svgHeight})`}\r\n          textAnchor=\"end\"\r\n        >\r\n          {this.props.data[this.props.data.length - 1].d}\r\n        </text>\r\n      </g>\r\n    )\r\n  }\r\n\r\n  // FIND CLOSEST POINT TO MOUSE\r\n  getCoords(e) {\r\n    const { svgWidth, data, yLabelSize } = this.props\r\n    const svgLocation = document\r\n      .getElementsByClassName('linechart')[0]\r\n      .getBoundingClientRect()\r\n    const adjustment = (svgLocation.width - svgWidth) / 2 // takes padding into consideration\r\n    const relativeLoc = e.clientX - svgLocation.left - adjustment\r\n\r\n    const svgData = []\r\n    data.map((point, i) => {\r\n      svgData.push({\r\n        svgX: this.getSvgX(point.x),\r\n        svgY: this.getSvgY(point.y),\r\n        d: point.d,\r\n        p: point.p,\r\n      })\r\n    })\r\n\r\n    let closestPoint = {}\r\n    for (let i = 0, c = 500; i < svgData.length; i++) {\r\n      if (Math.abs(svgData[i].svgX - this.state.hoverLoc) <= c) {\r\n        c = Math.abs(svgData[i].svgX - this.state.hoverLoc)\r\n        closestPoint = svgData[i]\r\n      }\r\n    }\r\n\r\n    if (relativeLoc - yLabelSize < 0) {\r\n      this.stopHover()\r\n    } else {\r\n      this.setState({\r\n        hoverLoc: relativeLoc,\r\n        activePoint: closestPoint,\r\n      })\r\n      this.props.onChartHover(relativeLoc, closestPoint)\r\n    }\r\n  }\r\n\r\n  // STOP HOVER\r\n  stopHover() {\r\n    this.setState({ hoverLoc: null, activePoint: null })\r\n    this.props.onChartHover(null, null)\r\n  }\r\n\r\n  // MAKE ACTIVE POINT\r\n  makeActivePoint() {\r\n    const { color, pointRadius } = this.props\r\n    return (\r\n      <circle\r\n        className=\"linechart_point\"\r\n        style={{ stroke: color }}\r\n        r={pointRadius}\r\n        cx={this.state.activePoint.svgX}\r\n        cy={this.state.activePoint.svgY}\r\n      />\r\n    )\r\n  }\r\n\r\n  // MAKE HOVER LINE\r\n  createLine() {\r\n    const { svgHeight, xLabelSize } = this.props\r\n    return (\r\n      <line\r\n        className=\"hoverLine\"\r\n        x1={this.state.hoverLoc}\r\n        y1={-8}\r\n        x2={this.state.hoverLoc}\r\n        y2={svgHeight - xLabelSize}\r\n      />\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const { svgHeight, svgWidth } = this.props\r\n    return (\r\n      <svg\r\n        width={svgWidth}\r\n        height={svgHeight}\r\n        viewBox={`10 -10 ${svgWidth} ${svgHeight}`}\r\n        className=\"linechart\"\r\n        onMouseLeave={() => this.stopHover()}\r\n        onMouseMove={e => this.getCoords(e)}\r\n      >\r\n        <g>\r\n          {this.props.showAxis && this.makeAxis()}\r\n          {this.makePath()}\r\n          {this.makeArea()}\r\n          {this.props.showLabels && this.makeLabels()}\r\n          {this.props.showHoverLoc && this.state.hoverLoc\r\n            ? this.createLine()\r\n            : null}\r\n          {this.state.hoverLoc ? this.makeActivePoint() : null}\r\n        </g>\r\n      </svg>\r\n    )\r\n  }\r\n}\r\n\r\nexport const loadExampleData = () => {\r\n  const sortedData = []\r\n  let count = 0\r\n  for (const date in data.bpi) {\r\n    sortedData.push({\r\n      d: moment(date).format('MMM DD'),\r\n      p: data.bpi[date].toLocaleString('us-EN', {\r\n        style: 'currency',\r\n        currency: 'USD',\r\n      }),\r\n      x: count,\r\n      y: data.bpi[date],\r\n    })\r\n    count++\r\n  }\r\n\r\n  return sortedData\r\n}\r\n// DEFAULT PROPS\r\nLineChart.defaultProps = {\r\n  data: loadExampleData(),\r\n  color: '#7CE0D6',\r\n  pointRadius: 6,\r\n  svgHeight: 300,\r\n  svgWidth: 900,\r\n  xLabelSize: 20,\r\n  yLabelSize: 80,\r\n  showLabels: false,\r\n  showHoverLoc: false,\r\n  showAxis: false,\r\n}\r\n\r\nexport default LineChart\r\n"]},"metadata":{},"sourceType":"module"}