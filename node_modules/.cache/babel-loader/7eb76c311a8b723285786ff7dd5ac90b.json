{"ast":null,"code":"'use strict';\n\nfunction difference(a, b, key) {\n  // Indices for quick lookups\n  var processed = {};\n  var existing = {}; // Create an index of the first collection\n\n  var addToIndex = function addToIndex(e) {\n    return existing[key ? e[key] : e] = true;\n  };\n\n  a.forEach(addToIndex); // Reduce to entries that are not in the first collection\n\n  var reducer = function reducer(res, entry) {\n    var isInFirst = existing[key ? entry[key] : entry] !== undefined;\n    var hasBeenProcessed = processed[key ? entry[key] : entry] !== undefined;\n\n    if (!isInFirst && !hasBeenProcessed) {\n      res.push(entry);\n      processed[key ? entry[key] : entry] = true;\n    }\n\n    return res;\n  };\n\n  return b.reduce(reducer, []);\n}\n\nmodule.exports = difference;","map":null,"metadata":{},"sourceType":"script"}