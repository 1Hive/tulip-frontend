{"ast":null,"code":"'use strict';\n\nconst UnixFS = require('ipfs-unixfs');\n\nconst {\n  DAGNode\n} = require('ipld-dag-pb');\n\nconst mc = require('multicodec');\n\nconst mh = require('multihashes');\n\nconst createNode = async (context, type, options) => {\n  const hashAlg = mh.names[options.hashAlg];\n  const metadata = new UnixFS({\n    type,\n    mode: options.mode,\n    mtime: options.mtime\n  });\n  const node = new DAGNode(metadata.marshal());\n  const cid = await context.ipld.put(node, mc.DAG_PB, {\n    cidVersion: options.cidVersion,\n    hashAlg,\n    onlyHash: !options.flush\n  });\n  return {\n    cid,\n    node\n  };\n};\n\nmodule.exports = createNode;","map":null,"metadata":{},"sourceType":"script"}