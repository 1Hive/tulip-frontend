{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar slicedToArray = require('./slicedToArray-a8a77f0e.js');\n\nrequire('./unsupportedIterableToArray-f175acfa.js');\n\nvar React = require('react');\n\nrequire('./_commonjsHelpers-1b94f6bc.js');\n\nrequire('./index-46d0e707.js');\n\nrequire('./defineProperty-3cad0327.js');\n\nvar toConsumableArray = require('./toConsumableArray-cc0d28a9.js');\n\nvar _styled = require('styled-components');\n\nvar css = require('./css.js');\n\nrequire('./miscellaneous.js');\n\nrequire('./environment.js');\n\nvar springs = require('./springs.js');\n\nvar _extends = require('./extends-023d783e.js');\n\nvar objectWithoutProperties = require('./objectWithoutProperties-c6d3675c.js');\n\nrequire('./objectWithoutPropertiesLoose-1af20ad0.js');\n\nrequire('react-dom');\n\nvar web = require('./web-7cbdbd84.js');\n\nvar proptypes = require('./proptypes-9c58a90f.js');\n\nfunction _interopDefaultLegacy(e) {\n  return e && typeof e === 'object' && 'default' in e ? e : {\n    'default': e\n  };\n}\n\nvar React__default = /*#__PURE__*/_interopDefaultLegacy(React);\n\nvar _styled__default = /*#__PURE__*/_interopDefaultLegacy(_styled);\n\nvar LABELS_HEIGHT = 30;\nvar WIDTH_DEFAULT = 300;\n\nfunction useMeasuredWidth() {\n  var ref = React.useRef();\n\n  var _useState = React.useState(WIDTH_DEFAULT),\n      _useState2 = slicedToArray.slicedToArray(_useState, 2),\n      measuredWidth = _useState2[0],\n      setMeasuredWidth = _useState2[1];\n\n  var onResize = React.useCallback(function () {\n    if (ref.current) {\n      setMeasuredWidth(ref.current.clientWidth);\n    }\n  }, []);\n  var onRef = React.useCallback(function (element) {\n    ref.current = element;\n    onResize();\n  }, [onResize]);\n  React.useEffect(function () {\n    window.addEventListener('resize', onResize);\n    return function () {\n      return window.removeEventListener('resize', onResize);\n    };\n  }, [onResize]);\n  return [measuredWidth, onRef];\n}\n\nvar _StyledSvg = _styled__default['default'](\"svg\").withConfig({\n  displayName: \"LineChart___StyledSvg\",\n  componentId: \"sc-8kiakb-0\"\n})([\"display:block\"]);\n\nvar _StyledText = _styled__default['default'](\"text\").withConfig({\n  displayName: \"LineChart___StyledText\",\n  componentId: \"sc-8kiakb-1\"\n})([\"alignment-baseline:middle;font-size:12px;font-weight:300;\", \";\"], css.unselectable);\n\nfunction LineChart(_ref) {\n  var animDelay = _ref.animDelay,\n      borderColor = _ref.borderColor,\n      color = _ref.color,\n      dotRadius = _ref.dotRadius,\n      height = _ref.height,\n      label = _ref.label,\n      labelColor = _ref.labelColor,\n      linesProps = _ref.lines,\n      reset = _ref.reset,\n      springConfig = _ref.springConfig,\n      total = _ref.total,\n      widthProps = _ref.width,\n      props = objectWithoutProperties.objectWithoutProperties(_ref, [\"animDelay\", \"borderColor\", \"color\", \"dotRadius\", \"height\", \"label\", \"labelColor\", \"lines\", \"reset\", \"springConfig\", \"total\", \"width\"]);\n\n  var _useMeasuredWidth = useMeasuredWidth(),\n      _useMeasuredWidth2 = slicedToArray.slicedToArray(_useMeasuredWidth, 2),\n      width = _useMeasuredWidth2[0],\n      onSvgRef = _useMeasuredWidth2[1];\n\n  var lines = React.useMemo(function () {\n    return linesProps.map(function (lineOrValues) {\n      return Array.isArray(lineOrValues) ? {\n        values: lineOrValues\n      } : lineOrValues;\n    });\n  }, [linesProps]); // the count of provided values\n\n  var valuesCount = React.useMemo(function () {\n    // All the values have the same length, so we can use the first one.\n    return lines[0] ? lines[0].values.length : 0;\n  }, [lines]); // the total amount of values\n\n  var totalCount = React.useMemo(function () {\n    // If no total is provided, the total is the number of provided values.\n    return total > 0 && total > valuesCount ? total : valuesCount;\n  }, [valuesCount, total]);\n  var getX = React.useCallback(function (index) {\n    return width / Math.max(1, totalCount - 1) * index;\n  }, [width, totalCount]);\n  var getY = React.useCallback(function (percentage, progress, height) {\n    var padding = dotRadius + 2;\n    return height - padding - (height - padding * 2) * percentage * progress;\n  }, [dotRadius]);\n  var getLabelPosition = React.useCallback(function (index, length) {\n    if (index === 0) return 'start';\n    if (index === length - 1) return 'end';\n    return 'middle';\n  }, []);\n  var labels = label && totalCount > 0 ? toConsumableArray.toConsumableArray(Array(totalCount).keys()).map(label) : null;\n  var chartHeight = height - (labels ? LABELS_HEIGHT : 0);\n  var rectangle = /*#__PURE__*/React__default['default'].createElement(\"rect\", {\n    width: width,\n    height: chartHeight,\n    rx: \"3\",\n    ry: \"3\",\n    fill: \"#ffffff\",\n    strokeWidth: \"1\",\n    stroke: borderColor\n  });\n  return /*#__PURE__*/React__default['default'].createElement(web.Spring, {\n    from: {\n      progress: 0\n    },\n    to: {\n      progress: 1\n    },\n    config: springConfig,\n    delay: animDelay,\n    reset: reset\n  }, function (_ref2) {\n    var progress = _ref2.progress;\n    return /*#__PURE__*/React__default['default'].createElement(_StyledSvg, _extends._extends_1({\n      ref: onSvgRef,\n      viewBox: \"0 0 \".concat(width, \" \").concat(height),\n      width: widthProps || 'auto',\n      height: \"auto\"\n    }, props), /*#__PURE__*/React__default['default'].createElement(\"mask\", {\n      id: \"chart-mask\"\n    }, rectangle), rectangle, /*#__PURE__*/React__default['default'].createElement(\"g\", {\n      mask: \"url(#chart-mask)\"\n    }, totalCount > 0 && /*#__PURE__*/React__default['default'].createElement(\"path\", {\n      d: \"\\n                  \".concat(toConsumableArray.toConsumableArray(new Array(totalCount - 1)).reduce(function (path, _, index) {\n        return \"\".concat(path, \" M \").concat(getX(index), \",\").concat(chartHeight, \" l 0,-8\");\n      }, ''), \"\\n                \"),\n      stroke: borderColor,\n      strokeWidth: \"1\"\n    }), lines.map(function (line, lineIndex) {\n      return /*#__PURE__*/React__default['default'].createElement(\"g\", {\n        key: \"line-plot-\".concat(line.id || lineIndex)\n      }, /*#__PURE__*/React__default['default'].createElement(\"path\", {\n        d: \"\\n                    M\\n                    \".concat(getX(0), \",\\n                    \").concat(getY(line.values[0], progress, chartHeight), \"\\n\\n                    \").concat(line.values.slice(1).map(function (val, index) {\n          return \"L\\n                           \".concat(getX((index + 1) * progress), \",\\n                           \").concat(getY(val, progress, chartHeight), \"\\n                          \");\n        }).join(''), \"\\n                  \"),\n        fill: \"transparent\",\n        stroke: line.color || color(lineIndex, {\n          lines: lines\n        }),\n        strokeWidth: \"2\"\n      }), line.values.slice(1, -1).map(function (val, index) {\n        return /*#__PURE__*/React__default['default'].createElement(\"circle\", {\n          key: index,\n          cx: getX(index + 1) * progress,\n          cy: getY(val, progress, chartHeight),\n          r: dotRadius,\n          fill: \"white\",\n          stroke: line.color || color(lineIndex, {\n            lines: lines\n          }),\n          strokeWidth: \"1\"\n        });\n      }));\n    }), /*#__PURE__*/React__default['default'].createElement(\"line\", {\n      x1: getX(valuesCount - 1) * progress,\n      y1: \"0\",\n      x2: getX(valuesCount - 1) * progress,\n      y2: chartHeight,\n      stroke: \"#DAEAEF\",\n      strokeWidth: \"3\"\n    })), labels && /*#__PURE__*/React__default['default'].createElement(\"g\", {\n      transform: \"translate(0,\".concat(chartHeight, \")\")\n    }, labels.map(function (label, index) {\n      return /*#__PURE__*/React__default['default'].createElement(_StyledText, {\n        key: index,\n        x: getX(index),\n        y: LABELS_HEIGHT / 2,\n        textAnchor: getLabelPosition(index, labels.length),\n        fill: labelColor\n      }, label);\n    })));\n  });\n}\n\nLineChart.propTypes = {\n  springConfig: proptypes.ExtendedPropTypes._spring,\n  total: proptypes.ExtendedPropTypes.number,\n  width: proptypes.ExtendedPropTypes.number,\n  height: proptypes.ExtendedPropTypes.number,\n  dotRadius: proptypes.ExtendedPropTypes.number,\n  animDelay: proptypes.ExtendedPropTypes.number,\n  borderColor: proptypes.ExtendedPropTypes.string,\n  labelColor: proptypes.ExtendedPropTypes.string,\n  reset: proptypes.ExtendedPropTypes.bool,\n  lines: proptypes.ExtendedPropTypes.arrayOf(proptypes.ExtendedPropTypes.oneOfType([proptypes.ExtendedPropTypes.shape({\n    id: proptypes.ExtendedPropTypes.number,\n    values: proptypes.ExtendedPropTypes.arrayOf(proptypes.ExtendedPropTypes.number).isRequired,\n    // numbers between 0 and 1\n    color: proptypes.ExtendedPropTypes.string // overrides the color() prop if set\n\n  }), // values can also be passed directly\n  proptypes.ExtendedPropTypes.arrayOf(proptypes.ExtendedPropTypes.number)])),\n  label: proptypes.ExtendedPropTypes.oneOfType([proptypes.ExtendedPropTypes.func, proptypes.ExtendedPropTypes._null]),\n  color: proptypes.ExtendedPropTypes.func\n};\nLineChart.defaultProps = {\n  springConfig: springs.springs.lazy,\n  total: -1,\n  height: 200,\n  dotRadius: 7 / 2,\n  animDelay: 500,\n  reset: false,\n  borderColor: 'rgba(209, 209, 209, 0.5)',\n  labelColor: '#6d777b',\n  lines: [],\n  label: function label(index) {\n    return index + 1;\n  },\n  color: function color(index, _ref3) {\n    var lines = _ref3.lines;\n    return \"hsl(\".concat((index * (360 / lines.length) + 40) % 360, \", 60%, 70%)\");\n  }\n};\nexports.default = LineChart;","map":{"version":3,"sources":["../src/components/LineChart/LineChart.js"],"names":["LABELS_HEIGHT","WIDTH_DEFAULT","ref","useRef","measuredWidth","setMeasuredWidth","useState","onResize","useCallback","onRef","useEffect","window","animDelay","borderColor","color","dotRadius","height","label","labelColor","lines","linesProps","reset","springConfig","total","width","widthProps","props","onSvgRef","useMeasuredWidth","useMemo","values","lineOrValues","valuesCount","totalCount","getX","Math","getY","padding","getLabelPosition","index","length","labels","_toConsumableArray","Array","chartHeight","rectangle","Spring","progress","line","unselectable","LineChart","PropTypes","id","func","springs"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react'\nimport { Spring } from 'react-spring'\nimport PropTypes from '../../proptypes'\nimport { springs } from '../../style'\nimport { unselectable } from '../../utils'\n\nconst LABELS_HEIGHT = 30\nconst WIDTH_DEFAULT = 300\n\nfunction useMeasuredWidth() {\n  const ref = useRef()\n  const [measuredWidth, setMeasuredWidth] = useState(WIDTH_DEFAULT)\n\n  const onResize = useCallback(() => {\n    if (ref.current) {\n      setMeasuredWidth(ref.current.clientWidth)\n    }\n  }, [])\n\n  const onRef = useCallback(\n    element => {\n      ref.current = element\n      onResize()\n    },\n    [onResize]\n  )\n\n  useEffect(() => {\n    window.addEventListener('resize', onResize)\n    return () => window.removeEventListener('resize', onResize)\n  }, [onResize])\n\n  return [measuredWidth, onRef]\n}\n\nfunction LineChart({\n  animDelay,\n  borderColor,\n  color,\n  dotRadius,\n  height,\n  label,\n  labelColor,\n  lines: linesProps,\n  reset,\n  springConfig,\n  total,\n  width: widthProps,\n  ...props\n}) {\n  const [width, onSvgRef] = useMeasuredWidth()\n\n  const lines = useMemo(() => {\n    return linesProps.map(lineOrValues =>\n      Array.isArray(lineOrValues) ? { values: lineOrValues } : lineOrValues\n    )\n  }, [linesProps])\n\n  // the count of provided values\n  const valuesCount = useMemo(() => {\n    // All the values have the same length, so we can use the first one.\n    return lines[0] ? lines[0].values.length : 0\n  }, [lines])\n\n  // the total amount of values\n  const totalCount = useMemo(() => {\n    // If no total is provided, the total is the number of provided values.\n    return total > 0 && total > valuesCount ? total : valuesCount\n  }, [valuesCount, total])\n\n  const getX = useCallback(\n    index => {\n      return (width / Math.max(1, totalCount - 1)) * index\n    },\n    [width, totalCount]\n  )\n\n  const getY = useCallback(\n    (percentage, progress, height) => {\n      const padding = dotRadius + 2\n      return height - padding - (height - padding * 2) * percentage * progress\n    },\n    [dotRadius]\n  )\n\n  const getLabelPosition = useCallback((index, length) => {\n    if (index === 0) return 'start'\n    if (index === length - 1) return 'end'\n    return 'middle'\n  }, [])\n\n  const labels =\n    label && totalCount > 0 ? [...Array(totalCount).keys()].map(label) : null\n\n  const chartHeight = height - (labels ? LABELS_HEIGHT : 0)\n\n  const rectangle = (\n    <rect\n      width={width}\n      height={chartHeight}\n      rx=\"3\"\n      ry=\"3\"\n      fill=\"#ffffff\"\n      strokeWidth=\"1\"\n      stroke={borderColor}\n    />\n  )\n\n  return (\n    <Spring\n      from={{ progress: 0 }}\n      to={{ progress: 1 }}\n      config={springConfig}\n      delay={animDelay}\n      reset={reset}\n    >\n      {({ progress }) => (\n        <svg\n          ref={onSvgRef}\n          viewBox={`0 0 ${width} ${height}`}\n          width={widthProps || 'auto'}\n          height=\"auto\"\n          css=\"display: block\"\n          {...props}\n        >\n          <mask id=\"chart-mask\">{rectangle}</mask>\n          {rectangle}\n\n          <g mask=\"url(#chart-mask)\">\n            {totalCount > 0 && (\n              <path\n                d={`\n                  ${[...new Array(totalCount - 1)].reduce(\n                    (path, _, index) =>\n                      `${path} M ${getX(index)},${chartHeight} l 0,-8`,\n                    ''\n                  )}\n                `}\n                stroke={borderColor}\n                strokeWidth=\"1\"\n              />\n            )}\n            {lines.map((line, lineIndex) => (\n              <g key={`line-plot-${line.id || lineIndex}`}>\n                <path\n                  d={`\n                    M\n                    ${getX(0)},\n                    ${getY(line.values[0], progress, chartHeight)}\n\n                    ${line.values\n                      .slice(1)\n                      .map(\n                        (val, index) =>\n                          `L\n                           ${getX((index + 1) * progress)},\n                           ${getY(val, progress, chartHeight)}\n                          `\n                      )\n                      .join('')}\n                  `}\n                  fill=\"transparent\"\n                  stroke={line.color || color(lineIndex, { lines })}\n                  strokeWidth=\"2\"\n                />\n                {line.values.slice(1, -1).map((val, index) => (\n                  <circle\n                    key={index}\n                    cx={getX(index + 1) * progress}\n                    cy={getY(val, progress, chartHeight)}\n                    r={dotRadius}\n                    fill=\"white\"\n                    stroke={line.color || color(lineIndex, { lines })}\n                    strokeWidth=\"1\"\n                  />\n                ))}\n              </g>\n            ))}\n            <line\n              x1={getX(valuesCount - 1) * progress}\n              y1=\"0\"\n              x2={getX(valuesCount - 1) * progress}\n              y2={chartHeight}\n              stroke=\"#DAEAEF\"\n              strokeWidth=\"3\"\n            />\n          </g>\n          {labels && (\n            <g transform={`translate(0,${chartHeight})`}>\n              {labels.map((label, index) => (\n                <text\n                  key={index}\n                  x={getX(index)}\n                  y={LABELS_HEIGHT / 2}\n                  textAnchor={getLabelPosition(index, labels.length)}\n                  fill={labelColor}\n                  css={`\n                    alignment-baseline: middle;\n                    font-size: 12px;\n                    font-weight: 300;\n                    ${unselectable};\n                  `}\n                >\n                  {label}\n                </text>\n              ))}\n            </g>\n          )}\n        </svg>\n      )}\n    </Spring>\n  )\n}\n\nLineChart.propTypes = {\n  springConfig: PropTypes._spring,\n  total: PropTypes.number,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  dotRadius: PropTypes.number,\n  animDelay: PropTypes.number,\n  borderColor: PropTypes.string,\n  labelColor: PropTypes.string,\n  reset: PropTypes.bool,\n  lines: PropTypes.arrayOf(\n    PropTypes.oneOfType([\n      PropTypes.shape({\n        id: PropTypes.number,\n        values: PropTypes.arrayOf(PropTypes.number).isRequired, // numbers between 0 and 1\n        color: PropTypes.string, // overrides the color() prop if set\n      }),\n      // values can also be passed directly\n      PropTypes.arrayOf(PropTypes.number),\n    ])\n  ),\n  label: PropTypes.oneOfType([PropTypes.func, PropTypes._null]),\n  color: PropTypes.func,\n}\n\nLineChart.defaultProps = {\n  springConfig: springs.lazy,\n  total: -1,\n  height: 200,\n  dotRadius: 7 / 2,\n  animDelay: 500,\n  reset: false,\n  borderColor: 'rgba(209, 209, 209, 0.5)',\n  labelColor: '#6d777b',\n  lines: [],\n  label: index => index + 1,\n  color: (index, { lines }) =>\n    `hsl(${(index * (360 / lines.length) + 40) % 360}, 60%, 70%)`,\n}\n\nexport default LineChart\n"]},"metadata":{},"sourceType":"script"}