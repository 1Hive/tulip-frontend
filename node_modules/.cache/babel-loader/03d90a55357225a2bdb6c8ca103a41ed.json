{"ast":null,"code":"'use strict';\n\nconst exporter = require('ipfs-unixfs-exporter');\n\nconst errCode = require('err-code');\n\nconst {\n  normalizeCidPath,\n  mapFile,\n  withTimeoutOption\n} = require('../utils');\n\nmodule.exports = function ({\n  ipld,\n  preload\n}) {\n  return withTimeoutOption(async function* get(ipfsPath, options) {\n    options = options || {};\n\n    if (options.preload !== false) {\n      let pathComponents;\n\n      try {\n        pathComponents = normalizeCidPath(ipfsPath).split('/');\n      } catch (err) {\n        throw errCode(err, 'ERR_INVALID_PATH');\n      }\n\n      preload(pathComponents[0]);\n    }\n\n    for await (const file of exporter.recursive(ipfsPath, ipld, options)) {\n      yield mapFile(file, { ...options,\n        includeContent: true\n      });\n    }\n  });\n};","map":null,"metadata":{},"sourceType":"script"}