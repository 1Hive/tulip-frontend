{"ast":null,"code":"import { useEffect, useMemo, useState } from 'react';\nimport { wallet } from 'tulip-data';\nimport { useWallet } from 'use-wallet';\nexport function useWalletData() {\n  const [walletInfo, setWalletInfo] = useState([]);\n  const [poolingInfo, setPoolingInfo] = useState([]);\n  const [isFetching, setIsFetching] = useState(false);\n  const {\n    account\n  } = useWallet();\n  useEffect(() => {\n    let cancelled = false;\n\n    if (!account) {\n      return setWalletInfo([]);\n    }\n\n    const fetchWalletData = async () => {\n      try {\n        setIsFetching(true);\n        const balances = await wallet.tokenBalances({\n          user_address: account\n        });\n        console.log(balances);\n\n        if (!cancelled) {\n          setIsFetching(false);\n          return setWalletInfo(balances);\n        }\n      } catch (err) {\n        console.error(`Could not fetch wallet data `, err);\n      }\n    };\n\n    const fetchPoolingData = async () => {\n      try {\n        setIsFetching(true);\n        const poolingData = await wallet.poolBalances({\n          user_address: account\n        });\n        console.log('POOLING DATA:', poolingData.tokens);\n\n        if (!cancelled) {\n          setIsFetching(false);\n          return setPoolingInfo(poolingData);\n        }\n      } catch (err) {\n        console.error(`Could not fetch wallet data `, err);\n      }\n    };\n\n    fetchWalletData();\n    fetchPoolingData();\n    return () => {\n      setIsFetching(false);\n      cancelled = true;\n    };\n  }, [account]);\n  return [walletInfo, poolingInfo, isFetching];\n}\nexport function useNetBalance() {\n  const [walletInfo, poolingInfo, isFetching] = useWalletData();\n  console.log(walletInfo, isFetching);\n  return useMemo(() => {\n    if (!walletInfo || walletInfo.length === 0) {\n      return [0, isFetching];\n    }\n\n    console.log(poolingInfo);\n    console.log(walletInfo);\n    let netBalance = 0;\n    walletInfo.map(value => {\n      console.log(value);\n\n      if (value && parseFloat(value.valueUSD)) {\n        netBalance = netBalance + parseFloat(value.valueUSD);\n      }\n    });\n    return [netBalance.toFixed(2), isFetching];\n  }, [walletInfo, isFetching]);\n}","map":{"version":3,"sources":["/Users/fabianmolina/Documents/1hive/tulip-frontend/src/hooks/useWalletData.js"],"names":["useEffect","useMemo","useState","wallet","useWallet","useWalletData","walletInfo","setWalletInfo","poolingInfo","setPoolingInfo","isFetching","setIsFetching","account","cancelled","fetchWalletData","balances","tokenBalances","user_address","console","log","err","error","fetchPoolingData","poolingData","poolBalances","tokens","useNetBalance","length","netBalance","map","value","parseFloat","valueUSD","toFixed"],"mappings":"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","sourcesContent":["import { useEffect, useMemo, useState } from 'react'\r\nimport { wallet } from 'tulip-data'\r\nimport { useWallet } from 'use-wallet'\r\n\r\nexport function useWalletData() {\r\n  const [walletInfo, setWalletInfo] = useState([])\r\n  const [poolingInfo, setPoolingInfo] = useState([])\r\n  const [isFetching, setIsFetching] = useState(false)\r\n  const { account } = useWallet()\r\n\r\n  useEffect(() => {\r\n    let cancelled = false\r\n    if (!account) {\r\n      return setWalletInfo([])\r\n    }\r\n\r\n    const fetchWalletData = async () => {\r\n      try {\r\n        setIsFetching(true)\r\n        const balances = await wallet.tokenBalances({\r\n          user_address: account,\r\n        })\r\n        console.log(balances)\r\n        if (!cancelled) {\r\n          setIsFetching(false)\r\n          return setWalletInfo(balances)\r\n        }\r\n      } catch (err) {\r\n        console.error(`Could not fetch wallet data `, err)\r\n      }\r\n    }\r\n\r\n    const fetchPoolingData = async () => {\r\n      try {\r\n        setIsFetching(true)\r\n        const poolingData = await wallet.poolBalances({\r\n          user_address: account,\r\n        })\r\n        console.log('POOLING DATA:', poolingData.tokens)\r\n        if (!cancelled) {\r\n          setIsFetching(false)\r\n          return setPoolingInfo(poolingData)\r\n        }\r\n      } catch (err) {\r\n        console.error(`Could not fetch wallet data `, err)\r\n      }\r\n    }\r\n\r\n    fetchWalletData()\r\n    fetchPoolingData()\r\n    return () => {\r\n      setIsFetching(false)\r\n      cancelled = true\r\n    }\r\n  }, [account])\r\n\r\n  return [walletInfo, poolingInfo, isFetching]\r\n}\r\n\r\nexport function useNetBalance() {\r\n  const [walletInfo, poolingInfo, isFetching] = useWalletData()\r\n  console.log(walletInfo, isFetching)\r\n  return useMemo(() => {\r\n    if (!walletInfo || walletInfo.length === 0) {\r\n      return [0, isFetching]\r\n    }\r\n    console.log(poolingInfo)\r\n    console.log(walletInfo)\r\n    let netBalance = 0\r\n    walletInfo.map(value => {\r\n      console.log(value)\r\n      if (value && parseFloat(value.valueUSD)) {\r\n        netBalance = netBalance + parseFloat(value.valueUSD)\r\n      }\r\n    })\r\n\r\n    return [netBalance.toFixed(2), isFetching]\r\n  }, [walletInfo, isFetching])\r\n}\r\n"]},"metadata":{},"sourceType":"module"}