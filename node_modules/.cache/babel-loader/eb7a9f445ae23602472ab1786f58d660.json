{"ast":null,"code":"var events = {};\n\nvar observable = function observable(worker) {\n  worker.addEventListener('message', function (event) {\n    observable.dispatchEvent('message', worker, event);\n  });\n\n  if (worker.port) {\n    worker.port.addEventListener('message', function (event) {\n      observable.dispatchEvent('message', worker, event);\n    });\n  }\n};\n\nobservable.addEventListener = function (type, fn) {\n  if (!events[type]) {\n    events[type] = [];\n  }\n\n  events[type].push(fn);\n};\n\nobservable.removeEventListener = function (type, fn) {\n  if (!events[type]) {\n    return;\n  }\n\n  events[type] = events[type].filter(function (listener) {\n    return listener === fn;\n  });\n};\n\nobservable.dispatchEvent = function () {\n  var args = Array.prototype.slice.call(arguments);\n  var type = args.shift();\n\n  if (!events[type]) {\n    return;\n  }\n\n  events[type].forEach(function (fn) {\n    return fn.apply(null, args);\n  });\n};\n\nmodule.exports = observable;","map":null,"metadata":{},"sourceType":"script"}