{"ast":null,"code":"'use strict';\n\nvar errcode = require('err-code');\n/**\n * Select the best record out of the given records.\n *\n * @param {Object} selectors\n * @param {Buffer} k\n * @param {Array<Buffer>} records\n * @returns {number} - The index of the best record.\n */\n\n\nvar bestRecord = function bestRecord(selectors, k, records) {\n  if (records.length === 0) {\n    var errMsg = 'No records given';\n    throw errcode(new Error(errMsg), 'ERR_NO_RECORDS_RECEIVED');\n  }\n\n  var parts = k.toString().split('/');\n\n  if (parts.length < 3) {\n    var _errMsg = 'Record key does not have a selector function';\n    throw errcode(new Error(_errMsg), 'ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY');\n  }\n\n  var selector = selectors[parts[1].toString()];\n\n  if (!selector) {\n    var _errMsg2 = \"Unrecognized key prefix: \".concat(parts[1]);\n\n    throw errcode(new Error(_errMsg2), 'ERR_UNRECOGNIZED_KEY_PREFIX');\n  }\n\n  return selector(k, records);\n};\n\nmodule.exports = {\n  bestRecord: bestRecord,\n  selectors: require('./selectors')\n};","map":null,"metadata":{},"sourceType":"script"}