{"ast":null,"code":"var _jsxFileName = \"/Users/fabian/Documents/Projects/1hive/tulip-frontend/src/views/Profile/components/EditProfileModal/ApproveCakeView.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useWallet } from '@binance-chain/bsc-use-wallet';\nimport { AutoRenewIcon, Button, Flex, Text } from '@pancakeswap-libs/uikit';\nimport useI18n from 'hooks/useI18n';\nimport { useCake } from 'hooks/useContract';\nimport { useProfile, useToast } from 'state/hooks';\nimport { getPancakeProfileAddress } from 'utils/addressHelpers';\nimport { getFullDisplayBalance } from 'utils/formatBalance';\nimport useGetProfileCosts from '../../hooks/useGetProfileCosts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ApproveCakePage = ({\n  goToChange,\n  onDismiss\n}) => {\n  _s();\n\n  const [isApproving, setIsApproving] = useState(false);\n  const {\n    profile\n  } = useProfile();\n  const TranslateString = useI18n();\n  const {\n    account\n  } = useWallet();\n  const {\n    numberCakeToUpdate,\n    numberCakeToReactivate\n  } = useGetProfileCosts();\n  const cakeContract = useCake();\n  const {\n    toastError\n  } = useToast();\n  const cost = profile.isActive ? numberCakeToUpdate : numberCakeToReactivate;\n\n  const handleApprove = () => {\n    cakeContract.methods.approve(getPancakeProfileAddress(), cost.times(2).toJSON()).send({\n      from: account\n    }).on('sending', () => {\n      setIsApproving(true);\n    }).on('receipt', () => {\n      goToChange();\n    }).on('error', error => {\n      toastError('Error', error === null || error === void 0 ? void 0 : error.message);\n      setIsApproving(false);\n    });\n  };\n\n  if (!profile) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsxDEV(Flex, {\n    flexDirection: \"column\",\n    children: [/*#__PURE__*/_jsxDEV(Flex, {\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      mb: \"24px\",\n      children: [/*#__PURE__*/_jsxDEV(Text, {\n        children: profile.isActive ? TranslateString(999, 'Cost to update:') : TranslateString(999, 'Cost to reactivate:')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Text, {\n        children: TranslateString(999, `${getFullDisplayBalance(cost)} CAKE`)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      disabled: isApproving,\n      isLoading: isApproving,\n      endIcon: isApproving ? /*#__PURE__*/_jsxDEV(AutoRenewIcon, {\n        spin: true,\n        color: \"currentColor\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 32\n      }, this) : null,\n      fullWidth: true,\n      mb: \"8px\",\n      onClick: handleApprove,\n      children: TranslateString(999, 'Approve')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"text\",\n      fullWidth: true,\n      onClick: onDismiss,\n      disabled: isApproving,\n      children: TranslateString(999, 'Close Window')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ApproveCakePage, \"+AQNM/G3Og7Agf/U6+4MZsu3BUA=\", false, function () {\n  return [useProfile, useI18n, useWallet, useGetProfileCosts, useCake, useToast];\n});\n\n_c = ApproveCakePage;\nexport default ApproveCakePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ApproveCakePage\");","map":{"version":3,"sources":["/Users/fabian/Documents/Projects/1hive/tulip-frontend/src/views/Profile/components/EditProfileModal/ApproveCakeView.tsx"],"names":["React","useState","useWallet","AutoRenewIcon","Button","Flex","Text","useI18n","useCake","useProfile","useToast","getPancakeProfileAddress","getFullDisplayBalance","useGetProfileCosts","ApproveCakePage","goToChange","onDismiss","isApproving","setIsApproving","profile","TranslateString","account","numberCakeToUpdate","numberCakeToReactivate","cakeContract","toastError","cost","isActive","handleApprove","methods","approve","times","toJSON","send","from","on","error","message"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { useWallet } from '@binance-chain/bsc-use-wallet'\nimport { AutoRenewIcon, Button, Flex, InjectedModalProps, Text } from '@pancakeswap-libs/uikit'\nimport useI18n from 'hooks/useI18n'\nimport { useCake } from 'hooks/useContract'\nimport { useProfile, useToast } from 'state/hooks'\nimport { getPancakeProfileAddress } from 'utils/addressHelpers'\nimport { getFullDisplayBalance } from 'utils/formatBalance'\nimport useGetProfileCosts from '../../hooks/useGetProfileCosts'\nimport { UseEditProfileResponse } from './reducer'\n\ninterface ApproveCakePageProps extends InjectedModalProps {\n  goToChange: UseEditProfileResponse['goToChange']\n}\n\nconst ApproveCakePage: React.FC<ApproveCakePageProps> = ({ goToChange, onDismiss }) => {\n  const [isApproving, setIsApproving] = useState(false)\n  const { profile } = useProfile()\n  const TranslateString = useI18n()\n  const { account } = useWallet()\n  const { numberCakeToUpdate, numberCakeToReactivate } = useGetProfileCosts()\n  const cakeContract = useCake()\n  const { toastError } = useToast()\n  const cost = profile.isActive ? numberCakeToUpdate : numberCakeToReactivate\n\n  const handleApprove = () => {\n    cakeContract.methods\n      .approve(getPancakeProfileAddress(), cost.times(2).toJSON())\n      .send({ from: account })\n      .on('sending', () => {\n        setIsApproving(true)\n      })\n      .on('receipt', () => {\n        goToChange()\n      })\n      .on('error', (error) => {\n        toastError('Error', error?.message)\n        setIsApproving(false)\n      })\n  }\n\n  if (!profile) {\n    return null\n  }\n\n  return (\n    <Flex flexDirection=\"column\">\n      <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"24px\">\n        <Text>\n          {profile.isActive ? TranslateString(999, 'Cost to update:') : TranslateString(999, 'Cost to reactivate:')}\n        </Text>\n        <Text>{TranslateString(999, `${getFullDisplayBalance(cost)} CAKE`)}</Text>\n      </Flex>\n      <Button\n        disabled={isApproving}\n        isLoading={isApproving}\n        endIcon={isApproving ? <AutoRenewIcon spin color=\"currentColor\" /> : null}\n        fullWidth\n        mb=\"8px\"\n        onClick={handleApprove}\n      >\n        {TranslateString(999, 'Approve')}\n      </Button>\n      <Button variant=\"text\" fullWidth onClick={onDismiss} disabled={isApproving}>\n        {TranslateString(999, 'Close Window')}\n      </Button>\n    </Flex>\n  )\n}\n\nexport default ApproveCakePage\n"]},"metadata":{},"sourceType":"module"}