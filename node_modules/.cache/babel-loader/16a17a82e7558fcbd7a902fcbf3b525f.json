{"ast":null,"code":"module.exports = function (max) {\n  if (!max) throw Error('hashlru must have a max value, of type number, greater than 0');\n\n  var size = 0,\n      cache = Object.create(null),\n      _cache = Object.create(null);\n\n  function update(key, value) {\n    cache[key] = value;\n    size++;\n\n    if (size >= max) {\n      size = 0;\n      _cache = cache;\n      cache = Object.create(null);\n    }\n  }\n\n  return {\n    has: function (key) {\n      return cache[key] !== undefined || _cache[key] !== undefined;\n    },\n    remove: function (key) {\n      if (cache[key] !== undefined) cache[key] = undefined;\n      if (_cache[key] !== undefined) _cache[key] = undefined;\n    },\n    get: function (key) {\n      var v = cache[key];\n      if (v !== undefined) return v;\n\n      if ((v = _cache[key]) !== undefined) {\n        update(key, v);\n        return v;\n      }\n    },\n    set: function (key, value) {\n      if (cache[key] !== undefined) cache[key] = value;else update(key, value);\n    },\n    clear: function () {\n      cache = Object.create(null);\n      _cache = Object.create(null);\n    }\n  };\n};","map":null,"metadata":{},"sourceType":"script"}