{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport BigNumber from 'bignumber.js';\nimport { useWallet } from '@binance-chain/bsc-use-wallet';\nimport { useCake, useLottery } from './useContract';\nimport { getAllowance } from '../utils/erc20'; // Retrieve lottery allowance\n\nexport const useLotteryAllowance = () => {\n  _s();\n\n  const [allowance, setAllowance] = useState(new BigNumber(0));\n  const {\n    account\n  } = useWallet();\n  const lotteryContract = useLottery();\n  const cakeContract = useCake();\n  useEffect(() => {\n    const fetchAllowance = async () => {\n      const res = await getAllowance(cakeContract, lotteryContract, account);\n      setAllowance(new BigNumber(res));\n    };\n\n    if (account && cakeContract && cakeContract) {\n      fetchAllowance();\n    }\n\n    const refreshInterval = setInterval(fetchAllowance, 10000);\n    return () => clearInterval(refreshInterval);\n  }, [account, cakeContract, lotteryContract]);\n  return allowance;\n}; // Retrieve IFO allowance\n\n_s(useLotteryAllowance, \"wGosQaA5RlTVrQ/mf1uyoFeAK00=\", false, function () {\n  return [useWallet, useLottery, useCake];\n});\n\nexport const useIfoAllowance = (tokenContract, spenderAddress, dependency) => {\n  _s2();\n\n  const {\n    account\n  } = useWallet();\n  const [allowance, setAllowance] = useState(null);\n  useEffect(() => {\n    const fetch = async () => {\n      try {\n        const res = await tokenContract.methods.allowance(account, spenderAddress).call();\n        setAllowance(new BigNumber(res));\n      } catch (e) {\n        setAllowance(null);\n      }\n    };\n\n    fetch();\n  }, [account, spenderAddress, tokenContract, dependency]);\n  return allowance;\n};\n\n_s2(useIfoAllowance, \"q9ROkN0QXR56czc3npru2vScrDg=\", false, function () {\n  return [useWallet];\n});","map":{"version":3,"sources":["/Users/fabian/Documents/Projects/1hive/tulip-frontend/src/hooks/useAllowance.ts"],"names":["useEffect","useState","BigNumber","useWallet","useCake","useLottery","getAllowance","useLotteryAllowance","allowance","setAllowance","account","lotteryContract","cakeContract","fetchAllowance","res","refreshInterval","setInterval","clearInterval","useIfoAllowance","tokenContract","spenderAddress","dependency","fetch","methods","call","e"],"mappings":";;;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,OAAOC,SAAP,MAAsB,cAAtB;AACA,SAASC,SAAT,QAA0B,+BAA1B;AAEA,SAASC,OAAT,EAAkBC,UAAlB,QAAoC,eAApC;AACA,SAASC,YAAT,QAA6B,gBAA7B,C,CAEA;;AACA,OAAO,MAAMC,mBAAmB,GAAG,MAAM;AAAA;;AACvC,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BR,QAAQ,CAAC,IAAIC,SAAJ,CAAc,CAAd,CAAD,CAA1C;AACA,QAAM;AAAEQ,IAAAA;AAAF,MAAmCP,SAAS,EAAlD;AACA,QAAMQ,eAAe,GAAGN,UAAU,EAAlC;AACA,QAAMO,YAAY,GAAGR,OAAO,EAA5B;AAEAJ,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMa,cAAc,GAAG,YAAY;AACjC,YAAMC,GAAG,GAAG,MAAMR,YAAY,CAACM,YAAD,EAAeD,eAAf,EAAgCD,OAAhC,CAA9B;AACAD,MAAAA,YAAY,CAAC,IAAIP,SAAJ,CAAcY,GAAd,CAAD,CAAZ;AACD,KAHD;;AAKA,QAAIJ,OAAO,IAAIE,YAAX,IAA2BA,YAA/B,EAA6C;AAC3CC,MAAAA,cAAc;AACf;;AACD,UAAME,eAAe,GAAGC,WAAW,CAACH,cAAD,EAAiB,KAAjB,CAAnC;AACA,WAAO,MAAMI,aAAa,CAACF,eAAD,CAA1B;AACD,GAXQ,EAWN,CAACL,OAAD,EAAUE,YAAV,EAAwBD,eAAxB,CAXM,CAAT;AAaA,SAAOH,SAAP;AACD,CApBM,C,CAsBP;;GAtBaD,mB;UAE8BJ,S,EACjBE,U,EACHD,O;;;AAmBvB,OAAO,MAAMc,eAAe,GAAG,CAACC,aAAD,EAA0BC,cAA1B,EAAkDC,UAAlD,KAAuE;AAAA;;AACpG,QAAM;AAAEX,IAAAA;AAAF,MAAmCP,SAAS,EAAlD;AACA,QAAM,CAACK,SAAD,EAAYC,YAAZ,IAA4BR,QAAQ,CAAC,IAAD,CAA1C;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMsB,KAAK,GAAG,YAAY;AACxB,UAAI;AACF,cAAMR,GAAG,GAAG,MAAMK,aAAa,CAACI,OAAd,CAAsBf,SAAtB,CAAgCE,OAAhC,EAAyCU,cAAzC,EAAyDI,IAAzD,EAAlB;AACAf,QAAAA,YAAY,CAAC,IAAIP,SAAJ,CAAcY,GAAd,CAAD,CAAZ;AACD,OAHD,CAGE,OAAOW,CAAP,EAAU;AACVhB,QAAAA,YAAY,CAAC,IAAD,CAAZ;AACD;AACF,KAPD;;AAQAa,IAAAA,KAAK;AACN,GAVQ,EAUN,CAACZ,OAAD,EAAUU,cAAV,EAA0BD,aAA1B,EAAyCE,UAAzC,CAVM,CAAT;AAYA,SAAOb,SAAP;AACD,CAjBM;;IAAMU,e;UAC8Bf,S","sourcesContent":["import { useEffect, useState } from 'react'\nimport BigNumber from 'bignumber.js'\nimport { useWallet } from '@binance-chain/bsc-use-wallet'\nimport { Contract } from 'web3-eth-contract'\nimport { useCake, useLottery } from './useContract'\nimport { getAllowance } from '../utils/erc20'\n\n// Retrieve lottery allowance\nexport const useLotteryAllowance = () => {\n  const [allowance, setAllowance] = useState(new BigNumber(0))\n  const { account }: { account: string } = useWallet()\n  const lotteryContract = useLottery()\n  const cakeContract = useCake()\n\n  useEffect(() => {\n    const fetchAllowance = async () => {\n      const res = await getAllowance(cakeContract, lotteryContract, account)\n      setAllowance(new BigNumber(res))\n    }\n\n    if (account && cakeContract && cakeContract) {\n      fetchAllowance()\n    }\n    const refreshInterval = setInterval(fetchAllowance, 10000)\n    return () => clearInterval(refreshInterval)\n  }, [account, cakeContract, lotteryContract])\n\n  return allowance\n}\n\n// Retrieve IFO allowance\nexport const useIfoAllowance = (tokenContract: Contract, spenderAddress: string, dependency?: any) => {\n  const { account }: { account: string } = useWallet()\n  const [allowance, setAllowance] = useState(null)\n\n  useEffect(() => {\n    const fetch = async () => {\n      try {\n        const res = await tokenContract.methods.allowance(account, spenderAddress).call()\n        setAllowance(new BigNumber(res))\n      } catch (e) {\n        setAllowance(null)\n      }\n    }\n    fetch()\n  }, [account, spenderAddress, tokenContract, dependency])\n\n  return allowance\n}\n"]},"metadata":{},"sourceType":"module"}