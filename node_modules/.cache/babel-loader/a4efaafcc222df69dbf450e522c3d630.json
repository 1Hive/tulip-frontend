{"ast":null,"code":"'use strict';\n\nclass FeedIndex {\n  constructor() {\n    this._index = {};\n  }\n\n  get() {\n    return Object.keys(this._index).map(f => this._index[f]);\n  }\n\n  updateIndex(oplog) {\n    this._index = {};\n    oplog.values.reduce((handled, item) => {\n      if (!handled.includes(item.hash)) {\n        handled.push(item.hash);\n\n        if (item.payload.op === 'ADD') {\n          this._index[item.hash] = item;\n        } else if (item.payload.op === 'DEL') {\n          delete this._index[item.payload.value];\n        }\n      }\n\n      return handled;\n    }, []);\n  }\n\n}\n\nmodule.exports = FeedIndex;","map":null,"metadata":{},"sourceType":"script"}