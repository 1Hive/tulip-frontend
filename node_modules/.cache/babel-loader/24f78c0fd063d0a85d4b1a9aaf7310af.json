{"ast":null,"code":"'use strict';\n\nconst CID = require('cids');\n\nconst errCode = require('err-code');\n\nconst resolve = async (cid, name, path, toResolve, resolve, depth, ipld, options) => {\n  const node = await ipld.get(cid, options);\n  let subObject = node;\n  let subPath = path;\n\n  while (toResolve.length) {\n    const prop = toResolve[0];\n\n    if (prop in subObject) {\n      // remove the bit of the path we have resolved\n      toResolve.shift();\n      subPath = `${subPath}/${prop}`;\n\n      if (CID.isCID(subObject[prop])) {\n        return {\n          entry: {\n            name,\n            path,\n            cid,\n            node,\n            depth\n          },\n          next: {\n            cid: subObject[prop],\n            name: prop,\n            path: subPath,\n            toResolve\n          }\n        };\n      }\n\n      subObject = subObject[prop];\n    } else {\n      // cannot resolve further\n      throw errCode(new Error(`No property named ${prop} found in cbor node ${cid.toBaseEncodedString()}`), 'ERR_NO_PROP');\n    }\n  }\n\n  return {\n    entry: {\n      name,\n      path,\n      cid,\n      node,\n      depth\n    }\n  };\n};\n\nmodule.exports = resolve;","map":null,"metadata":{},"sourceType":"script"}