{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar slicedToArray = require('./slicedToArray-a8a77f0e.js');\n\nrequire('./unsupportedIterableToArray-f175acfa.js');\n\nvar React = require('react');\n\nrequire('./_commonjsHelpers-1b94f6bc.js');\n\nvar index = require('./index-46d0e707.js');\n\nrequire('./defineProperty-3cad0327.js');\n\nrequire('./toConsumableArray-cc0d28a9.js');\n\nvar _styled = require('styled-components');\n\nrequire('./getPrototypeOf-55c9e80c.js');\n\nrequire('./color.js');\n\nrequire('./css.js');\n\nrequire('./miscellaneous.js');\n\nrequire('./environment.js');\n\nrequire('./font.js');\n\nrequire('./keycodes.js');\n\nvar constants = require('./constants.js');\n\nvar springs = require('./springs.js');\n\nrequire('./text-styles.js');\n\nrequire('./theme-dark.js');\n\nrequire('./theme-light.js');\n\nvar Theme = require('./Theme.js');\n\nrequire('./extends-023d783e.js');\n\nrequire('./objectWithoutProperties-c6d3675c.js');\n\nrequire('./index-4def0554.js');\n\nrequire('./FocusVisible.js');\n\nvar ButtonBase = require('./ButtonBase.js');\n\nrequire('./IconPropTypes-12cd7567.js');\n\nvar IconDown = require('./IconDown.js');\n\nvar IconEllipsis = require('./IconEllipsis.js');\n\nrequire('./objectWithoutPropertiesLoose-1af20ad0.js');\n\nvar ReactDOM = require('react-dom');\n\nvar web = require('./web-7cbdbd84.js');\n\nfunction _interopDefaultLegacy(e) {\n  return e && typeof e === 'object' && 'default' in e ? e : {\n    'default': e\n  };\n}\n\nvar React__default = /*#__PURE__*/_interopDefaultLegacy(React);\n\nvar _styled__default = /*#__PURE__*/_interopDefaultLegacy(_styled);\n\nvar ReactDOM__default = /*#__PURE__*/_interopDefaultLegacy(ReactDOM);\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar ClickOutComponent = function (_React$Component) {\n  _inherits(ClickOutComponent, _React$Component);\n\n  function ClickOutComponent() {\n    _classCallCheck(this, ClickOutComponent);\n\n    return _possibleConstructorReturn(this, (ClickOutComponent.__proto__ || Object.getPrototypeOf(ClickOutComponent)).call(this));\n  }\n\n  _createClass(ClickOutComponent, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var self = this;\n      var elTouchIsClick = true;\n      var documentTouchIsClick = true;\n      var el = ReactDOM__default['default'].findDOMNode(this);\n\n      self.__documentTouchStarted = function (e) {\n        el.removeEventListener('click', self.__elementClicked);\n        document.removeEventListener('click', self.__documentClicked);\n      };\n\n      self.__documentTouchMoved = function (e) {\n        documentTouchIsClick = false;\n      };\n\n      self.__documentTouchEnded = function (e) {\n        if (documentTouchIsClick) self.__documentClicked(e);\n        documentTouchIsClick = true;\n      };\n\n      self.__documentClicked = function (e) {\n        if ((e.__clickedElements || []).indexOf(el) !== -1) return;\n        var clickOutHandler = self.onClickOut || self.props.onClickOut;\n\n        if (!clickOutHandler) {\n          return console.warn('onClickOut is not defined.');\n        }\n\n        clickOutHandler.call(self, e);\n      };\n\n      self.__elementTouchMoved = function (e) {\n        elTouchIsClick = false;\n      };\n\n      self.__elementTouchEnded = function (e) {\n        if (elTouchIsClick) self.__elementClicked(e);\n        elTouchIsClick = true;\n      };\n\n      self.__elementClicked = function (e) {\n        e.__clickedElements = e.__clickedElements || [];\n\n        e.__clickedElements.push(el);\n      };\n\n      setTimeout(function () {\n        if (self.__unmounted) return;\n        self.toggleListeners('addEventListener');\n      }, 0);\n    }\n  }, {\n    key: 'toggleListeners',\n    value: function toggleListeners(listenerMethod) {\n      var el = ReactDOM__default['default'].findDOMNode(this);\n      el[listenerMethod]('touchmove', this.__elementTouchMoved);\n      el[listenerMethod]('touchend', this.__elementTouchEnded);\n      el[listenerMethod]('click', this.__elementClicked);\n      document[listenerMethod]('touchstart', this.__documentTouchStarted);\n      document[listenerMethod]('touchmove', this.__documentTouchMoved);\n      document[listenerMethod]('touchend', this.__documentTouchEnded);\n      document[listenerMethod]('click', this.__documentClicked);\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.toggleListeners('removeEventListener');\n      this.__unmounted = true;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return Array.isArray(this.props.children) ? React__default['default'].createElement('div', null, this.props.children) : React__default['default'].Children.only(this.props.children);\n    }\n  }]);\n\n  return ClickOutComponent;\n}(React__default['default'].Component);\n\nvar reactOnclickout = ClickOutComponent;\nvar BASE_WIDTH = 46;\nvar BASE_HEIGHT = 32;\n\nvar _StyledIconEllipsis = _styled__default['default'](IconEllipsis.default).withConfig({\n  displayName: \"ContextMenu___StyledIconEllipsis\",\n  componentId: \"ris724-0\"\n})([\"\"]);\n\nvar _StyledIconDown = _styled__default['default'](IconDown.default).withConfig({\n  displayName: \"ContextMenu___StyledIconDown\",\n  componentId: \"ris724-1\"\n})([\"color:\", \";\"], function (p) {\n  return p._css7;\n});\n\nvar _StyledAnimatedDiv = _styled__default['default'](web.extendedAnimated.div).withConfig({\n  displayName: \"ContextMenu___StyledAnimatedDiv\",\n  componentId: \"ris724-2\"\n})([\"z-index:\", \";overflow:hidden;position:absolute;top:\", \"px;right:0;background:\", \";border:1px solid \", \";border-radius:3px 0 3px 3px;\"], function (p) {\n  return p._css8;\n}, function (p) {\n  return p._css9;\n}, function (p) {\n  return p._css10;\n}, function (p) {\n  return p._css11;\n});\n\nvar _StyledDiv = _styled__default['default'](\"div\").withConfig({\n  displayName: \"ContextMenu___StyledDiv\",\n  componentId: \"ris724-3\"\n})([\"z-index:\", \";position:absolute;bottom:0;right:1px;height:1px;width:\", \"px;background:\", \";\"], function (p) {\n  return p._css12;\n}, function (p) {\n  return p._css13;\n}, function (p) {\n  return p._css14;\n});\n\nfunction ContextMenu(_ref) {\n  var children = _ref.children,\n      zIndex = _ref.zIndex,\n      disabled = _ref.disabled;\n  var theme = Theme.useTheme();\n\n  var _useState = React.useState(false),\n      _useState2 = slicedToArray.slicedToArray(_useState, 2),\n      opened = _useState2[0],\n      setOpened = _useState2[1];\n\n  var handleClose = React.useCallback(function () {\n    setOpened(false);\n  }, []);\n  var handleBaseButtonClick = React.useCallback(function () {\n    setOpened(function (opened) {\n      return !opened;\n    });\n  }, []); // Increase the z-index on an opened menu, to make sure it's above any other\n  // context menus below it using the same z-index (e.g. when used in a list)\n\n  var appliedZIndex = opened ? zIndex + 1 : zIndex;\n  return /*#__PURE__*/React__default['default'].createElement(reactOnclickout, {\n    onClickOut: handleClose\n  }, /*#__PURE__*/React__default['default'].createElement(web.Spring, {\n    config: springs.springs.smooth,\n    to: {\n      openProgress: Number(opened)\n    },\n    native: true\n  }, function (_ref2) {\n    var openProgress = _ref2.openProgress;\n    return /*#__PURE__*/React__default['default'].createElement(_StyledMain, {\n      style: {\n        boxShadow: openProgress.interpolate(function (t) {\n          return \"0 4px 4px rgba(0, 0, 0, \".concat(t * 0.03, \")\");\n        })\n      },\n      _css: appliedZIndex\n    }, /*#__PURE__*/React__default['default'].createElement(_StyledButton, {\n      onClick: handleBaseButtonClick,\n      opened: opened,\n      disabled: disabled,\n      focusRingRadius: constants.RADIUS,\n      _css2: disabled ? theme.disabledContent : opened ? theme.accent : theme.surfaceContent,\n      _css3: disabled ? theme.disabled : theme.surface,\n      _css4: disabled ? '0' : \"1px solid \".concat(theme.border),\n      _css5: opened ? theme.surface : theme.border,\n      _css6: disabled ? '' : \"&:active {\\n                  background: \".concat(theme.surfacePressed, \";\\n                  border-bottom-color: \").concat(opened ? theme.surfacePressed : theme.border, \";\\n                }\")\n    }, /*#__PURE__*/React__default['default'].createElement(_StyledIconEllipsis, null), /*#__PURE__*/React__default['default'].createElement(web.extendedAnimated.div, {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        transformOrigin: '50% 50%',\n        transform: openProgress.interpolate(function (v) {\n          return \"rotate(\".concat(v * 180, \"deg)\");\n        })\n      }\n    }, /*#__PURE__*/React__default['default'].createElement(_StyledIconDown, {\n      size: \"tiny\",\n      _css7: disabled ? theme.disabledIcon : theme.surfaceIcon\n    }))), opened && /*#__PURE__*/React__default['default'].createElement(React__default['default'].Fragment, null, /*#__PURE__*/React__default['default'].createElement(_StyledAnimatedDiv, {\n      onClick: handleClose,\n      style: {\n        opacity: openProgress,\n        boxShadow: openProgress.interpolate(function (t) {\n          return \"0 4px 4px rgba(0, 0, 0, \".concat(t * 0.03, \")\");\n        })\n      },\n      _css8: appliedZIndex + 1,\n      _css9: BASE_HEIGHT - 1,\n      _css10: theme.surface,\n      _css11: theme.border\n    }, children), /*#__PURE__*/React__default['default'].createElement(_StyledDiv, {\n      _css12: appliedZIndex + 1,\n      _css13: BASE_WIDTH - 2,\n      _css14: theme.surface\n    })));\n  }));\n}\n\nContextMenu.propTypes = {\n  children: index.propTypes.node,\n  zIndex: index.propTypes.number,\n  disabled: index.propTypes.bool\n};\nContextMenu.defaultProps = {\n  zIndex: 0,\n  disabled: false\n};\n\nvar Main = _styled__default['default'](web.extendedAnimated.div).withConfig({\n  displayName: \"ContextMenu__Main\",\n  componentId: \"ris724-4\"\n})([\"position:relative;width:\", \"px;height:\", \"px;\"], BASE_WIDTH, BASE_HEIGHT);\n\nvar _StyledMain = _styled__default['default'](Main).withConfig({\n  displayName: \"ContextMenu___StyledMain\",\n  componentId: \"ris724-5\"\n})([\"z-index:\", \";\"], function (p) {\n  return p._css;\n});\n\nvar Button = _styled__default['default'](ButtonBase.default).withConfig({\n  displayName: \"ContextMenu__Button\",\n  componentId: \"ris724-6\"\n})([\"display:flex;justify-content:center;align-items:center;width:100%;height:\", \"px;border-radius:\", \";box-shadow:\", \";\"], BASE_HEIGHT, function (_ref3) {\n  var opened = _ref3.opened;\n  return opened ? \"\".concat(constants.RADIUS, \"px \").concat(constants.RADIUS, \"px 0 0\") : \"\".concat(constants.RADIUS, \"px\");\n}, function (_ref4) {\n  var disabled = _ref4.disabled;\n  return disabled ? 'none' : \"0px 1px 3px rgba(0, 0, 0, 0.1)\";\n});\n\nvar _StyledButton = _styled__default['default'](Button).withConfig({\n  displayName: \"ContextMenu___StyledButton\",\n  componentId: \"ris724-7\"\n})([\"color:\", \";background:\", \";border:\", \";border-bottom-color:\", \";\", \"\"], function (p) {\n  return p._css2;\n}, function (p) {\n  return p._css3;\n}, function (p) {\n  return p._css4;\n}, function (p) {\n  return p._css5;\n}, function (p) {\n  return p._css6;\n});\n\nexports.default = ContextMenu;","map":{"version":3,"sources":["../node_modules/react-onclickout/index.js","../src/components/ContextMenu/ContextMenu.js"],"names":["ReactDOM","React","BASE_WIDTH","BASE_HEIGHT","children","zIndex","disabled","theme","useTheme","opened","setOpened","useState","handleClose","useCallback","handleBaseButtonClick","appliedZIndex","Spring","springs","openProgress","Number","boxShadow","t","RADIUS","animated","display","alignItems","transformOrigin","transform","v","surfaceIcon","opacity","border","surface","ContextMenu","PropTypes","bool","Main","styled","Button","ButtonBase"],"mappings":"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","sourcesContent":["'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar React = require('react');\nvar ReactDOM = require('react-dom');\n\nvar ClickOutComponent = function (_React$Component) {\n  _inherits(ClickOutComponent, _React$Component);\n\n  function ClickOutComponent() {\n    _classCallCheck(this, ClickOutComponent);\n\n    return _possibleConstructorReturn(this, (ClickOutComponent.__proto__ || Object.getPrototypeOf(ClickOutComponent)).call(this));\n  }\n\n  _createClass(ClickOutComponent, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var self = this;\n      var elTouchIsClick = true;\n      var documentTouchIsClick = true;\n      var el = ReactDOM.findDOMNode(this);\n\n      self.__documentTouchStarted = function (e) {\n        el.removeEventListener('click', self.__elementClicked);\n        document.removeEventListener('click', self.__documentClicked);\n      };\n\n      self.__documentTouchMoved = function (e) {\n        documentTouchIsClick = false;\n      };\n\n      self.__documentTouchEnded = function (e) {\n        if (documentTouchIsClick) self.__documentClicked(e);\n        documentTouchIsClick = true;\n      };\n\n      self.__documentClicked = function (e) {\n        if ((e.__clickedElements || []).indexOf(el) !== -1) return;\n\n        var clickOutHandler = self.onClickOut || self.props.onClickOut;\n        if (!clickOutHandler) {\n          return console.warn('onClickOut is not defined.');\n        }\n\n        clickOutHandler.call(self, e);\n      };\n\n      self.__elementTouchMoved = function (e) {\n        elTouchIsClick = false;\n      };\n\n      self.__elementTouchEnded = function (e) {\n        if (elTouchIsClick) self.__elementClicked(e);\n        elTouchIsClick = true;\n      };\n\n      self.__elementClicked = function (e) {\n        e.__clickedElements = e.__clickedElements || [];\n        e.__clickedElements.push(el);\n      };\n\n      setTimeout(function () {\n        if (self.__unmounted) return;\n        self.toggleListeners('addEventListener');\n      }, 0);\n    }\n  }, {\n    key: 'toggleListeners',\n    value: function toggleListeners(listenerMethod) {\n      var el = ReactDOM.findDOMNode(this);\n\n      el[listenerMethod]('touchmove', this.__elementTouchMoved);\n      el[listenerMethod]('touchend', this.__elementTouchEnded);\n      el[listenerMethod]('click', this.__elementClicked);\n\n      document[listenerMethod]('touchstart', this.__documentTouchStarted);\n      document[listenerMethod]('touchmove', this.__documentTouchMoved);\n      document[listenerMethod]('touchend', this.__documentTouchEnded);\n      document[listenerMethod]('click', this.__documentClicked);\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.toggleListeners('removeEventListener');\n      this.__unmounted = true;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return Array.isArray(this.props.children) ? React.createElement(\n        'div',\n        null,\n        this.props.children\n      ) : React.Children.only(this.props.children);\n    }\n  }]);\n\n  return ClickOutComponent;\n}(React.Component);\n\nmodule.exports = ClickOutComponent;\n","import React, { useState, useCallback } from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport { Spring, animated } from 'react-spring'\nimport ClickOutHandler from 'react-onclickout'\nimport { useTheme } from '../../theme'\nimport { springs, RADIUS } from '../../style'\nimport { IconEllipsis, IconDown } from '../../icons/components'\nimport ButtonBase from '../ButtonBase/ButtonBase'\n\nconst BASE_WIDTH = 46\nconst BASE_HEIGHT = 32\n\nfunction ContextMenu({ children, zIndex, disabled }) {\n  const theme = useTheme()\n  const [opened, setOpened] = useState(false)\n\n  const handleClose = useCallback(() => {\n    setOpened(false)\n  }, [])\n\n  const handleBaseButtonClick = useCallback(() => {\n    setOpened(opened => !opened)\n  }, [])\n\n  // Increase the z-index on an opened menu, to make sure it's above any other\n  // context menus below it using the same z-index (e.g. when used in a list)\n  const appliedZIndex = opened ? zIndex + 1 : zIndex\n\n  return (\n    <ClickOutHandler onClickOut={handleClose}>\n      <Spring\n        config={springs.smooth}\n        to={{ openProgress: Number(opened) }}\n        native\n      >\n        {({ openProgress }) => (\n          <Main\n            css={`\n              z-index: ${appliedZIndex};\n            `}\n            style={{\n              boxShadow: openProgress.interpolate(\n                t => `0 4px 4px rgba(0, 0, 0, ${t * 0.03})`\n              ),\n            }}\n          >\n            <Button\n              onClick={handleBaseButtonClick}\n              opened={opened}\n              disabled={disabled}\n              focusRingRadius={RADIUS}\n              css={`\n                color: ${disabled\n                  ? theme.disabledContent\n                  : opened\n                  ? theme.accent\n                  : theme.surfaceContent};\n                background: ${disabled ? theme.disabled : theme.surface};\n                border: ${disabled ? '0' : `1px solid ${theme.border}`};\n                border-bottom-color: ${opened ? theme.surface : theme.border};\n                ${disabled\n                  ? ''\n                  : `&:active {\n                  background: ${theme.surfacePressed};\n                  border-bottom-color: ${\n                    opened ? theme.surfacePressed : theme.border\n                  };\n                }`}\n              `}\n            >\n              <IconEllipsis css={``} />\n              <animated.div\n                style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  transformOrigin: '50% 50%',\n                  transform: openProgress.interpolate(\n                    v => `rotate(${v * 180}deg)`\n                  ),\n                }}\n              >\n                <IconDown\n                  size=\"tiny\"\n                  css={`\n                    color: ${disabled ? theme.disabledIcon : theme.surfaceIcon};\n                  `}\n                />\n              </animated.div>\n            </Button>\n            {opened && (\n              <React.Fragment>\n                <animated.div\n                  onClick={handleClose}\n                  style={{\n                    opacity: openProgress,\n                    boxShadow: openProgress.interpolate(\n                      t => `0 4px 4px rgba(0, 0, 0, ${t * 0.03})`\n                    ),\n                  }}\n                  css={`\n                    z-index: ${appliedZIndex + 1};\n                    overflow: hidden;\n                    position: absolute;\n                    top: ${BASE_HEIGHT - 1}px;\n                    right: 0;\n                    background: ${theme.surface};\n                    border: 1px solid ${theme.border};\n                    border-radius: 3px 0 3px 3px;\n                  `}\n                >\n                  {children}\n                </animated.div>\n                <div\n                  css={`\n                    z-index: ${appliedZIndex + 1};\n                    position: absolute;\n                    bottom: 0;\n                    right: 1px;\n                    height: 1px;\n                    width: ${BASE_WIDTH - 2}px;\n                    background: ${theme.surface};\n                  `}\n                />\n              </React.Fragment>\n            )}\n          </Main>\n        )}\n      </Spring>\n    </ClickOutHandler>\n  )\n}\n\nContextMenu.propTypes = {\n  children: PropTypes.node,\n  zIndex: PropTypes.number,\n  disabled: PropTypes.bool,\n}\nContextMenu.defaultProps = {\n  zIndex: 0,\n  disabled: false,\n}\n\nconst Main = styled(animated.div)`\n  position: relative;\n  width: ${BASE_WIDTH}px;\n  height: ${BASE_HEIGHT}px;\n`\n\nconst Button = styled(ButtonBase)`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: ${BASE_HEIGHT}px;\n  border-radius: ${({ opened }) =>\n    opened ? `${RADIUS}px ${RADIUS}px 0 0` : `${RADIUS}px`};\n\n  box-shadow: ${({ disabled }) =>\n    disabled ? 'none' : `0px 1px 3px rgba(0, 0, 0, 0.1)`};\n`\n\nexport default ContextMenu\n"]},"metadata":{},"sourceType":"script"}