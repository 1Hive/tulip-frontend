{"ast":null,"code":"'use strict';\n\nmodule.exports = function (promise, onFinally) {\n  onFinally = onFinally || function () {};\n\n  return promise.then(function (val) {\n    return new Promise(function (resolve) {\n      resolve(onFinally());\n    }).then(function () {\n      return val;\n    });\n  }, function (err) {\n    return new Promise(function (resolve) {\n      resolve(onFinally());\n    }).then(function () {\n      throw err;\n    });\n  });\n};","map":null,"metadata":{},"sourceType":"script"}