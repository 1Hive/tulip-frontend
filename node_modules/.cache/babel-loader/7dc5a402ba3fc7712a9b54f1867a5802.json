{"ast":null,"code":"'use strict';\n\nconst exporter = require('ipfs-unixfs-exporter');\n\nconst {\n  normalizeCidPath,\n  withTimeoutOption\n} = require('../utils');\n\nmodule.exports = function ({\n  ipld,\n  preload\n}) {\n  return withTimeoutOption(async function* cat(ipfsPath, options) {\n    options = options || {};\n    ipfsPath = normalizeCidPath(ipfsPath);\n\n    if (options.preload !== false) {\n      const pathComponents = ipfsPath.split('/');\n      preload(pathComponents[0]);\n    }\n\n    const file = await exporter(ipfsPath, ipld, options); // File may not have unixfs prop if small & imported with rawLeaves true\n\n    if (file.unixfs && file.unixfs.type.includes('dir')) {\n      throw new Error('this dag node is a directory');\n    }\n\n    if (!file.content) {\n      throw new Error('this dag node has no content');\n    }\n\n    yield* file.content(options);\n  });\n};","map":null,"metadata":{},"sourceType":"script"}