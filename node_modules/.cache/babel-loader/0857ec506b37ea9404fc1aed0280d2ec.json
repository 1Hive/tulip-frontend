{"ast":null,"code":"'use strict';\n\nconst batch = require('it-batch');\n\nasync function* balanced(source, reduce, options) {\n  yield await reduceToParents(source, reduce, options);\n}\n\nasync function reduceToParents(source, reduce, options) {\n  const roots = [];\n\n  for await (const chunked of batch(source, options.maxChildrenPerNode)) {\n    roots.push(await reduce(chunked));\n  }\n\n  if (roots.length > 1) {\n    return reduceToParents(roots, reduce, options);\n  }\n\n  return roots[0];\n}\n\nmodule.exports = balanced;","map":null,"metadata":{},"sourceType":"script"}