{"ast":null,"code":"'use strict';\n\nconst PeerId = require('peer-id');\n\nconst {\n  ensureMultiaddr\n} = require('./utils');\n\nconst MultiaddrSet = require('./multiaddr-set'); // Peer represents a peer on the IPFS network\n\n\nclass PeerInfo {\n  constructor(peerId) {\n    if (!peerId) {\n      throw new Error('Missing peerId. Use Peer.create() to create one');\n    }\n\n    this.id = peerId;\n    this.multiaddrs = new MultiaddrSet();\n    /**\n     * Stores protocols this peers supports\n     *\n     * @type {Set<string>}\n     */\n\n    this.protocols = new Set();\n    this._connectedMultiaddr = undefined;\n  } // only stores the current multiaddr being used\n\n\n  connect(ma) {\n    ma = ensureMultiaddr(ma);\n\n    if (!this.multiaddrs.has(ma) && ma.toString() !== `/ipfs/${this.id.toB58String()}`) {\n      throw new Error('can\\'t be connected to missing multiaddr from set');\n    }\n\n    this._connectedMultiaddr = ma;\n  }\n\n  disconnect() {\n    this._connectedMultiaddr = undefined;\n  }\n\n  isConnected() {\n    return this._connectedMultiaddr;\n  }\n\n}\n\nPeerInfo.create = async peerId => {\n  if (peerId == null) {\n    peerId = await PeerId.create();\n  } else if (!PeerId.isPeerId(peerId)) {\n    peerId = await PeerId.createFromJSON(peerId);\n  }\n\n  return new PeerInfo(peerId);\n};\n\nPeerInfo.isPeerInfo = peerInfo => {\n  return Boolean(typeof peerInfo === 'object' && peerInfo.id && peerInfo.multiaddrs);\n};\n\nmodule.exports = PeerInfo;","map":null,"metadata":{},"sourceType":"script"}