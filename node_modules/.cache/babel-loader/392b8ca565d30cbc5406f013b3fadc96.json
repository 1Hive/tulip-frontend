{"ast":null,"code":"'use strict';\n\nconst Counter = require('crdts/src/G-Counter');\n\nclass CounterIndex {\n  constructor(id) {\n    this._index = new Counter(id);\n  }\n\n  get() {\n    return this._index;\n  }\n\n  updateIndex(oplog) {\n    if (this._index) {\n      const createCounter = e => Counter.from(e.payload.value);\n\n      const mergeToIndex = e => this._index.merge(e);\n\n      oplog.values.filter(e => e && e.payload.op === 'COUNTER').map(createCounter).forEach(mergeToIndex);\n    }\n  }\n\n}\n\nmodule.exports = CounterIndex;","map":null,"metadata":{},"sourceType":"script"}