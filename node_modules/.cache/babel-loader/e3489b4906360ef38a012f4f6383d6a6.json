{"ast":null,"code":"import _slicedToArray from\"/Users/fabianmolina/Documents/1hive/tulip-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _styled6 from\"styled-components\";import _styled5 from\"styled-components\";import _styled4 from\"styled-components\";import _styled3 from\"styled-components\";import _styled2 from\"styled-components\";import _styled from\"styled-components\";/* eslint linebreak-style: [\"error\", \"unix\"] */import React,{useCallback,useEffect,useRef,useState}from'react';import{ButtonIcon,GU,Header,IconClose,Layout,Tabs,springs,useTheme,useViewport}from'@1hive/1hive-ui';import{Transition,animated}from'react-spring/renderprops';import{useEsc}from'../../hooks/useKeyboardArrows';import Network from'./Network/Network';var SECTIONS=new Map([['network','Network'],['notifications','Notifications']]);var PATHS=Array.from(SECTIONS.keys());var VALUES=Array.from(SECTIONS.values());var NETWORK_INDEX=0;var AnimatedDiv=animated.div;var _StyledAnimatedDiv=_styled(AnimatedDiv).withConfig({displayName:\"GlobalPreferences___StyledAnimatedDiv\",componentId:\"iaf3zk-0\"})([\"position:fixed;top:0;bottom:0;left:0;right:0;overflow:auto;min-width:\",\"px;padding-bottom:\",\"px;border-top:2px solid \",\";background:\",\";\"],function(p){return p._css6;},function(p){return p._css7;},function(p){return p._css8;},function(p){return p._css9;});var _StyledDiv=_styled(\"div\").withConfig({displayName:\"GlobalPreferences___StyledDiv\",componentId:\"iaf3zk-1\"})([\"outline:0\"]);var _StyledLayout=_styled(Layout).withConfig({displayName:\"GlobalPreferences___StyledLayout\",componentId:\"iaf3zk-2\"})([\"z-index:2\"]);var _StyledHeader=_styled(Header).withConfig({displayName:\"GlobalPreferences___StyledHeader\",componentId:\"iaf3zk-3\"})([\"padding-top:\",\"px;\"],function(p){return p._css;});function GlobalPreferences(_ref){var compact=_ref.compact,onClose=_ref.onClose,onNavigation=_ref.onNavigation,sectionIndex=_ref.sectionIndex;useEsc(onClose);var container=useRef();useEffect(function(){if(container.current){container.current.focus();}},[]);return/*#__PURE__*/React.createElement(_StyledDiv,{ref:container,tabIndex:\"0\"},/*#__PURE__*/React.createElement(_StyledLayout,null,/*#__PURE__*/React.createElement(Close,{compact:compact,onClick:onClose}),/*#__PURE__*/React.createElement(_StyledHeader,{primary:\"Global preferences\",_css:!compact?10*GU:0}),/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Tabs,{items:VALUES,onChange:onNavigation,selected:sectionIndex}),sectionIndex===NETWORK_INDEX&&/*#__PURE__*/React.createElement(Network,null))));}function useGlobalPreferences(_ref2){var _ref2$path=_ref2.path,path=_ref2$path===void 0?'':_ref2$path,onScreenChange=_ref2.onScreenChange;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),sectionIndex=_useState2[0],setSectionIndex=_useState2[1];var handleNavigation=useCallback(function(index){onScreenChange(PATHS[index]);},[onScreenChange]);useEffect(function(){if(!path){setSectionIndex(null);return;}var index=PATHS.findIndex(function(item){return path.startsWith(item);});setSectionIndex(index===-1?null:index);},[path,sectionIndex]);return{sectionIndex:sectionIndex,handleNavigation:handleNavigation};}var _StyledDiv2=_styled(\"div\").withConfig({displayName:\"GlobalPreferences___StyledDiv2\",componentId:\"iaf3zk-4\"})([\"position:absolute;right:0;padding-top:\",\"px;padding-right:\",\"px;\",\"\"],function(p){return p._css2;},function(p){return p._css3;},function(p){return p._css4;});var _StyledIconClose=_styled(IconClose).withConfig({displayName:\"GlobalPreferences___StyledIconClose\",componentId:\"iaf3zk-5\"})([\"color:\",\";\"],function(p){return p._css5;});function Close(_ref3){var compact=_ref3.compact,onClick=_ref3.onClick;var theme=useTheme();return/*#__PURE__*/React.createElement(_StyledDiv2,{_css2:2.5*GU,_css3:3*GU,_css4:compact&&\"\\n            padding-top: \".concat(2*GU,\"px;\\n            padding-right: \").concat(1.5*GU,\"px;\\n          \")},/*#__PURE__*/React.createElement(ButtonIcon,{onClick:onClick,label:\"Close\"},/*#__PURE__*/React.createElement(_StyledIconClose,{_css5:theme.surfaceIcon})));}function AnimatedGlobalPreferences(_ref4){var path=_ref4.path,onScreenChange=_ref4.onScreenChange,onClose=_ref4.onClose;var _useGlobalPreferences=useGlobalPreferences({path:path,onScreenChange:onScreenChange}),sectionIndex=_useGlobalPreferences.sectionIndex,handleNavigation=_useGlobalPreferences.handleNavigation;var _useViewport=useViewport(),below=_useViewport.below;var compact=below('medium');var theme=useTheme();return/*#__PURE__*/React.createElement(Transition,{native:true,items:sectionIndex!==null,from:{opacity:0,enterProgress:0,blocking:false},enter:{opacity:1,enterProgress:1,blocking:true},leave:{opacity:0,enterProgress:1,blocking:false},config:springs.smooth},function(show){return show&&/* eslint-disable react/prop-types */ // z-index 1 on mobile keeps the menu above this preferences modal\nfunction(_ref5){var opacity=_ref5.opacity,enterProgress=_ref5.enterProgress,blocking=_ref5.blocking;return/*#__PURE__*/React.createElement(_StyledAnimatedDiv,{style:{zIndex:1,pointerEvents:blocking?'auto':'none',opacity:opacity,transform:enterProgress.interpolate(function(v){return\"\\n                  translate3d(0, \".concat((1-v)*10,\"px, 0)\\n                  scale3d(\").concat(1-(1-v)*0.03,\", \").concat(1-(1-v)*0.03,\", 1)\\n                \");})},_css6:45*GU,_css7:compact?2:0*GU,_css8:theme.accent,_css9:theme.surface},/*#__PURE__*/React.createElement(GlobalPreferences,{onClose:onClose,compact:compact,sectionIndex:sectionIndex,onNavigation:handleNavigation}));};}/* eslint-enable react/prop-types */);}export default/*#__PURE__*/React.memo(AnimatedGlobalPreferences);","map":{"version":3,"sources":["/Users/fabianmolina/Documents/1hive/tulip-frontend/src/components/GlobalPreferences/GlobalPreferences.js"],"names":["React","useCallback","useEffect","useRef","useState","ButtonIcon","GU","Header","IconClose","Layout","Tabs","springs","useTheme","useViewport","Transition","animated","useEsc","Network","SECTIONS","Map","PATHS","Array","from","keys","VALUES","values","NETWORK_INDEX","AnimatedDiv","div","GlobalPreferences","compact","onClose","onNavigation","sectionIndex","container","current","focus","useGlobalPreferences","path","onScreenChange","setSectionIndex","handleNavigation","index","findIndex","item","startsWith","Close","onClick","theme","surfaceIcon","AnimatedGlobalPreferences","below","opacity","enterProgress","blocking","smooth","show","zIndex","pointerEvents","transform","interpolate","v","accent","surface","memo"],"mappings":"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","sourcesContent":["/* eslint linebreak-style: [\"error\", \"unix\"] */\nimport React, { useCallback, useEffect, useRef, useState } from 'react'\nimport {\n  ButtonIcon,\n  GU,\n  Header,\n  IconClose,\n  Layout,\n  Tabs,\n  springs,\n  useTheme,\n  useViewport,\n} from '@1hive/1hive-ui'\nimport { Transition, animated } from 'react-spring/renderprops'\nimport { useEsc } from '../../hooks/useKeyboardArrows'\nimport Network from './Network/Network'\n\nconst SECTIONS = new Map([\n  ['network', 'Network'],\n  ['notifications', 'Notifications'],\n])\nconst PATHS = Array.from(SECTIONS.keys())\nconst VALUES = Array.from(SECTIONS.values())\n\nconst NETWORK_INDEX = 0\n\nconst AnimatedDiv = animated.div\n\nfunction GlobalPreferences({ compact, onClose, onNavigation, sectionIndex }) {\n  useEsc(onClose)\n\n  const container = useRef()\n  useEffect(() => {\n    if (container.current) {\n      container.current.focus()\n    }\n  }, [])\n\n  return (\n    <div ref={container} tabIndex=\"0\" css=\"outline: 0\">\n      <Layout css=\"z-index: 2\">\n        <Close compact={compact} onClick={onClose} />\n        <Header\n          primary=\"Global preferences\"\n          css={`\n            padding-top: ${!compact ? 10 * GU : 0}px;\n          `}\n        />\n        <React.Fragment>\n          <Tabs\n            items={VALUES}\n            onChange={onNavigation}\n            selected={sectionIndex}\n          />\n\n          {sectionIndex === NETWORK_INDEX && <Network />}\n        </React.Fragment>\n      </Layout>\n    </div>\n  )\n}\n\nfunction useGlobalPreferences({ path = '', onScreenChange }) {\n  const [sectionIndex, setSectionIndex] = useState(null)\n  const handleNavigation = useCallback(\n    index => {\n      onScreenChange(PATHS[index])\n    },\n    [onScreenChange]\n  )\n\n  useEffect(() => {\n    if (!path) {\n      setSectionIndex(null)\n      return\n    }\n    const index = PATHS.findIndex(item => path.startsWith(item))\n\n    setSectionIndex(index === -1 ? null : index)\n  }, [path, sectionIndex])\n\n  return { sectionIndex, handleNavigation }\n}\n\nfunction Close({ compact, onClick }) {\n  const theme = useTheme()\n  return (\n    <div\n      css={`\n        position: absolute;\n        right: 0;\n        padding-top: ${2.5 * GU}px;\n        padding-right: ${3 * GU}px;\n\n        ${compact &&\n          `\n            padding-top: ${2 * GU}px;\n            padding-right: ${1.5 * GU}px;\n          `}\n      `}\n    >\n      <ButtonIcon onClick={onClick} label=\"Close\">\n        <IconClose\n          css={`\n            color: ${theme.surfaceIcon};\n          `}\n        />\n      </ButtonIcon>\n    </div>\n  )\n}\n\nfunction AnimatedGlobalPreferences({ path, onScreenChange, onClose }) {\n  const { sectionIndex, handleNavigation } = useGlobalPreferences({\n    path,\n    onScreenChange,\n  })\n\n  const { below } = useViewport()\n  const compact = below('medium')\n  const theme = useTheme()\n\n  return (\n    <Transition\n      native\n      items={sectionIndex !== null}\n      from={{ opacity: 0, enterProgress: 0, blocking: false }}\n      enter={{ opacity: 1, enterProgress: 1, blocking: true }}\n      leave={{ opacity: 0, enterProgress: 1, blocking: false }}\n      config={springs.smooth}\n    >\n      {show =>\n        show &&\n        /* eslint-disable react/prop-types */\n        // z-index 1 on mobile keeps the menu above this preferences modal\n        (({ opacity, enterProgress, blocking }) => (\n          <AnimatedDiv\n            style={{\n              zIndex: 1,\n              pointerEvents: blocking ? 'auto' : 'none',\n              opacity,\n              transform: enterProgress.interpolate(\n                v => `\n                  translate3d(0, ${(1 - v) * 10}px, 0)\n                  scale3d(${1 - (1 - v) * 0.03}, ${1 - (1 - v) * 0.03}, 1)\n                `\n              ),\n            }}\n            css={`\n              position: fixed;\n              top: 0;\n              bottom: 0;\n              left: 0;\n              right: 0;\n              overflow: auto;\n              min-width: ${45 * GU}px;\n              padding-bottom: ${compact ? 2 : 0 * GU}px;\n              border-top: 2px solid ${theme.accent};\n              background: ${theme.surface};\n            `}\n          >\n            <GlobalPreferences\n              onClose={onClose}\n              compact={compact}\n              sectionIndex={sectionIndex}\n              onNavigation={handleNavigation}\n            />\n          </AnimatedDiv>\n        ))\n      /* eslint-enable react/prop-types */\n      }\n    </Transition>\n  )\n}\n\nexport default React.memo(AnimatedGlobalPreferences)\n"]},"metadata":{},"sourceType":"module"}