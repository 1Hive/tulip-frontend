{"ast":null,"code":"'use strict';\n\nconst crypto = require('./crypto');\n\nconst debug = require('debug');\n\nconst log = debug('libp2p:secio');\nlog.error = debug('libp2p:secio:error'); // step 2. Exchange\n// -- exchange (signed) ephemeral keys. verify signatures.\n\nmodule.exports = async function exchange(state, wrapped) {\n  log('2. exchange - start');\n  log('2. exchange - writing exchange');\n  const ex = await crypto.createExchange(state);\n  await wrapped.writeLP(ex);\n  const msg = await wrapped.readLP();\n  log('2. exchange - reading exchange');\n  await crypto.verify(state, msg.slice());\n  await crypto.generateKeys(state);\n  log('2. exchange - finish');\n};","map":null,"metadata":{},"sourceType":"script"}