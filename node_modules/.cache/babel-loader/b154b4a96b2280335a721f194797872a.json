{"ast":null,"code":"import './slicedToArray-ad07b557.js';\nimport './unsupportedIterableToArray-aef68344.js';\nimport React from 'react';\nimport './_commonjsHelpers-97e6d7b1.js';\nimport { P as PropTypes } from './index-097535f1.js';\nimport { _ as _defineProperty } from './defineProperty-a0480c32.js';\nimport './toConsumableArray-07f01111.js';\nimport 'styled-components';\nimport { _ as _inherits, a as _createClass, b as _classCallCheck, e as _assertThisInitialized, c as _getPrototypeOf, d as _possibleConstructorReturn } from './getPrototypeOf-97db713a.js';\nimport './color.js';\nimport './components.js';\nimport './contains-component.js';\nimport './css.js';\nimport { d as dayjs } from './dayjs.min-e57fb69a.js';\nimport { difference } from './date.js';\nimport './miscellaneous.js';\nimport './environment.js';\nimport './font.js';\nimport './math-e6d0e93a.js';\nimport './characters.js';\nimport './format.js';\nimport './keycodes.js';\nimport './url.js';\nimport './web3.js';\nimport './constants.js';\nimport './breakpoints.js';\nimport './springs.js';\nimport './text-styles.js';\nimport './extends-db4f0c26.js';\nimport './objectWithoutProperties-234758e1.js';\nimport './isObject-c2f08dfa.js';\nexport { V as Viewport, u as useViewport } from './Viewport-2b81deab.js';\nimport { g as getDisplayName } from './getDisplayName-d5fc7707.js';\nexport { P as PublicUrl } from './index-a2f7b3fc.js';\nexport { R as Root, u as useRoot } from './index-77db863e.js';\nexport { observe } from './observe.js';\nexport { R as Redraw } from './index-3be838f0.js';\n\nfunction _createSuper(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (_isNativeReflectConstruct()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n} // adjusts the re-render timer to be one second, minute, or hour based on the\n// fromDate prop.\n// For a discussion on pitfalls, see\n// https://gist.github.com/staltz/08bf613199092eeb41ac8137d51eb5e6\n\n\nvar EVERY_SECOND = 1000;\nvar EVERY_MINUTE = EVERY_SECOND * 60;\nvar EVERY_HOUR = EVERY_MINUTE * 60;\n\nvar getRedrawTime = function getRedrawTime(fromDate) {\n  var _difference = difference(new Date(), fromDate),\n      days = _difference.days,\n      hours = _difference.hours,\n      minutes = _difference.minutes;\n\n  return hours || days ? EVERY_HOUR : minutes > 1 ? EVERY_MINUTE : EVERY_SECOND;\n};\n\nvar RedrawFromDate = /*#__PURE__*/function (_React$Component) {\n  _inherits(RedrawFromDate, _React$Component);\n\n  var _super = _createSuper(RedrawFromDate);\n\n  function RedrawFromDate() {\n    var _this;\n\n    _classCallCheck(this, RedrawFromDate);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      redrawTime: EVERY_HOUR,\n      lastDraw: -1\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"clearInterval\", function () {\n      _this.interval && clearInterval(_this.interval);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"restartDrawInterval\", function (redrawTime) {\n      _this.clearInterval();\n\n      _this.interval = setInterval(function () {\n        _this.setState({\n          lastDraw: Date.now()\n        });\n\n        var newRedrawTime = getRedrawTime(_this.props.fromDate);\n\n        if (newRedrawTime !== redrawTime) {\n          _this.restartDrawInterval(newRedrawTime);\n        }\n      }, redrawTime);\n    });\n\n    return _this;\n  }\n\n  _createClass(RedrawFromDate, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var fromDate = this.props.fromDate;\n\n      if (fromDate) {\n        this.restartDrawInterval(getRedrawTime(fromDate));\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(_ref) {\n      var fromDate = _ref.fromDate;\n\n      if (!fromDate && this.props.fromDate) {\n        this.clearInterval();\n      } else if (!dayjs(fromDate).isSame(this.props.fromDate)) {\n        this.restartDrawInterval(getRedrawTime(this.props.fromDate));\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.clearInterval();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return this.props.children();\n    }\n  }]);\n\n  return RedrawFromDate;\n}(React.Component);\n\n_defineProperty(RedrawFromDate, \"propTypes\", {\n  children: PropTypes.func.isRequired,\n  fromDate: PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.instanceOf(Date)]).isRequired\n});\n\nvar hocWrap = function hocWrap(Component) {\n  var HOC = function HOC(props) {\n    return /*#__PURE__*/React.createElement(RedrawFromDate, {\n      fromDate: props.fromDate\n    }, function () {\n      return /*#__PURE__*/React.createElement(Component, props);\n    });\n  };\n\n  HOC.propTypes = {\n    fromDate: RedrawFromDate.propTypes.fromDate\n  };\n  HOC.displayName = \"RedrawFromDate(\".concat(getDisplayName(Component), \")\");\n  return HOC;\n};\n\nRedrawFromDate.hocWrap = hocWrap;\nexport { RedrawFromDate };","map":null,"metadata":{},"sourceType":"module"}