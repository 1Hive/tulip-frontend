{"ast":null,"code":"'use strict';\n\nconst errCode = require('err-code');\n\nconst {\n  Buffer\n} = require('buffer'); // make sure the content only emits buffer-a-likes\n\n\nasync function* validateChunks(source) {\n  for await (const content of source) {\n    if (content.length === undefined) {\n      throw errCode(new Error('Content was invalid'), 'ERR_INVALID_CONTENT');\n    }\n\n    if (typeof content === 'string' || content instanceof String) {\n      yield Buffer.from(content, 'utf8');\n    } else if (Array.isArray(content)) {\n      yield Buffer.from(content);\n    } else {\n      yield content;\n    }\n  }\n}\n\nmodule.exports = validateChunks;","map":null,"metadata":{},"sourceType":"script"}