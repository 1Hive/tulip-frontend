{"ast":null,"code":"'use strict';\n\nconst isPlainObject = require('is-plain-obj');\n\nmodule.exports = (object, options = {}) => {\n  if (!isPlainObject(object) && !Array.isArray(object)) {\n    throw new TypeError('Expected a plain object or array');\n  }\n\n  const {\n    deep\n  } = options;\n  const seenInput = [];\n  const seenOutput = [];\n\n  const deepSortArray = array => {\n    const seenIndex = seenInput.indexOf(array);\n\n    if (seenIndex !== -1) {\n      return seenOutput[seenIndex];\n    }\n\n    const result = [];\n    seenInput.push(array);\n    seenOutput.push(result);\n    result.push(...array.map(item => {\n      if (Array.isArray(item)) {\n        return deepSortArray(item);\n      }\n\n      if (isPlainObject(item)) {\n        return sortKeys(item);\n      }\n\n      return item;\n    }));\n    return result;\n  };\n\n  const sortKeys = object => {\n    const seenIndex = seenInput.indexOf(object);\n\n    if (seenIndex !== -1) {\n      return seenOutput[seenIndex];\n    }\n\n    const result = {};\n    const keys = Object.keys(object).sort(options.compare);\n    seenInput.push(object);\n    seenOutput.push(result);\n\n    for (const key of keys) {\n      const value = object[key];\n      let newValue;\n\n      if (deep && Array.isArray(value)) {\n        newValue = deepSortArray(value);\n      } else {\n        newValue = deep && isPlainObject(value) ? sortKeys(value) : value;\n      }\n\n      Object.defineProperty(result, key, { ...Object.getOwnPropertyDescriptor(object, key),\n        value: newValue\n      });\n    }\n\n    return result;\n  };\n\n  if (Array.isArray(object)) {\n    return deep ? deepSortArray(object) : object.slice();\n  }\n\n  return sortKeys(object);\n};","map":null,"metadata":{},"sourceType":"script"}