{"ast":null,"code":"'use strict';\n\nvar React = require('react');\n\nvar index = require('./index-46d0e707.js');\n\nvar defineProperty = require('./defineProperty-3cad0327.js');\n\nvar getPrototypeOf = require('./getPrototypeOf-55c9e80c.js');\n\nvar getDisplayName = require('./getDisplayName-7f913e84.js');\n\nfunction _interopDefaultLegacy(e) {\n  return e && typeof e === 'object' && 'default' in e ? e : {\n    'default': e\n  };\n}\n\nvar React__default = /*#__PURE__*/_interopDefaultLegacy(React);\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf.getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf.getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return getPrototypeOf.possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n} // For a discussion on pitfalls, see\n// https://gist.github.com/staltz/08bf613199092eeb41ac8137d51eb5e6\n\n\nvar Redraw = /*#__PURE__*/function (_React$PureComponent) {\n  getPrototypeOf.inherits(Redraw, _React$PureComponent);\n\n  var _super = _createSuper(Redraw);\n\n  function Redraw() {\n    var _this;\n\n    getPrototypeOf.classCallCheck(this, Redraw);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    defineProperty.defineProperty(getPrototypeOf.assertThisInitialized(_this), \"state\", {\n      lastDraw: -1\n    });\n    defineProperty.defineProperty(getPrototypeOf.assertThisInitialized(_this), \"draw\", function () {\n      _this.raf = requestAnimationFrame(_this.draw);\n      var interval = _this.props.interval;\n      var lastDraw = _this.state.lastDraw;\n      var now = Date.now();\n      var delta = now - lastDraw;\n\n      if (lastDraw === -1 || delta > interval) {\n        _this.setState({\n          lastDraw: Math.round(now / interval) * interval\n        });\n      }\n    });\n    return _this;\n  }\n\n  getPrototypeOf.createClass(Redraw, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.raf = null;\n      this.draw();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.raf && cancelAnimationFrame(this.raf);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return this.props.children();\n    }\n  }]);\n  return Redraw;\n}(React__default['default'].PureComponent);\n\ndefineProperty.defineProperty(Redraw, \"propTypes\", {\n  interval: index.propTypes.number,\n  children: index.propTypes.func.isRequired\n});\ndefineProperty.defineProperty(Redraw, \"defaultProps\", {\n  interval: 1000\n});\n\nvar hocWrap = function hocWrap(Component, interval) {\n  var HOC = function HOC(props) {\n    return /*#__PURE__*/React__default['default'].createElement(Redraw, {\n      interval: interval\n    }, function () {\n      return /*#__PURE__*/React__default['default'].createElement(Component, props);\n    });\n  };\n\n  HOC.displayName = \"Redraw(\".concat(getDisplayName.getDisplayName(Component), \")\");\n  return HOC;\n};\n\nRedraw.hocWrap = hocWrap;\nexports.Redraw = Redraw;","map":{"version":3,"sources":["../src/providers/Redraw/Redraw.js"],"names":["Redraw","React","PureComponent","interval","PropTypes","children","isRequired","lastDraw","cancelAnimationFrame","requestAnimationFrame","now","Date","delta","Math","hocWrap","HOC","getDisplayName"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAKA;AACA;;;IAEMA,MAAAA,GAAAA,aAAAA,UAAAA,oBAAAA,EAAAA;;;;;;;;;;;;;;;wFAQI;AACNO,MAAAA,QAAQ,EAAE,CAAC;AADL,K;uFAUD,YAAM;AACX,MAAA,KAAA,CAAA,GAAA,GAAWE,qBAAqB,CAAC,KAAA,CAAjC,IAAgC,CAAhC;AADW,UAGHN,QAHG,GAGU,KAAA,CAHV,KAGU,CAHV,QAAA;AAAA,UAIHI,QAJG,GAIU,KAAA,CAJV,KAIU,CAJV,QAAA;AAKX,UAAMG,GAAG,GAAGC,IAAI,CAAhB,GAAYA,EAAZ;AACA,UAAMC,KAAK,GAAGF,GAAG,GAAjB,QAAA;;AAEA,UAAIH,QAAQ,KAAK,CAAbA,CAAAA,IAAmBK,KAAK,GAA5B,QAAA,EAAyC;AACvC,QAAA,KAAA,CAAA,QAAA,CAAc;AACZL,UAAAA,QAAQ,EAAEM,IAAI,CAAJA,KAAAA,CAAWH,GAAG,GAAdG,QAAAA,IAA6BV;AAD3B,SAAd;AAGD;AACF,K;;;;;;wCApBmB;AAClB,WAAA,GAAA,GAAA,IAAA;AACA,WAAA,IAAA;AACD;;;2CACsB;AACrB,WAAA,GAAA,IAAYK,oBAAoB,CAAC,KAAjC,GAAgC,CAAhC;AACD;;;6BAeQ;AACP,aAAO,KAAA,KAAA,CAAP,QAAO,EAAP;AACD;;;CAlCGR,CAAeC,cAAAA,CAAAA,SAAAA,CAAAA,CAAMC,aAArBF,C;;8BAAAA,M,EAAAA,W,EACe;AACjBG,EAAAA,QAAQ,EAAEC,KAAAA,CAAAA,SAAAA,CADO,MAAA;AAEjBC,EAAAA,QAAQ,EAAED,KAAAA,CAAAA,SAAAA,CAAAA,IAAAA,CAAeE;AAFR,C;8BADfN,M,EAAAA,c,EAKkB;AACpBG,EAAAA,QAAQ,EAAE;AADU,C;;AAgCxB,IAAMW,OAAO,GAAG,SAAVA,OAAU,CAAA,SAAA,EAAA,QAAA,EAAyB;AACvC,MAAMC,GAAG,GAAG,SAANA,GAAM,CAAA,KAAA,EAAK;AAAA,WAAA,aACf,cAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAQ,MAAA,QAAQ,EAAEZ;AAAlB,KAAA,EAA6B,YAAA;AAAA,aAAA,aAAMF,cAAAA,CAAAA,SAAAA,CAAAA,CAAAA,aAAAA,CAAAA,SAAAA,EAAN,KAAMA,CAAN;AADd,KACf,CADe;AAAjB,GAAA;;AAGAc,EAAAA,GAAG,CAAHA,WAAAA,GAAAA,UAAAA,MAAAA,CAA4BC,cAAAA,CAAAA,cAAAA,CAA5BD,SAA4BC,CAA5BD,EAAAA,GAAAA,CAAAA;AACA,SAAA,GAAA;AALF,CAAA;;AAQAf,MAAM,CAANA,OAAAA,GAAAA,OAAAA","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport getDisplayName from 'react-display-name'\n\n// Render prop component and HOC for re-rendering.\n// For a discussion on pitfalls, see\n// https://gist.github.com/staltz/08bf613199092eeb41ac8137d51eb5e6\n\nclass Redraw extends React.PureComponent {\n  static propTypes = {\n    interval: PropTypes.number,\n    children: PropTypes.func.isRequired,\n  }\n  static defaultProps = {\n    interval: 1000,\n  }\n  state = {\n    lastDraw: -1,\n  }\n  componentDidMount() {\n    this.raf = null\n    this.draw()\n  }\n  componentWillUnmount() {\n    this.raf && cancelAnimationFrame(this.raf)\n  }\n  draw = () => {\n    this.raf = requestAnimationFrame(this.draw)\n\n    const { interval } = this.props\n    const { lastDraw } = this.state\n    const now = Date.now()\n    const delta = now - lastDraw\n\n    if (lastDraw === -1 || delta > interval) {\n      this.setState({\n        lastDraw: Math.round(now / interval) * interval,\n      })\n    }\n  }\n  render() {\n    return this.props.children()\n  }\n}\n\nconst hocWrap = (Component, interval) => {\n  const HOC = props => (\n    <Redraw interval={interval}>{() => <Component {...props} />}</Redraw>\n  )\n  HOC.displayName = `Redraw(${getDisplayName(Component)})`\n  return HOC\n}\n\nRedraw.hocWrap = hocWrap\n\nexport { Redraw, hocWrap }\nexport default Redraw\n"]},"metadata":{},"sourceType":"script"}