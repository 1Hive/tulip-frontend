{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FetchClient = void 0;\n\nclass FetchClient {\n  constructor() {\n    this.maxConcurrentRequests = 15;\n    this.requestIntervalMs = 10;\n    this.pendingRequests = 0;\n  }\n\n  get(url, config) {\n    return this.request(url, 'GET', config);\n  }\n\n  delete(url, config) {\n    return this.request(url, 'DELETE', config);\n  }\n\n  head(url, config) {\n    return this.request(url, 'HEAD', config);\n  }\n\n  post(url, data, config) {\n    return this.request(url, 'POST', config, data);\n  }\n\n  put(url, data, config) {\n    return this.request(url, 'PUT', config, data);\n  }\n\n  patch(url, data, config) {\n    return this.request(url, 'PATCH', config, data);\n  }\n\n  request(url, method, config, data) {\n    return __awaiter(this, void 0, void 0, function* () {\n      let body = undefined;\n\n      if (!!data) {\n        if (typeof data === 'object' && !this.isBuffer(data)) {\n          body = JSON.stringify(data);\n          config = config || {\n            headers: {}\n          };\n          config.headers = config.headers || {};\n          config.headers['Content-Type'] = 'application/json';\n        } else {\n          body = data;\n        }\n      }\n\n      yield this.waitInQueue();\n      return fetch(url, {\n        method: method,\n        headers: !!config ? config.headers : {},\n        mode: config && config.mode || 'no-cors',\n        body: body\n      }).then(resp => __awaiter(this, void 0, void 0, function* () {\n        if (resp.status === 204) {\n          return {};\n        }\n\n        const text = yield resp.text();\n        const json = text ? JSON.parse(text) : {};\n\n        if (resp.status >= 200 && resp.status < 300) {\n          return json;\n        } else {\n          throw json;\n        }\n      })).finally(() => this.pendingRequests = Math.max(0, this.pendingRequests - 1));\n    });\n  }\n\n  isBuffer(data) {\n    if (typeof ArrayBuffer === 'function') {\n      return ArrayBuffer.isView(data);\n    } else if (typeof Buffer === 'function') {\n      return Buffer.isBuffer(data);\n    } else {\n      return false;\n    }\n  }\n\n  waitInQueue() {\n    return new Promise(resolve => {\n      const interval = setInterval(() => {\n        if (this.pendingRequests < this.maxConcurrentRequests) {\n          this.pendingRequests++;\n          clearInterval(interval);\n          resolve();\n        }\n      }, this.requestIntervalMs);\n    });\n  }\n\n}\n\nexports.FetchClient = FetchClient;","map":{"version":3,"sources":["/Users/fabian/Documents/Projects/1hive/tulip-frontend/node_modules/@crowdin/crowdin-api-client/out/core/internal/fetch/fetchClient.js"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","Object","defineProperty","exports","FetchClient","constructor","maxConcurrentRequests","requestIntervalMs","pendingRequests","get","url","config","request","delete","head","post","data","put","patch","method","body","undefined","isBuffer","JSON","stringify","headers","waitInQueue","fetch","mode","resp","status","text","json","parse","finally","Math","max","ArrayBuffer","isView","Buffer","interval","setInterval","clearInterval"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FetchClient = void 0;\nclass FetchClient {\n    constructor() {\n        this.maxConcurrentRequests = 15;\n        this.requestIntervalMs = 10;\n        this.pendingRequests = 0;\n    }\n    get(url, config) {\n        return this.request(url, 'GET', config);\n    }\n    delete(url, config) {\n        return this.request(url, 'DELETE', config);\n    }\n    head(url, config) {\n        return this.request(url, 'HEAD', config);\n    }\n    post(url, data, config) {\n        return this.request(url, 'POST', config, data);\n    }\n    put(url, data, config) {\n        return this.request(url, 'PUT', config, data);\n    }\n    patch(url, data, config) {\n        return this.request(url, 'PATCH', config, data);\n    }\n    request(url, method, config, data) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let body = undefined;\n            if (!!data) {\n                if (typeof data === 'object' && !this.isBuffer(data)) {\n                    body = JSON.stringify(data);\n                    config = config || { headers: {} };\n                    config.headers = config.headers || {};\n                    config.headers['Content-Type'] = 'application/json';\n                }\n                else {\n                    body = data;\n                }\n            }\n            yield this.waitInQueue();\n            return fetch(url, {\n                method: method,\n                headers: !!config ? config.headers : {},\n                mode: (config && config.mode) || 'no-cors',\n                body: body,\n            })\n                .then((resp) => __awaiter(this, void 0, void 0, function* () {\n                if (resp.status === 204) {\n                    return {};\n                }\n                const text = yield resp.text();\n                const json = text ? JSON.parse(text) : {};\n                if (resp.status >= 200 && resp.status < 300) {\n                    return json;\n                }\n                else {\n                    throw json;\n                }\n            }))\n                .finally(() => (this.pendingRequests = Math.max(0, this.pendingRequests - 1)));\n        });\n    }\n    isBuffer(data) {\n        if (typeof ArrayBuffer === 'function') {\n            return ArrayBuffer.isView(data);\n        }\n        else if (typeof Buffer === 'function') {\n            return Buffer.isBuffer(data);\n        }\n        else {\n            return false;\n        }\n    }\n    waitInQueue() {\n        return new Promise(resolve => {\n            const interval = setInterval(() => {\n                if (this.pendingRequests < this.maxConcurrentRequests) {\n                    this.pendingRequests++;\n                    clearInterval(interval);\n                    resolve();\n                }\n            }, this.requestIntervalMs);\n        });\n    }\n}\nexports.FetchClient = FetchClient;\n"]},"metadata":{},"sourceType":"script"}