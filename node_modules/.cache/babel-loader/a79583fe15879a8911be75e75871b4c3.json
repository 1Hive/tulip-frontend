{"ast":null,"code":"import _classCallCheck from\"/Users/fabianmolina/Documents/1hive/tulip-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/fabianmolina/Documents/1hive/tulip-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/fabianmolina/Documents/1hive/tulip-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/fabianmolina/Documents/1hive/tulip-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'./LineChart.css';var LineChart=/*#__PURE__*/function(_Component){_inherits(LineChart,_Component);var _super=_createSuper(LineChart);function LineChart(props){var _this;_classCallCheck(this,LineChart);_this=_super.call(this,props);_this.state={hoverLoc:null,activePoint:null};return _this;}// GET X & Y || MAX & MIN\n_createClass(LineChart,[{key:\"getX\",value:function getX(){var data=this.props.data;return{min:data[0]?data[0].x:0,max:data[data.length-1]?data[data.length-1].x:0};}},{key:\"getY\",value:function getY(){var data=this.props.data;if(data.length>0){return{min:data.reduce(function(min,p){return p.y<min?p.y:min;},data[0].y),max:data.reduce(function(max,p){return p.y>max?p.y:max;},data[0].y)};}else{return{min:0,max:0};}}// GET SVG COORDINATES\n},{key:\"getSvgX\",value:function getSvgX(x){var _this$props=this.props,width=_this$props.width,yLabelSize=_this$props.yLabelSize;return yLabelSize+x/this.getX().max*(width-yLabelSize);}},{key:\"getSvgY\",value:function getSvgY(y){var _this$props2=this.props,height=_this$props2.height,xLabelSize=_this$props2.xLabelSize;var gY=this.getY();var gYdiff=gY.max-gY.min>1?gY.max-gY.min:1;return((height-xLabelSize)*gY.max-(height-xLabelSize)*y)/gYdiff;}// BUILD SVG PATH\n},{key:\"makePath\",value:function makePath(){var _this2=this;var _this$props3=this.props,data=_this$props3.data,color=_this$props3.color;if(data===undefined||data.length===0){return/*#__PURE__*/React.createElement(\"div\",null);}var pathD='M '+this.getSvgX(data[0].x)+' '+this.getSvgY(data[0].y)+'10 ';if(data.every(function(val,i,arr){return val.y===arr[0].y;})){// If all the values are equal we check if they are 0 or not because 0 is not recognized by the svg path.\nvar value=data[0].y>0?50:100;pathD+=data.map(function(point,i){return'L '+_this2.getSvgX(point.x)+' '+value+' ';});}else{pathD+=data.map(function(point,i){return'L '+_this2.getSvgX(point.x)+' '+_this2.getSvgY(point.y)+' ';});}return/*#__PURE__*/React.createElement(\"path\",{className:\"linechart_path\",d:pathD,style:{stroke:color}});}// BUILD SHADED AREA\n},{key:\"makeArea\",value:function makeArea(){var _this3=this;var data=this.props.data;if(data===undefined||data.length===0){return/*#__PURE__*/React.createElement(\"div\",null);}var pathD='M '+this.getSvgX(data[0].x)+' '+this.getSvgY(data[0].y)+' ';pathD+=data.map(function(point,i){return'L '+_this3.getSvgX(point.x)+' '+_this3.getSvgY(point.y)+' ';});var x=this.getX();var y=this.getY();pathD+='L '+this.getSvgX(x.max)+' '+this.getSvgY(y.min)+' '+'L '+this.getSvgX(x.min)+' '+this.getSvgY(y.min)+' ';return/*#__PURE__*/React.createElement(\"svg\",null,/*#__PURE__*/React.createElement(\"defs\",null,/*#__PURE__*/React.createElement(\"linearGradient\",{id:\"MyGradient\",gradientTransform:\"rotate(80)\"},/*#__PURE__*/React.createElement(\"stop\",{offset:\"35%\",stopColor:\"#7ce0d680\"}),/*#__PURE__*/React.createElement(\"stop\",{offset:\"95%\",stopColor:\"#7ce0d600\"}))),/*#__PURE__*/React.createElement(\"path\",{className:\"linechart_area\",d:pathD}));}// BUILD GRID AXIS\n},{key:\"makeAxis\",value:function makeAxis(){var yLabelSize=this.props.yLabelSize;var x=this.getX();var y=this.getY();return/*#__PURE__*/React.createElement(\"g\",{className:\"linechart_axis\"},/*#__PURE__*/React.createElement(\"line\",{x1:this.getSvgX(x.min)-yLabelSize,y1:this.getSvgY(y.min),x2:this.getSvgX(x.max),y2:this.getSvgY(y.min),strokeDasharray:\"5\"}),/*#__PURE__*/React.createElement(\"line\",{x1:this.getSvgX(x.min)-yLabelSize,y1:this.getSvgY(y.max),x2:this.getSvgX(x.max),y2:this.getSvgY(y.max),strokeDasharray:\"5\"}));}},{key:\"makeLabels\",value:function makeLabels(){var _this$props4=this.props,height=_this$props4.height,width=_this$props4.width,xLabelSize=_this$props4.xLabelSize,yLabelSize=_this$props4.yLabelSize;var padding=5;return/*#__PURE__*/React.createElement(\"g\",{className:\"linechart_label\"},/*#__PURE__*/React.createElement(\"text\",{transform:\"translate(\".concat(yLabelSize/2,\", 20)\"),textAnchor:\"middle\"},this.getY().max.toLocaleString('us-EN',{style:'currency',currency:'USD'})),/*#__PURE__*/React.createElement(\"text\",{transform:\"translate(\".concat(yLabelSize/2,\", \").concat(height-xLabelSize-padding,\")\"),textAnchor:\"middle\"},this.getY().min.toLocaleString('us-EN',{style:'currency',currency:'USD'})),/*#__PURE__*/React.createElement(\"text\",{transform:\"translate(\".concat(yLabelSize,\", \").concat(height,\")\"),textAnchor:\"start\"},this.props.data[0].d),/*#__PURE__*/React.createElement(\"text\",{transform:\"translate(\".concat(width,\", \").concat(height,\")\"),textAnchor:\"end\"},this.props.data[this.props.data.length-1].d));}// FIND CLOSEST POINT TO MOUSE\n},{key:\"getCoords\",value:function getCoords(e){var _this4=this;var _this$props5=this.props,width=_this$props5.width,data=_this$props5.data,yLabelSize=_this$props5.yLabelSize;var svgLocation=document.getElementsByClassName('linechart')[0].getBoundingClientRect();var adjustment=(svgLocation.width-width)/2;// takes padding into consideration\nvar relativeLoc=e.clientX-svgLocation.left-adjustment;var valueY=0;if(data.every(function(val,i,arr){return val.y===arr[0].y;})){// If all the values are equal we check if they are 0 or not because 0 is not recognized by the svg path.\nvalueY=data[0].y>0?50:100;}var svgData=[];data.map(function(point,i){svgData.push({svgX:_this4.getSvgX(point.x),svgY:valueY>0?valueY:_this4.getSvgY(point.y),d:point.d,p:point.p});});var closestPoint={};for(var i=0,c=500;i<svgData.length;i++){if(Math.abs(svgData[i].svgX-this.state.hoverLoc)<=c){c=Math.abs(svgData[i].svgX-this.state.hoverLoc);closestPoint=svgData[i];}}if(relativeLoc-yLabelSize<0){this.stopHover();}else{this.setState({hoverLoc:relativeLoc,activePoint:closestPoint});this.props.onChartHover(relativeLoc,closestPoint);}}// STOP HOVER\n},{key:\"stopHover\",value:function stopHover(){this.setState({hoverLoc:null,activePoint:null});this.props.onChartHover(null,null);}// MAKE ACTIVE POINT\n},{key:\"makeActivePoint\",value:function makeActivePoint(){var _this$props6=this.props,color=_this$props6.color,pointRadius=_this$props6.pointRadius;return/*#__PURE__*/React.createElement(\"circle\",{className:\"linechart_point\",style:{stroke:color},r:pointRadius,cx:this.state.activePoint.svgX,cy:this.state.activePoint.svgY});}// MAKE HOVER LINE\n},{key:\"createLine\",value:function createLine(){var _this$props7=this.props,height=_this$props7.height,xLabelSize=_this$props7.xLabelSize;return/*#__PURE__*/React.createElement(\"line\",{className:\"hoverLine\",x1:this.state.hoverLoc,y1:-8,x2:this.state.hoverLoc,y2:height-xLabelSize});}},{key:\"render\",value:function render(){var _this5=this;var _this$props8=this.props,height=_this$props8.height,width=_this$props8.width;return/*#__PURE__*/React.createElement(\"svg\",{width:width,height:height,viewBox:\"10 -10 \".concat(width,\" \").concat(height),className:\"linechart\",onMouseLeave:function onMouseLeave(){return _this5.stopHover();},onMouseMove:function onMouseMove(e){return _this5.getCoords(e);}},/*#__PURE__*/React.createElement(\"g\",null,this.props.makeAxis&&this.makeAxis(),this.makePath(),this.makeArea(),this.props.showLabels&&this.makeLabels(),this.props.showHoverLoc&&this.state.hoverLoc?this.createLine():null,this.state.hoverLoc?this.makeActivePoint():null));}}]);return LineChart;}(Component);// DEFAULT PROPS\nLineChart.defaultProps={data:[],color:'#7CE0D6',pointRadius:6,height:300,width:900,xLabelSize:20,yLabelSize:80,showLabels:false,showHoverLoc:false,showAxis:false};export default LineChart;","map":{"version":3,"sources":["/Users/fabianmolina/Documents/1hive/tulip-frontend/src/components/LineChart/LineChart.js"],"names":["React","Component","LineChart","props","state","hoverLoc","activePoint","data","min","x","max","length","reduce","p","y","width","yLabelSize","getX","height","xLabelSize","gY","getY","gYdiff","color","undefined","pathD","getSvgX","getSvgY","every","val","i","arr","value","map","point","stroke","padding","toLocaleString","style","currency","d","e","svgLocation","document","getElementsByClassName","getBoundingClientRect","adjustment","relativeLoc","clientX","left","valueY","svgData","push","svgX","svgY","closestPoint","c","Math","abs","stopHover","setState","onChartHover","pointRadius","getCoords","makeAxis","makePath","makeArea","showLabels","makeLabels","showHoverLoc","createLine","makeActivePoint","defaultProps","showAxis"],"mappings":"opBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAO,iBAAP,C,GAEMC,CAAAA,S,sGACJ,mBAAYC,KAAZ,CAAmB,2CACjB,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACXC,QAAQ,CAAE,IADC,CAEXC,WAAW,CAAE,IAFF,CAAb,CAFiB,aAMlB,CAED;0CACA,eAAO,IACGC,CAAAA,IADH,CACY,KAAKJ,KADjB,CACGI,IADH,CAEL,MAAO,CACLC,GAAG,CAAED,IAAI,CAAC,CAAD,CAAJ,CAAUA,IAAI,CAAC,CAAD,CAAJ,CAAQE,CAAlB,CAAsB,CADtB,CAELC,GAAG,CAAEH,IAAI,CAACA,IAAI,CAACI,MAAL,CAAc,CAAf,CAAJ,CAAwBJ,IAAI,CAACA,IAAI,CAACI,MAAL,CAAc,CAAf,CAAJ,CAAsBF,CAA9C,CAAkD,CAFlD,CAAP,CAID,C,oBAED,eAAO,IACGF,CAAAA,IADH,CACY,KAAKJ,KADjB,CACGI,IADH,CAEL,GAAIA,IAAI,CAACI,MAAL,CAAc,CAAlB,CAAqB,CACnB,MAAO,CACLH,GAAG,CAAED,IAAI,CAACK,MAAL,CAAY,SAACJ,GAAD,CAAMK,CAAN,QAAaA,CAAAA,CAAC,CAACC,CAAF,CAAMN,GAAN,CAAYK,CAAC,CAACC,CAAd,CAAkBN,GAA/B,EAAZ,CAAiDD,IAAI,CAAC,CAAD,CAAJ,CAAQO,CAAzD,CADA,CAELJ,GAAG,CAAEH,IAAI,CAACK,MAAL,CAAY,SAACF,GAAD,CAAMG,CAAN,QAAaA,CAAAA,CAAC,CAACC,CAAF,CAAMJ,GAAN,CAAYG,CAAC,CAACC,CAAd,CAAkBJ,GAA/B,EAAZ,CAAiDH,IAAI,CAAC,CAAD,CAAJ,CAAQO,CAAzD,CAFA,CAAP,CAID,CALD,IAKO,CACL,MAAO,CACLN,GAAG,CAAE,CADA,CAELE,GAAG,CAAE,CAFA,CAAP,CAID,CACF,CAED;uBACA,iBAAQD,CAAR,CAAW,iBACqB,KAAKN,KAD1B,CACDY,KADC,aACDA,KADC,CACMC,UADN,aACMA,UADN,CAET,MAAOA,CAAAA,UAAU,CAAIP,CAAC,CAAG,KAAKQ,IAAL,GAAYP,GAAjB,EAAyBK,KAAK,CAAGC,UAAjC,CAApB,CACD,C,uBAED,iBAAQF,CAAR,CAAW,kBACsB,KAAKX,KAD3B,CACDe,MADC,cACDA,MADC,CACOC,UADP,cACOA,UADP,CAET,GAAMC,CAAAA,EAAE,CAAG,KAAKC,IAAL,EAAX,CACA,GAAMC,CAAAA,MAAM,CAAGF,EAAE,CAACV,GAAH,CAASU,EAAE,CAACZ,GAAZ,CAAkB,CAAlB,CAAsBY,EAAE,CAACV,GAAH,CAASU,EAAE,CAACZ,GAAlC,CAAwC,CAAvD,CACA,MAAO,CAAC,CAACU,MAAM,CAAGC,UAAV,EAAwBC,EAAE,CAACV,GAA3B,CAAiC,CAACQ,MAAM,CAAGC,UAAV,EAAwBL,CAA1D,EAA+DQ,MAAtE,CACD,CAED;wBACA,mBAAW,kCACe,KAAKnB,KADpB,CACDI,IADC,cACDA,IADC,CACKgB,KADL,cACKA,KADL,CAET,GAAIhB,IAAI,GAAKiB,SAAT,EAAsBjB,IAAI,CAACI,MAAL,GAAgB,CAA1C,CAA6C,CAC3C,mBAAO,+BAAP,CACD,CACD,GAAIc,CAAAA,KAAK,CACP,KAAO,KAAKC,OAAL,CAAanB,IAAI,CAAC,CAAD,CAAJ,CAAQE,CAArB,CAAP,CAAiC,GAAjC,CAAuC,KAAKkB,OAAL,CAAapB,IAAI,CAAC,CAAD,CAAJ,CAAQO,CAArB,CAAvC,CAAiE,KADnE,CAGA,GAAIP,IAAI,CAACqB,KAAL,CAAW,SAACC,GAAD,CAAMC,CAAN,CAASC,GAAT,QAAiBF,CAAAA,GAAG,CAACf,CAAJ,GAAUiB,GAAG,CAAC,CAAD,CAAH,CAAOjB,CAAlC,EAAX,CAAJ,CAAqD,CACnD;AACA,GAAMkB,CAAAA,KAAK,CAAGzB,IAAI,CAAC,CAAD,CAAJ,CAAQO,CAAR,CAAY,CAAZ,CAAgB,EAAhB,CAAqB,GAAnC,CACAW,KAAK,EAAIlB,IAAI,CAAC0B,GAAL,CAAS,SAACC,KAAD,CAAQJ,CAAR,CAAc,CAC9B,MAAO,KAAO,MAAI,CAACJ,OAAL,CAAaQ,KAAK,CAACzB,CAAnB,CAAP,CAA+B,GAA/B,CAAqCuB,KAArC,CAA6C,GAApD,CACD,CAFQ,CAAT,CAGD,CAND,IAMO,CACLP,KAAK,EAAIlB,IAAI,CAAC0B,GAAL,CAAS,SAACC,KAAD,CAAQJ,CAAR,CAAc,CAC9B,MAAO,KAAO,MAAI,CAACJ,OAAL,CAAaQ,KAAK,CAACzB,CAAnB,CAAP,CAA+B,GAA/B,CAAqC,MAAI,CAACkB,OAAL,CAAaO,KAAK,CAACpB,CAAnB,CAArC,CAA6D,GAApE,CACD,CAFQ,CAAT,CAGD,CAED,mBACE,4BAAM,SAAS,CAAC,gBAAhB,CAAiC,CAAC,CAAEW,KAApC,CAA2C,KAAK,CAAE,CAAEU,MAAM,CAAEZ,KAAV,CAAlD,EADF,CAGD,CAED;wBACA,mBAAW,oBACDhB,CAAAA,IADC,CACQ,KAAKJ,KADb,CACDI,IADC,CAET,GAAIA,IAAI,GAAKiB,SAAT,EAAsBjB,IAAI,CAACI,MAAL,GAAgB,CAA1C,CAA6C,CAC3C,mBAAO,+BAAP,CACD,CAED,GAAIc,CAAAA,KAAK,CACP,KAAO,KAAKC,OAAL,CAAanB,IAAI,CAAC,CAAD,CAAJ,CAAQE,CAArB,CAAP,CAAiC,GAAjC,CAAuC,KAAKkB,OAAL,CAAapB,IAAI,CAAC,CAAD,CAAJ,CAAQO,CAArB,CAAvC,CAAiE,GADnE,CAGAW,KAAK,EAAIlB,IAAI,CAAC0B,GAAL,CAAS,SAACC,KAAD,CAAQJ,CAAR,CAAc,CAC9B,MAAO,KAAO,MAAI,CAACJ,OAAL,CAAaQ,KAAK,CAACzB,CAAnB,CAAP,CAA+B,GAA/B,CAAqC,MAAI,CAACkB,OAAL,CAAaO,KAAK,CAACpB,CAAnB,CAArC,CAA6D,GAApE,CACD,CAFQ,CAAT,CAIA,GAAML,CAAAA,CAAC,CAAG,KAAKQ,IAAL,EAAV,CACA,GAAMH,CAAAA,CAAC,CAAG,KAAKO,IAAL,EAAV,CACAI,KAAK,EACH,KACA,KAAKC,OAAL,CAAajB,CAAC,CAACC,GAAf,CADA,CAEA,GAFA,CAGA,KAAKiB,OAAL,CAAab,CAAC,CAACN,GAAf,CAHA,CAIA,GAJA,CAKA,IALA,CAMA,KAAKkB,OAAL,CAAajB,CAAC,CAACD,GAAf,CANA,CAOA,GAPA,CAQA,KAAKmB,OAAL,CAAab,CAAC,CAACN,GAAf,CARA,CASA,GAVF,CAYA,mBACE,4CACE,6CACE,sCAAgB,EAAE,CAAC,YAAnB,CAAgC,iBAAiB,CAAC,YAAlD,eACE,4BAAM,MAAM,CAAC,KAAb,CAAmB,SAAS,CAAC,WAA7B,EADF,cAEE,4BAAM,MAAM,CAAC,KAAb,CAAmB,SAAS,CAAC,WAA7B,EAFF,CADF,CADF,cAOE,4BAAM,SAAS,CAAC,gBAAhB,CAAiC,CAAC,CAAEiB,KAApC,EAPF,CADF,CAWD,CAED;wBACA,mBAAW,IACDT,CAAAA,UADC,CACc,KAAKb,KADnB,CACDa,UADC,CAET,GAAMP,CAAAA,CAAC,CAAG,KAAKQ,IAAL,EAAV,CACA,GAAMH,CAAAA,CAAC,CAAG,KAAKO,IAAL,EAAV,CAEA,mBACE,yBAAG,SAAS,CAAC,gBAAb,eACE,4BACE,EAAE,CAAE,KAAKK,OAAL,CAAajB,CAAC,CAACD,GAAf,EAAsBQ,UAD5B,CAEE,EAAE,CAAE,KAAKW,OAAL,CAAab,CAAC,CAACN,GAAf,CAFN,CAGE,EAAE,CAAE,KAAKkB,OAAL,CAAajB,CAAC,CAACC,GAAf,CAHN,CAIE,EAAE,CAAE,KAAKiB,OAAL,CAAab,CAAC,CAACN,GAAf,CAJN,CAKE,eAAe,CAAC,GALlB,EADF,cAQE,4BACE,EAAE,CAAE,KAAKkB,OAAL,CAAajB,CAAC,CAACD,GAAf,EAAsBQ,UAD5B,CAEE,EAAE,CAAE,KAAKW,OAAL,CAAab,CAAC,CAACJ,GAAf,CAFN,CAGE,EAAE,CAAE,KAAKgB,OAAL,CAAajB,CAAC,CAACC,GAAf,CAHN,CAIE,EAAE,CAAE,KAAKiB,OAAL,CAAab,CAAC,CAACJ,GAAf,CAJN,CAKE,eAAe,CAAC,GALlB,EARF,CADF,CAkBD,C,0BAED,qBAAa,kBACuC,KAAKP,KAD5C,CACHe,MADG,cACHA,MADG,CACKH,KADL,cACKA,KADL,CACYI,UADZ,cACYA,UADZ,CACwBH,UADxB,cACwBA,UADxB,CAEX,GAAMoB,CAAAA,OAAO,CAAG,CAAhB,CACA,mBACE,yBAAG,SAAS,CAAC,iBAAb,eAEE,4BACE,SAAS,qBAAepB,UAAU,CAAG,CAA5B,SADX,CAEE,UAAU,CAAC,QAFb,EAIG,KAAKK,IAAL,GAAYX,GAAZ,CAAgB2B,cAAhB,CAA+B,OAA/B,CAAwC,CACvCC,KAAK,CAAE,UADgC,CAEvCC,QAAQ,CAAE,KAF6B,CAAxC,CAJH,CAFF,cAWE,4BACE,SAAS,qBAAevB,UAAU,CAAG,CAA5B,cAAkCE,MAAM,CAC/CC,UADyC,CAEzCiB,OAFO,KADX,CAIE,UAAU,CAAC,QAJb,EAMG,KAAKf,IAAL,GAAYb,GAAZ,CAAgB6B,cAAhB,CAA+B,OAA/B,CAAwC,CACvCC,KAAK,CAAE,UADgC,CAEvCC,QAAQ,CAAE,KAF6B,CAAxC,CANH,CAXF,cAuBE,4BACE,SAAS,qBAAevB,UAAf,cAA8BE,MAA9B,KADX,CAEE,UAAU,CAAC,OAFb,EAIG,KAAKf,KAAL,CAAWI,IAAX,CAAgB,CAAhB,EAAmBiC,CAJtB,CAvBF,cA6BE,4BAAM,SAAS,qBAAezB,KAAf,cAAyBG,MAAzB,KAAf,CAAmD,UAAU,CAAC,KAA9D,EACG,KAAKf,KAAL,CAAWI,IAAX,CAAgB,KAAKJ,KAAL,CAAWI,IAAX,CAAgBI,MAAhB,CAAyB,CAAzC,EAA4C6B,CAD/C,CA7BF,CADF,CAmCD,CAED;yBACA,mBAAUC,CAAV,CAAa,kCACyB,KAAKtC,KAD9B,CACHY,KADG,cACHA,KADG,CACIR,IADJ,cACIA,IADJ,CACUS,UADV,cACUA,UADV,CAEX,GAAM0B,CAAAA,WAAW,CAAGC,QAAQ,CACzBC,sBADiB,CACM,WADN,EACmB,CADnB,EAEjBC,qBAFiB,EAApB,CAGA,GAAMC,CAAAA,UAAU,CAAG,CAACJ,WAAW,CAAC3B,KAAZ,CAAoBA,KAArB,EAA8B,CAAjD,CAAmD;AACnD,GAAMgC,CAAAA,WAAW,CAAGN,CAAC,CAACO,OAAF,CAAYN,WAAW,CAACO,IAAxB,CAA+BH,UAAnD,CAEA,GAAII,CAAAA,MAAM,CAAG,CAAb,CACA,GAAI3C,IAAI,CAACqB,KAAL,CAAW,SAACC,GAAD,CAAMC,CAAN,CAASC,GAAT,QAAiBF,CAAAA,GAAG,CAACf,CAAJ,GAAUiB,GAAG,CAAC,CAAD,CAAH,CAAOjB,CAAlC,EAAX,CAAJ,CAAqD,CACnD;AACAoC,MAAM,CAAG3C,IAAI,CAAC,CAAD,CAAJ,CAAQO,CAAR,CAAY,CAAZ,CAAgB,EAAhB,CAAqB,GAA9B,CACD,CAED,GAAMqC,CAAAA,OAAO,CAAG,EAAhB,CACA5C,IAAI,CAAC0B,GAAL,CAAS,SAACC,KAAD,CAAQJ,CAAR,CAAc,CACrBqB,OAAO,CAACC,IAAR,CAAa,CACXC,IAAI,CAAE,MAAI,CAAC3B,OAAL,CAAaQ,KAAK,CAACzB,CAAnB,CADK,CAEX6C,IAAI,CAAEJ,MAAM,CAAG,CAAT,CAAaA,MAAb,CAAsB,MAAI,CAACvB,OAAL,CAAaO,KAAK,CAACpB,CAAnB,CAFjB,CAGX0B,CAAC,CAAEN,KAAK,CAACM,CAHE,CAIX3B,CAAC,CAAEqB,KAAK,CAACrB,CAJE,CAAb,EAMD,CAPD,EASA,GAAI0C,CAAAA,YAAY,CAAG,EAAnB,CAEA,IAAK,GAAIzB,CAAAA,CAAC,CAAG,CAAR,CAAW0B,CAAC,CAAG,GAApB,CAAyB1B,CAAC,CAAGqB,OAAO,CAACxC,MAArC,CAA6CmB,CAAC,EAA9C,CAAkD,CAChD,GAAI2B,IAAI,CAACC,GAAL,CAASP,OAAO,CAACrB,CAAD,CAAP,CAAWuB,IAAX,CAAkB,KAAKjD,KAAL,CAAWC,QAAtC,GAAmDmD,CAAvD,CAA0D,CACxDA,CAAC,CAAGC,IAAI,CAACC,GAAL,CAASP,OAAO,CAACrB,CAAD,CAAP,CAAWuB,IAAX,CAAkB,KAAKjD,KAAL,CAAWC,QAAtC,CAAJ,CACAkD,YAAY,CAAGJ,OAAO,CAACrB,CAAD,CAAtB,CACD,CACF,CAED,GAAIiB,WAAW,CAAG/B,UAAd,CAA2B,CAA/B,CAAkC,CAChC,KAAK2C,SAAL,GACD,CAFD,IAEO,CACL,KAAKC,QAAL,CAAc,CACZvD,QAAQ,CAAE0C,WADE,CAEZzC,WAAW,CAAEiD,YAFD,CAAd,EAIA,KAAKpD,KAAL,CAAW0D,YAAX,CAAwBd,WAAxB,CAAqCQ,YAArC,EACD,CACF,CAED;yBACA,oBAAY,CACV,KAAKK,QAAL,CAAc,CAAEvD,QAAQ,CAAE,IAAZ,CAAkBC,WAAW,CAAE,IAA/B,CAAd,EACA,KAAKH,KAAL,CAAW0D,YAAX,CAAwB,IAAxB,CAA8B,IAA9B,EACD,CAED;+BACA,0BAAkB,kBACe,KAAK1D,KADpB,CACRoB,KADQ,cACRA,KADQ,CACDuC,WADC,cACDA,WADC,CAEhB,mBACE,8BACE,SAAS,CAAC,iBADZ,CAEE,KAAK,CAAE,CAAE3B,MAAM,CAAEZ,KAAV,CAFT,CAGE,CAAC,CAAEuC,WAHL,CAIE,EAAE,CAAE,KAAK1D,KAAL,CAAWE,WAAX,CAAuB+C,IAJ7B,CAKE,EAAE,CAAE,KAAKjD,KAAL,CAAWE,WAAX,CAAuBgD,IAL7B,EADF,CASD,CAED;0BACA,qBAAa,kBACoB,KAAKnD,KADzB,CACHe,MADG,cACHA,MADG,CACKC,UADL,cACKA,UADL,CAEX,mBACE,4BACE,SAAS,CAAC,WADZ,CAEE,EAAE,CAAE,KAAKf,KAAL,CAAWC,QAFjB,CAGE,EAAE,CAAE,CAAC,CAHP,CAIE,EAAE,CAAE,KAAKD,KAAL,CAAWC,QAJjB,CAKE,EAAE,CAAEa,MAAM,CAAGC,UALf,EADF,CASD,C,sBAED,iBAAS,kCACmB,KAAKhB,KADxB,CACCe,MADD,cACCA,MADD,CACSH,KADT,cACSA,KADT,CAEP,mBACE,2BACE,KAAK,CAAEA,KADT,CAEE,MAAM,CAAEG,MAFV,CAGE,OAAO,kBAAYH,KAAZ,aAAqBG,MAArB,CAHT,CAIE,SAAS,CAAC,WAJZ,CAKE,YAAY,CAAE,8BAAM,CAAA,MAAI,CAACyC,SAAL,EAAN,EALhB,CAME,WAAW,CAAE,qBAAAlB,CAAC,QAAI,CAAA,MAAI,CAACsB,SAAL,CAAetB,CAAf,CAAJ,EANhB,eAQE,6BACG,KAAKtC,KAAL,CAAW6D,QAAX,EAAuB,KAAKA,QAAL,EAD1B,CAEG,KAAKC,QAAL,EAFH,CAGG,KAAKC,QAAL,EAHH,CAIG,KAAK/D,KAAL,CAAWgE,UAAX,EAAyB,KAAKC,UAAL,EAJ5B,CAKG,KAAKjE,KAAL,CAAWkE,YAAX,EAA2B,KAAKjE,KAAL,CAAWC,QAAtC,CACG,KAAKiE,UAAL,EADH,CAEG,IAPN,CAQG,KAAKlE,KAAL,CAAWC,QAAX,CAAsB,KAAKkE,eAAL,EAAtB,CAA+C,IARlD,CARF,CADF,CAqBD,C,uBAzRqBtE,S,EA4RxB;AACAC,SAAS,CAACsE,YAAV,CAAyB,CACvBjE,IAAI,CAAE,EADiB,CAEvBgB,KAAK,CAAE,SAFgB,CAGvBuC,WAAW,CAAE,CAHU,CAIvB5C,MAAM,CAAE,GAJe,CAKvBH,KAAK,CAAE,GALgB,CAMvBI,UAAU,CAAE,EANW,CAOvBH,UAAU,CAAE,EAPW,CAQvBmD,UAAU,CAAE,KARW,CASvBE,YAAY,CAAE,KATS,CAUvBI,QAAQ,CAAE,KAVa,CAAzB,CAaA,cAAevE,CAAAA,SAAf","sourcesContent":["import React, { Component } from 'react'\r\nimport './LineChart.css'\r\n\r\nclass LineChart extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      hoverLoc: null,\r\n      activePoint: null,\r\n    }\r\n  }\r\n\r\n  // GET X & Y || MAX & MIN\r\n  getX() {\r\n    const { data } = this.props\r\n    return {\r\n      min: data[0] ? data[0].x : 0,\r\n      max: data[data.length - 1] ? data[data.length - 1].x : 0,\r\n    }\r\n  }\r\n\r\n  getY() {\r\n    const { data } = this.props\r\n    if (data.length > 0) {\r\n      return {\r\n        min: data.reduce((min, p) => (p.y < min ? p.y : min), data[0].y),\r\n        max: data.reduce((max, p) => (p.y > max ? p.y : max), data[0].y),\r\n      }\r\n    } else {\r\n      return {\r\n        min: 0,\r\n        max: 0,\r\n      }\r\n    }\r\n  }\r\n\r\n  // GET SVG COORDINATES\r\n  getSvgX(x) {\r\n    const { width, yLabelSize } = this.props\r\n    return yLabelSize + (x / this.getX().max) * (width - yLabelSize)\r\n  }\r\n\r\n  getSvgY(y) {\r\n    const { height, xLabelSize } = this.props\r\n    const gY = this.getY()\r\n    const gYdiff = gY.max - gY.min > 1 ? gY.max - gY.min : 1\r\n    return ((height - xLabelSize) * gY.max - (height - xLabelSize) * y) / gYdiff\r\n  }\r\n\r\n  // BUILD SVG PATH\r\n  makePath() {\r\n    const { data, color } = this.props\r\n    if (data === undefined || data.length === 0) {\r\n      return <div />\r\n    }\r\n    let pathD =\r\n      'M ' + this.getSvgX(data[0].x) + ' ' + this.getSvgY(data[0].y) + '10 '\r\n\r\n    if (data.every((val, i, arr) => val.y === arr[0].y)) {\r\n      // If all the values are equal we check if they are 0 or not because 0 is not recognized by the svg path.\r\n      const value = data[0].y > 0 ? 50 : 100\r\n      pathD += data.map((point, i) => {\r\n        return 'L ' + this.getSvgX(point.x) + ' ' + value + ' '\r\n      })\r\n    } else {\r\n      pathD += data.map((point, i) => {\r\n        return 'L ' + this.getSvgX(point.x) + ' ' + this.getSvgY(point.y) + ' '\r\n      })\r\n    }\r\n\r\n    return (\r\n      <path className=\"linechart_path\" d={pathD} style={{ stroke: color }} />\r\n    )\r\n  }\r\n\r\n  // BUILD SHADED AREA\r\n  makeArea() {\r\n    const { data } = this.props\r\n    if (data === undefined || data.length === 0) {\r\n      return <div />\r\n    }\r\n\r\n    let pathD =\r\n      'M ' + this.getSvgX(data[0].x) + ' ' + this.getSvgY(data[0].y) + ' '\r\n\r\n    pathD += data.map((point, i) => {\r\n      return 'L ' + this.getSvgX(point.x) + ' ' + this.getSvgY(point.y) + ' '\r\n    })\r\n\r\n    const x = this.getX()\r\n    const y = this.getY()\r\n    pathD +=\r\n      'L ' +\r\n      this.getSvgX(x.max) +\r\n      ' ' +\r\n      this.getSvgY(y.min) +\r\n      ' ' +\r\n      'L ' +\r\n      this.getSvgX(x.min) +\r\n      ' ' +\r\n      this.getSvgY(y.min) +\r\n      ' '\r\n\r\n    return (\r\n      <svg>\r\n        <defs>\r\n          <linearGradient id=\"MyGradient\" gradientTransform=\"rotate(80)\">\r\n            <stop offset=\"35%\" stopColor=\"#7ce0d680\" />\r\n            <stop offset=\"95%\" stopColor=\"#7ce0d600\" />\r\n          </linearGradient>\r\n        </defs>\r\n        <path className=\"linechart_area\" d={pathD} />\r\n      </svg>\r\n    )\r\n  }\r\n\r\n  // BUILD GRID AXIS\r\n  makeAxis() {\r\n    const { yLabelSize } = this.props\r\n    const x = this.getX()\r\n    const y = this.getY()\r\n\r\n    return (\r\n      <g className=\"linechart_axis\">\r\n        <line\r\n          x1={this.getSvgX(x.min) - yLabelSize}\r\n          y1={this.getSvgY(y.min)}\r\n          x2={this.getSvgX(x.max)}\r\n          y2={this.getSvgY(y.min)}\r\n          strokeDasharray=\"5\"\r\n        />\r\n        <line\r\n          x1={this.getSvgX(x.min) - yLabelSize}\r\n          y1={this.getSvgY(y.max)}\r\n          x2={this.getSvgX(x.max)}\r\n          y2={this.getSvgY(y.max)}\r\n          strokeDasharray=\"5\"\r\n        />\r\n      </g>\r\n    )\r\n  }\r\n\r\n  makeLabels() {\r\n    const { height, width, xLabelSize, yLabelSize } = this.props\r\n    const padding = 5\r\n    return (\r\n      <g className=\"linechart_label\">\r\n        {/* Y AXIS LABELS */}\r\n        <text\r\n          transform={`translate(${yLabelSize / 2}, 20)`}\r\n          textAnchor=\"middle\"\r\n        >\r\n          {this.getY().max.toLocaleString('us-EN', {\r\n            style: 'currency',\r\n            currency: 'USD',\r\n          })}\r\n        </text>\r\n        <text\r\n          transform={`translate(${yLabelSize / 2}, ${height -\r\n            xLabelSize -\r\n            padding})`}\r\n          textAnchor=\"middle\"\r\n        >\r\n          {this.getY().min.toLocaleString('us-EN', {\r\n            style: 'currency',\r\n            currency: 'USD',\r\n          })}\r\n        </text>\r\n        {/* X AXIS LABELS */}\r\n        <text\r\n          transform={`translate(${yLabelSize}, ${height})`}\r\n          textAnchor=\"start\"\r\n        >\r\n          {this.props.data[0].d}\r\n        </text>\r\n        <text transform={`translate(${width}, ${height})`} textAnchor=\"end\">\r\n          {this.props.data[this.props.data.length - 1].d}\r\n        </text>\r\n      </g>\r\n    )\r\n  }\r\n\r\n  // FIND CLOSEST POINT TO MOUSE\r\n  getCoords(e) {\r\n    const { width, data, yLabelSize } = this.props\r\n    const svgLocation = document\r\n      .getElementsByClassName('linechart')[0]\r\n      .getBoundingClientRect()\r\n    const adjustment = (svgLocation.width - width) / 2 // takes padding into consideration\r\n    const relativeLoc = e.clientX - svgLocation.left - adjustment\r\n\r\n    let valueY = 0\r\n    if (data.every((val, i, arr) => val.y === arr[0].y)) {\r\n      // If all the values are equal we check if they are 0 or not because 0 is not recognized by the svg path.\r\n      valueY = data[0].y > 0 ? 50 : 100\r\n    }\r\n\r\n    const svgData = []\r\n    data.map((point, i) => {\r\n      svgData.push({\r\n        svgX: this.getSvgX(point.x),\r\n        svgY: valueY > 0 ? valueY : this.getSvgY(point.y),\r\n        d: point.d,\r\n        p: point.p,\r\n      })\r\n    })\r\n\r\n    let closestPoint = {}\r\n\r\n    for (let i = 0, c = 500; i < svgData.length; i++) {\r\n      if (Math.abs(svgData[i].svgX - this.state.hoverLoc) <= c) {\r\n        c = Math.abs(svgData[i].svgX - this.state.hoverLoc)\r\n        closestPoint = svgData[i]\r\n      }\r\n    }\r\n\r\n    if (relativeLoc - yLabelSize < 0) {\r\n      this.stopHover()\r\n    } else {\r\n      this.setState({\r\n        hoverLoc: relativeLoc,\r\n        activePoint: closestPoint,\r\n      })\r\n      this.props.onChartHover(relativeLoc, closestPoint)\r\n    }\r\n  }\r\n\r\n  // STOP HOVER\r\n  stopHover() {\r\n    this.setState({ hoverLoc: null, activePoint: null })\r\n    this.props.onChartHover(null, null)\r\n  }\r\n\r\n  // MAKE ACTIVE POINT\r\n  makeActivePoint() {\r\n    const { color, pointRadius } = this.props\r\n    return (\r\n      <circle\r\n        className=\"linechart_point\"\r\n        style={{ stroke: color }}\r\n        r={pointRadius}\r\n        cx={this.state.activePoint.svgX}\r\n        cy={this.state.activePoint.svgY}\r\n      />\r\n    )\r\n  }\r\n\r\n  // MAKE HOVER LINE\r\n  createLine() {\r\n    const { height, xLabelSize } = this.props\r\n    return (\r\n      <line\r\n        className=\"hoverLine\"\r\n        x1={this.state.hoverLoc}\r\n        y1={-8}\r\n        x2={this.state.hoverLoc}\r\n        y2={height - xLabelSize}\r\n      />\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const { height, width } = this.props\r\n    return (\r\n      <svg\r\n        width={width}\r\n        height={height}\r\n        viewBox={`10 -10 ${width} ${height}`}\r\n        className=\"linechart\"\r\n        onMouseLeave={() => this.stopHover()}\r\n        onMouseMove={e => this.getCoords(e)}\r\n      >\r\n        <g>\r\n          {this.props.makeAxis && this.makeAxis()}\r\n          {this.makePath()}\r\n          {this.makeArea()}\r\n          {this.props.showLabels && this.makeLabels()}\r\n          {this.props.showHoverLoc && this.state.hoverLoc\r\n            ? this.createLine()\r\n            : null}\r\n          {this.state.hoverLoc ? this.makeActivePoint() : null}\r\n        </g>\r\n      </svg>\r\n    )\r\n  }\r\n}\r\n\r\n// DEFAULT PROPS\r\nLineChart.defaultProps = {\r\n  data: [],\r\n  color: '#7CE0D6',\r\n  pointRadius: 6,\r\n  height: 300,\r\n  width: 900,\r\n  xLabelSize: 20,\r\n  yLabelSize: 80,\r\n  showLabels: false,\r\n  showHoverLoc: false,\r\n  showAxis: false,\r\n}\r\n\r\nexport default LineChart\r\n"]},"metadata":{},"sourceType":"module"}