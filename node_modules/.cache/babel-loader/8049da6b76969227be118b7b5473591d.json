{"ast":null,"code":"'use strict';\n\nclass KeyValueIndex {\n  constructor() {\n    this._index = {};\n  }\n\n  get(key) {\n    return this._index[key];\n  }\n\n  updateIndex(oplog) {\n    oplog.values.slice().reverse().reduce((handled, item) => {\n      if (!handled.includes(item.payload.key)) {\n        handled.push(item.payload.key);\n\n        if (item.payload.op === 'PUT') {\n          this._index[item.payload.key] = item.payload.value;\n        } else if (item.payload.op === 'DEL') {\n          delete this._index[item.payload.key];\n        }\n      }\n\n      return handled;\n    }, []);\n  }\n\n}\n\nmodule.exports = KeyValueIndex;","map":null,"metadata":{},"sourceType":"script"}