{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar slicedToArray = require('./slicedToArray-a8a77f0e.js');\n\nrequire('./unsupportedIterableToArray-f175acfa.js');\n\nvar React = require('react');\n\nrequire('./_commonjsHelpers-1b94f6bc.js');\n\nvar index$1 = require('./index-46d0e707.js');\n\nvar defineProperty = require('./defineProperty-3cad0327.js');\n\nrequire('./toConsumableArray-cc0d28a9.js');\n\nvar _styled = require('styled-components');\n\nrequire('./getPrototypeOf-55c9e80c.js');\n\nrequire('./color.js');\n\nvar css = require('./css.js');\n\nrequire('./miscellaneous.js');\n\nvar environment = require('./environment.js');\n\nrequire('./font.js');\n\nvar keycodes = require('./keycodes.js');\n\nvar constants = require('./constants.js');\n\nrequire('./breakpoints.js');\n\nvar springs = require('./springs.js');\n\nvar textStyles = require('./text-styles.js');\n\nrequire('./theme-dark.js');\n\nrequire('./theme-light.js');\n\nvar Theme = require('./Theme.js');\n\nvar _extends = require('./extends-023d783e.js');\n\nvar objectWithoutProperties = require('./objectWithoutProperties-c6d3675c.js');\n\nvar index = require('./index-4def0554.js');\n\nrequire('./_baseGetTag-42b4dd3e.js');\n\nvar Viewport = require('./Viewport-819c53c9.js');\n\nrequire('./Layout.js');\n\nrequire('./FocusVisible.js');\n\nrequire('./ButtonBase.js');\n\nrequire('./IconPropTypes-12cd7567.js');\n\nvar IconCross = require('./IconCross.js');\n\nrequire('./objectWithoutPropertiesLoose-1af20ad0.js');\n\nrequire('react-dom');\n\nvar web = require('./web-7cbdbd84.js');\n\nrequire('./Button.js');\n\nvar ButtonIcon = require('./ButtonIcon.js');\n\nrequire('./Root-8693e46b.js');\n\nvar RootPortal = require('./RootPortal.js');\n\nfunction _interopDefaultLegacy(e) {\n  return e && typeof e === 'object' && 'default' in e ? e : {\n    'default': e\n  };\n}\n\nvar React__default = /*#__PURE__*/_interopDefaultLegacy(React);\n\nvar _styled__default = /*#__PURE__*/_interopDefaultLegacy(_styled);\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty.defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar CONTENT_PADDING = 3 * constants.GU; // The closing position of the panel, on the right side of the viewport.\n// It takes into consideration the shadow of the panel.\n\nvar CLOSING_POSITION = 5 * constants.GU;\nvar SidePanelContext = /*#__PURE__*/React__default['default'].createContext(null);\n\nvar _StyledDiv = _styled__default['default'](\"div\").withConfig({\n  displayName: \"SidePanel___StyledDiv\",\n  componentId: \"sc-1kjx6mk-0\"\n})([\"position:absolute;z-index:1;top:0;left:0;right:0;bottom:0;pointer-events:\", \";overflow:hidden;\"], function (p) {\n  return p._css;\n});\n\nvar _StyledAnimatedDiv = _styled__default['default'](web.extendedAnimated.div).withConfig({\n  displayName: \"SidePanel___StyledAnimatedDiv\",\n  componentId: \"sc-1kjx6mk-1\"\n})([\"position:absolute;top:0;left:0;right:0;bottom:0;background:\", \";\"], function (p) {\n  return p._css2;\n});\n\nvar _StyledHeader = _styled__default['default'](\"header\").withConfig({\n  displayName: \"SidePanel___StyledHeader\",\n  componentId: \"sc-1kjx6mk-2\"\n})([\"display:flex;flex-direction:column;justify-content:center;flex-shrink:0;position:relative;height:\", \"px;padding-left:\", \"px;border-bottom:1px solid \", \";\", \";\"], function (p) {\n  return p._css3;\n}, CONTENT_PADDING, function (p) {\n  return p._css4;\n}, function (p) {\n  return p._css5;\n});\n\nvar _StyledH = _styled__default['default'](\"h1\").withConfig({\n  displayName: \"SidePanel___StyledH\",\n  componentId: \"sc-1kjx6mk-3\"\n})([\"color:\", \";\", \";\"], function (p) {\n  return p._css6;\n}, function (p) {\n  return p._css7;\n});\n\nvar _StyledButtonIcon = _styled__default['default'](ButtonIcon.default).withConfig({\n  displayName: \"SidePanel___StyledButtonIcon\",\n  componentId: \"sc-1kjx6mk-4\"\n})([\"position:absolute;\", \"\"], function (p) {\n  return p._css8;\n});\n\nvar _StyledDiv2 = _styled__default['default'](\"div\").withConfig({\n  displayName: \"SidePanel___StyledDiv2\",\n  componentId: \"sc-1kjx6mk-5\"\n})([\"overflow-y:auto;height:100%;display:flex;flex-direction:column;\"]);\n\nvar _StyledDiv3 = _styled__default['default'](\"div\").withConfig({\n  displayName: \"SidePanel___StyledDiv3\",\n  componentId: \"sc-1kjx6mk-6\"\n})([\"min-height:0;flex-grow:1;flex-shrink:0;display:flex;flex-direction:column;width:100%;padding-right:\", \"px;padding-left:\", \"px;padding-bottom:\", \"px;\"], CONTENT_PADDING, CONTENT_PADDING, CONTENT_PADDING);\n\nfunction SidePanel(_ref2) {\n  var blocking = _ref2.blocking,\n      children = _ref2.children,\n      opened = _ref2.opened,\n      onClose = _ref2.onClose,\n      onTransitionEnd = _ref2.onTransitionEnd,\n      title = _ref2.title;\n  var theme = Theme.useTheme();\n\n  var _useViewport = Viewport.useViewport(),\n      below = _useViewport.below;\n\n  var compact = below('medium');\n  var close = React.useCallback(function () {\n    if (!blocking) {\n      onClose();\n    }\n  }, [blocking, onClose]);\n  var handleEscape = React.useCallback(function (event) {\n    if (event.keyCode === keycodes.KEY_ESC && opened) {\n      close();\n    }\n  }, [opened, close]);\n\n  var _useState = React.useState(opened ? 'opened' : 'closed'),\n      _useState2 = slicedToArray.slicedToArray(_useState, 2),\n      status = _useState2[0],\n      setStatus = _useState2[1];\n\n  var _useState3 = React.useState(false),\n      _useState4 = slicedToArray.slicedToArray(_useState3, 2),\n      readyToFocus = _useState4[0],\n      setReadyToFocus = _useState4[1];\n\n  var handleTransitionRest = React.useCallback(function () {\n    onTransitionEnd(opened);\n    setStatus(opened ? 'opened' : 'closed');\n  }, [opened, onTransitionEnd]);\n  var handleTransitionStart = React.useCallback(function () {\n    setStatus(opened ? 'opening' : 'closing');\n  }, [opened]);\n  var handleTransitionFrame = React.useCallback(function (item, _, _ref3) {\n    var progress = _ref3.progress;\n\n    if (progress > 0.5 && !readyToFocus) {\n      setReadyToFocus(true);\n    } else if (progress < 0.5 && readyToFocus) {\n      setReadyToFocus(false);\n    }\n  }, [readyToFocus]);\n  var handleTransitionDestroyed = React.useCallback(function () {\n    setReadyToFocus(false);\n  }, []);\n  React.useEffect(function () {\n    document.addEventListener('keydown', handleEscape);\n    return function () {\n      document.removeEventListener('keydown', handleEscape);\n    };\n  }, [handleEscape]);\n  return /*#__PURE__*/React__default['default'].createElement(RootPortal.default, null, /*#__PURE__*/React__default['default'].createElement(index.i, {\n    name: \"SidePanel\"\n  }, /*#__PURE__*/React__default['default'].createElement(web.Transition, {\n    items: opened,\n    config: _objectSpread(_objectSpread({}, springs.springs.lazy), {}, {\n      precision: 0.001\n    }),\n    from: {\n      progress: 0\n    },\n    enter: {\n      progress: Number(opened)\n    },\n    leave: {\n      progress: 0\n    },\n    onRest: handleTransitionRest,\n    onStart: handleTransitionStart,\n    onFrame: handleTransitionFrame,\n    onDestroyed: handleTransitionDestroyed,\n    unique: true,\n    native: true\n  }, function (opened) {\n    return opened && function (_ref4) {\n      var progress = _ref4.progress;\n      return /*#__PURE__*/React__default['default'].createElement(_StyledDiv, {\n        _css: status !== 'closing' ? 'auto' : 'none'\n      }, /*#__PURE__*/React__default['default'].createElement(_StyledAnimatedDiv, {\n        onClick: close,\n        style: {\n          opacity: progress,\n          pointerEvents: status !== 'closing' ? 'auto' : 'none'\n        },\n        _css2: theme.overlay.alpha(0.9)\n      }), /*#__PURE__*/React__default['default'].createElement(Panel, {\n        compact: compact,\n        style: {\n          transform: progress.interpolate(function (v) {\n            return \"\\n                          translate3d(\\n                            calc(\\n                              \".concat(100 * (1 - v), \"% +\\n                              \").concat(CLOSING_POSITION * (1 - v), \"px\\n                            ), 0, 0\\n                          )\\n                        \");\n          })\n        }\n      }, /*#__PURE__*/React__default['default'].createElement(_StyledHeader, {\n        _css3: 8 * constants.GU,\n        _css4: theme.border,\n        _css5: css.unselectable()\n      }, /*#__PURE__*/React__default['default'].createElement(_StyledH, {\n        _css6: theme.surfaceContent,\n        _css7: textStyles.textStyle('body1')\n      }, title), !blocking && /*#__PURE__*/React__default['default'].createElement(_StyledButtonIcon, {\n        label: \"Close\",\n        onClick: close,\n        _css8: !compact ? \"\\n                              top: \".concat(2 * constants.GU, \"px;\\n                              right: \").concat(2 * constants.GU, \"px;\\n                            \") : \"\\n                              top: 0;\\n                              right: 0;\\n                              height: \".concat(8 * constants.GU, \"px;\\n                              width: \").concat(8 * constants.GU, \"px;\\n                            \")\n      }, /*#__PURE__*/React__default['default'].createElement(IconCross.default, {\n        color: theme.surfaceIcon\n      }))), /*#__PURE__*/React__default['default'].createElement(_StyledDiv2, null, /*#__PURE__*/React__default['default'].createElement(_StyledDiv3, null, /*#__PURE__*/React__default['default'].createElement(SidePanelContext.Provider, {\n        value: {\n          status: status,\n          readyToFocus: readyToFocus\n        }\n      }, children)))));\n    };\n  })));\n}\n\nSidePanel.propTypes = {\n  blocking: index$1.propTypes.bool,\n  children: index$1.propTypes.node.isRequired,\n  opened: index$1.propTypes.bool,\n  onClose: index$1.propTypes.func,\n  onTransitionEnd: index$1.propTypes.func,\n  title: index$1.propTypes.node.isRequired\n};\nSidePanel.defaultProps = {\n  opened: true,\n  blocking: false,\n  onClose: function onClose() {},\n  onTransitionEnd: function onTransitionEnd() {}\n};\n\nvar _StyledAnimatedAside = _styled__default['default'](web.extendedAnimated.aside).withConfig({\n  displayName: \"SidePanel___StyledAnimatedAside\",\n  componentId: \"sc-1kjx6mk-7\"\n})([\"position:absolute;top:0;right:0;display:flex;flex-direction:column;width:100%;height:100%;background:\", \";box-shadow:-2px 0px 4px rgba(0,0,0,0.1);\", \"\"], function (p) {\n  return p._css9;\n}, function (p) {\n  return p._css10;\n});\n\nvar Panel = /*#__PURE__*/React__default['default'].memo(function Panel(_ref5) {\n  var compact = _ref5.compact,\n      props = objectWithoutProperties.objectWithoutProperties(_ref5, [\"compact\"]);\n  var theme = Theme.useTheme();\n  return /*#__PURE__*/React__default['default'].createElement(_StyledAnimatedAside, _extends._extends_1({}, props, {\n    _css9: theme.surface,\n    _css10: !compact ? 'max-width: 450px;' : ''\n  }));\n});\nPanel.propTypes = {\n  compact: index$1.propTypes.bool\n};\n\nfunction useSidePanel() {\n  var value = React.useContext(SidePanelContext);\n\n  if (value === null) {\n    throw new Error('useSidePanel() was used outside of the SidePanel render tree, ' + 'which has to be declared at an upper level!');\n  }\n\n  return value;\n}\n\nfunction useSidePanelFocusOnReady(ref) {\n  var _useSidePanel = useSidePanel(),\n      readyToFocus = _useSidePanel.readyToFocus;\n\n  var fallbackRef = React.useRef();\n\n  var _ref = ref || fallbackRef;\n\n  React.useEffect(function () {\n    if (readyToFocus && _ref.current) {\n      if (_ref.current.focus) {\n        _ref.current.focus();\n      } else {\n        environment.warn('useSidePanelFocusOnReady(): the focus() method wasn’t available on ' + 'the passed ref.');\n      }\n    }\n  }, [readyToFocus, _ref]);\n  return _ref;\n} // Used for spacing in SidePanelSplit and SidePanelSeparator\n\n\nSidePanel.HORIZONTAL_PADDING = CONTENT_PADDING;\nexports.default = SidePanel;\nexports.useSidePanel = useSidePanel;\nexports.useSidePanelFocusOnReady = useSidePanelFocusOnReady;","map":{"version":3,"sources":["../src/components/SidePanel/SidePanel.js"],"names":["CONTENT_PADDING","GU","CLOSING_POSITION","SidePanelContext","React","blocking","children","opened","onClose","onTransitionEnd","title","theme","useTheme","below","useViewport","compact","close","useCallback","handleEscape","event","KEY_ESC","status","setStatus","useState","readyToFocus","setReadyToFocus","handleTransitionRest","handleTransitionStart","handleTransitionFrame","progress","handleTransitionDestroyed","useEffect","document","RootPortal","Inside","Transition","springs","precision","Number","opacity","pointerEvents","transform","unselectable","textStyle","IconClose","surfaceIcon","SidePanel","PropTypes","isRequired","Panel","props","bool","value","useContext","useSidePanel","fallbackRef","useRef","_ref","ref","warn"],"mappings":"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","sourcesContent":["import React, {\n  useCallback,\n  useContext,\n  useEffect,\n  useRef,\n  useState,\n} from 'react'\nimport PropTypes from 'prop-types'\nimport { Transition, animated } from 'react-spring'\nimport { Inside } from 'use-inside'\nimport ButtonIcon from '../Button/ButtonIcon'\nimport { IconClose } from '../../icons'\nimport { useViewport } from '../../providers/Viewport/Viewport'\nimport { GU, springs, textStyle } from '../../style'\nimport { useTheme } from '../../theme'\nimport { unselectable, KEY_ESC, warn } from '../../utils'\nimport RootPortal from '../RootPortal/RootPortal'\n\nconst CONTENT_PADDING = 3 * GU\n\n// The closing position of the panel, on the right side of the viewport.\n// It takes into consideration the shadow of the panel.\nconst CLOSING_POSITION = 5 * GU\n\nconst SidePanelContext = React.createContext(null)\n\nfunction SidePanel({\n  blocking,\n  children,\n  opened,\n  onClose,\n  onTransitionEnd,\n  title,\n}) {\n  const theme = useTheme()\n  const { below } = useViewport()\n  const compact = below('medium')\n\n  const close = useCallback(() => {\n    if (!blocking) {\n      onClose()\n    }\n  }, [blocking, onClose])\n\n  const handleEscape = useCallback(\n    event => {\n      if (event.keyCode === KEY_ESC && opened) {\n        close()\n      }\n    },\n    [opened, close]\n  )\n\n  const [status, setStatus] = useState(opened ? 'opened' : 'closed')\n  const [readyToFocus, setReadyToFocus] = useState(false)\n\n  const handleTransitionRest = useCallback(() => {\n    onTransitionEnd(opened)\n    setStatus(opened ? 'opened' : 'closed')\n  }, [opened, onTransitionEnd])\n\n  const handleTransitionStart = useCallback(() => {\n    setStatus(opened ? 'opening' : 'closing')\n  }, [opened])\n\n  const handleTransitionFrame = useCallback(\n    (item, _, { progress }) => {\n      if (progress > 0.5 && !readyToFocus) {\n        setReadyToFocus(true)\n      } else if (progress < 0.5 && readyToFocus) {\n        setReadyToFocus(false)\n      }\n    },\n    [readyToFocus]\n  )\n\n  const handleTransitionDestroyed = useCallback(() => {\n    setReadyToFocus(false)\n  }, [])\n\n  useEffect(() => {\n    document.addEventListener('keydown', handleEscape)\n    return () => {\n      document.removeEventListener('keydown', handleEscape)\n    }\n  }, [handleEscape])\n\n  return (\n    <RootPortal>\n      <Inside name=\"SidePanel\">\n        <Transition\n          items={opened}\n          config={{ ...springs.lazy, precision: 0.001 }}\n          from={{ progress: 0 }}\n          enter={{ progress: Number(opened) }}\n          leave={{ progress: 0 }}\n          onRest={handleTransitionRest}\n          onStart={handleTransitionStart}\n          onFrame={handleTransitionFrame}\n          onDestroyed={handleTransitionDestroyed}\n          unique\n          native\n        >\n          {opened =>\n            opened &&\n            (({ progress }) => (\n              <div\n                css={`\n                  position: absolute;\n                  z-index: 1;\n                  top: 0;\n                  left: 0;\n                  right: 0;\n                  bottom: 0;\n                  pointer-events: ${status !== 'closing' ? 'auto' : 'none'};\n                  overflow: hidden;\n                `}\n              >\n                <animated.div\n                  onClick={close}\n                  style={{\n                    opacity: progress,\n                    pointerEvents: status !== 'closing' ? 'auto' : 'none',\n                  }}\n                  css={`\n                    position: absolute;\n                    top: 0;\n                    left: 0;\n                    right: 0;\n                    bottom: 0;\n                    background: ${theme.overlay.alpha(0.9)};\n                  `}\n                />\n                <Panel\n                  compact={compact}\n                  style={{\n                    transform: progress.interpolate(\n                      v =>\n                        `\n                          translate3d(\n                            calc(\n                              ${100 * (1 - v)}% +\n                              ${CLOSING_POSITION * (1 - v)}px\n                            ), 0, 0\n                          )\n                        `\n                    ),\n                  }}\n                >\n                  <header\n                    css={`\n                      display: flex;\n                      flex-direction: column;\n                      justify-content: center;\n                      flex-shrink: 0;\n                      position: relative;\n                      height: ${8 * GU}px;\n                      padding-left: ${CONTENT_PADDING}px;\n                      border-bottom: 1px solid ${theme.border};\n                      ${unselectable()};\n                    `}\n                  >\n                    <h1\n                      css={`\n                        color: ${theme.surfaceContent};\n                        ${textStyle('body1')};\n                      `}\n                    >\n                      {title}\n                    </h1>\n                    {!blocking && (\n                      <ButtonIcon\n                        label=\"Close\"\n                        onClick={close}\n                        css={`\n                          position: absolute;\n                          ${!compact\n                            ? `\n                              top: ${2 * GU}px;\n                              right: ${2 * GU}px;\n                            `\n                            : `\n                              top: 0;\n                              right: 0;\n                              height: ${8 * GU}px;\n                              width: ${8 * GU}px;\n                            `}\n                        `}\n                      >\n                        <IconClose color={theme.surfaceIcon} />\n                      </ButtonIcon>\n                    )}\n                  </header>\n                  <div\n                    css={`\n                      overflow-y: auto;\n                      height: 100%;\n                      display: flex;\n                      flex-direction: column;\n                    `}\n                  >\n                    <div\n                      css={`\n                        min-height: 0;\n                        flex-grow: 1;\n                        flex-shrink: 0;\n                        display: flex;\n                        flex-direction: column;\n                        width: 100%;\n                        padding-right: ${CONTENT_PADDING}px;\n                        padding-left: ${CONTENT_PADDING}px;\n                        padding-bottom: ${CONTENT_PADDING}px;\n                      `}\n                    >\n                      <SidePanelContext.Provider\n                        value={{ status, readyToFocus }}\n                      >\n                        {children}\n                      </SidePanelContext.Provider>\n                    </div>\n                  </div>\n                </Panel>\n              </div>\n            ))\n          }\n        </Transition>\n      </Inside>\n    </RootPortal>\n  )\n}\n\nSidePanel.propTypes = {\n  blocking: PropTypes.bool,\n  children: PropTypes.node.isRequired,\n  opened: PropTypes.bool,\n  onClose: PropTypes.func,\n  onTransitionEnd: PropTypes.func,\n  title: PropTypes.node.isRequired,\n}\n\nSidePanel.defaultProps = {\n  opened: true,\n  blocking: false,\n  onClose: () => {},\n  onTransitionEnd: () => {},\n}\n\nconst Panel = React.memo(function Panel({ compact, ...props }) {\n  const theme = useTheme()\n  return (\n    <animated.aside\n      css={`\n        position: absolute;\n        top: 0;\n        right: 0;\n        display: flex;\n        flex-direction: column;\n        width: 100%;\n        height: 100%;\n        background: ${theme.surface};\n        box-shadow: -2px 0px 4px rgba(0, 0, 0, 0.1);\n        ${!compact ? 'max-width: 450px;' : ''}\n      `}\n      {...props}\n    />\n  )\n})\n\nPanel.propTypes = {\n  compact: PropTypes.bool,\n}\n\nfunction useSidePanel() {\n  const value = useContext(SidePanelContext)\n  if (value === null) {\n    throw new Error(\n      'useSidePanel() was used outside of the SidePanel render tree, ' +\n        'which has to be declared at an upper level!'\n    )\n  }\n  return value\n}\n\nfunction useSidePanelFocusOnReady(ref) {\n  const { readyToFocus } = useSidePanel()\n  const fallbackRef = useRef()\n\n  const _ref = ref || fallbackRef\n\n  useEffect(() => {\n    if (readyToFocus && _ref.current) {\n      if (_ref.current.focus) {\n        _ref.current.focus()\n      } else {\n        warn(\n          'useSidePanelFocusOnReady(): the focus() method wasn’t available on ' +\n            'the passed ref.'\n        )\n      }\n    }\n  }, [readyToFocus, _ref])\n\n  return _ref\n}\n\n// Used for spacing in SidePanelSplit and SidePanelSeparator\nSidePanel.HORIZONTAL_PADDING = CONTENT_PADDING\n\nexport { useSidePanel, useSidePanelFocusOnReady }\nexport default SidePanel\n"]},"metadata":{},"sourceType":"script"}