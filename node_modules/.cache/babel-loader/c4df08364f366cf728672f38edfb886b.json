{"ast":null,"code":"'use strict';\n\nconst waitForPeers = async (ipfs, peersToWait, topic) => {\n  const checkPeers = async () => {\n    const peers = await ipfs.pubsub.peers(topic);\n    const hasAllPeers = peersToWait.map(e => peers.includes(e)).filter(e => e === false).length === 0;\n    return hasAllPeers;\n  };\n\n  if (await checkPeers()) {\n    return Promise.resolve();\n  }\n\n  return new Promise(async (resolve, reject) => {\n    const interval = setInterval(async () => {\n      try {\n        if (await checkPeers()) {\n          clearInterval(interval);\n          resolve();\n        }\n      } catch (e) {\n        reject(e);\n      }\n    }, 100);\n  });\n};\n\nmodule.exports = waitForPeers;","map":null,"metadata":{},"sourceType":"script"}