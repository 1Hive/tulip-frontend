{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar slicedToArray = require('./slicedToArray-a8a77f0e.js');\n\nrequire('./unsupportedIterableToArray-f175acfa.js');\n\nvar React = require('react');\n\nrequire('./_commonjsHelpers-1b94f6bc.js');\n\nvar index = require('./index-46d0e707.js');\n\nrequire('./defineProperty-3cad0327.js');\n\nrequire('./toConsumableArray-cc0d28a9.js');\n\nvar _styled = require('styled-components');\n\nrequire('./getPrototypeOf-55c9e80c.js');\n\nrequire('./color.js');\n\nvar css = require('./css.js');\n\nvar miscellaneous = require('./miscellaneous.js');\n\nrequire('./environment.js');\n\nrequire('./font.js');\n\nvar keycodes = require('./keycodes.js');\n\nrequire('./constants.js');\n\nrequire('./breakpoints.js');\n\nvar springs = require('./springs.js');\n\nrequire('./text-styles.js');\n\nrequire('./theme-dark.js');\n\nrequire('./theme-light.js');\n\nvar Theme = require('./Theme.js');\n\nvar _extends = require('./extends-023d783e.js');\n\nrequire('./objectWithoutProperties-c6d3675c.js');\n\nrequire('./index-4def0554.js');\n\nrequire('./_baseGetTag-42b4dd3e.js');\n\nrequire('./Viewport-819c53c9.js');\n\nrequire('./Layout.js');\n\nrequire('./FocusVisible.js');\n\nvar ButtonBase = require('./ButtonBase.js');\n\nrequire('./IconPropTypes-12cd7567.js');\n\nrequire('./IconCross.js');\n\nrequire('./IconSearch.js');\n\nrequire('./objectWithoutPropertiesLoose-1af20ad0.js');\n\nrequire('react-dom');\n\nvar web = require('./web-7cbdbd84.js');\n\nrequire('./Button.js');\n\nrequire('./ButtonIcon.js');\n\nrequire('./TextInput.js');\n\nvar useArrowKeysFocus = require('./useArrowKeysFocus.js');\n\nvar useClickOutside = require('./useClickOutside.js');\n\nvar useFocusLeave = require('./useFocusLeave.js');\n\nrequire('./useImageExists.js');\n\nvar useKeyDown = require('./useKeyDown.js');\n\nvar SearchInput = require('./SearchInput.js');\n\nfunction _interopDefaultLegacy(e) {\n  return e && typeof e === 'object' && 'default' in e ? e : {\n    'default': e\n  };\n}\n\nvar React__default = /*#__PURE__*/_interopDefaultLegacy(React);\n\nvar _styled__default = /*#__PURE__*/_interopDefaultLegacy(_styled);\n\nvar _StyledDiv = _styled__default['default'](\"div\").withConfig({\n  displayName: \"AutoComplete___StyledDiv\",\n  componentId: \"bpnxyo-0\"\n})([\"position:relative\"]);\n\nfunction AutoComplete(_ref) {\n  var forwardedRef = _ref.forwardedRef,\n      _ref$itemButtonStyles = _ref.itemButtonStyles,\n      itemButtonStyles = _ref$itemButtonStyles === void 0 ? '' : _ref$itemButtonStyles,\n      _ref$items = _ref.items,\n      items = _ref$items === void 0 ? [] : _ref$items,\n      _ref$onSelect = _ref.onSelect,\n      onSelect = _ref$onSelect === void 0 ? miscellaneous.noop : _ref$onSelect,\n      _ref$onChange = _ref.onChange,\n      onChange = _ref$onChange === void 0 ? miscellaneous.noop : _ref$onChange,\n      placeholder = _ref.placeholder,\n      _ref$renderItem = _ref.renderItem,\n      renderItem = _ref$renderItem === void 0 ? miscellaneous.identity : _ref$renderItem,\n      required = _ref.required,\n      value = _ref.value,\n      wide = _ref.wide;\n  var ref = forwardedRef;\n  var uniqueItems = new Set(items);\n\n  var _useState = React.useState(true),\n      _useState2 = slicedToArray.slicedToArray(_useState, 2),\n      opened = _useState2[0],\n      setOpened = _useState2[1];\n\n  var wrapRef = React.useRef();\n  var refs = React.useRef([]);\n  var handleClose = React.useCallback(function () {\n    return setOpened(false);\n  }, []);\n  var handleFocus = React.useCallback(function () {\n    return setOpened(true);\n  }, []);\n  var handleSelect = React.useCallback(function (item) {\n    onSelect(item);\n    setOpened(false);\n  }, [onSelect]);\n  var handleInputChange = React.useCallback(function () {\n    setOpened(true);\n    onChange.apply(void 0, arguments);\n  }, [onChange]);\n\n  var _useFocusLeave = useFocusLeave.useFocusLeave(handleClose, wrapRef),\n      handleFocusLeave = _useFocusLeave.handleFocusLeave;\n\n  var _useArrowKeysFocus = useArrowKeysFocus.useArrowKeysFocus(refs),\n      highlightedIndex = _useArrowKeysFocus.highlightedIndex,\n      setHighlightedIndex = _useArrowKeysFocus.setHighlightedIndex;\n\n  useClickOutside.useClickOutside(handleClose, wrapRef);\n  useKeyDown.useKeyDown(keycodes.KEY_ESC, handleClose);\n  React.useEffect(function () {\n    setHighlightedIndex(-1);\n  }, [opened, items, value, setHighlightedIndex]);\n  return /*#__PURE__*/React__default['default'].createElement(_StyledDiv, {\n    ref: wrapRef,\n    onBlur: handleFocusLeave\n  }, /*#__PURE__*/React__default['default'].createElement(SearchInput.default, {\n    ref: ref,\n    wide: wide,\n    placeholder: placeholder,\n    required: required,\n    onChange: handleInputChange,\n    onFocus: handleFocus,\n    value: value\n  }), /*#__PURE__*/React__default['default'].createElement(web.Transition, {\n    config: springs.springs.swift,\n    items: opened && items.length > 0,\n    from: {\n      scale: 0.98,\n      opacity: 0\n    },\n    enter: {\n      scale: 1,\n      opacity: 1\n    },\n    leave: {\n      scale: 1,\n      opacity: 0\n    },\n    native: true\n  }, function (show) {\n    return show &&\n    /* eslint-disable react/prop-types */\n    function (_ref2) {\n      var scale = _ref2.scale,\n          opacity = _ref2.opacity;\n      return /*#__PURE__*/React__default['default'].createElement(Items, {\n        style: {\n          opacity: opacity,\n          transform: scale.interpolate(function (t) {\n            return \"scale3d(\".concat(t, \",\").concat(t, \",1)\");\n          })\n        }\n      }, Array.from(uniqueItems).map(function (item, index) {\n        return /*#__PURE__*/React__default['default'].createElement(Item, {\n          key: item.key || item,\n          ref: function ref(node) {\n            return refs.current[index] = node;\n          },\n          index: index,\n          item: item,\n          itemButtonStyles: itemButtonStyles,\n          onHighlight: setHighlightedIndex,\n          onSelect: handleSelect,\n          selected: index === highlightedIndex\n        }, renderItem(item, value));\n      }));\n    };\n  }\n  /* eslint-enable react/prop-types */\n  ));\n}\n\nAutoComplete.propTypes = {\n  forwardedRef: index.propTypes.object,\n  itemButtonStyles: index.propTypes.string,\n  items: index.propTypes.array.isRequired,\n  onSelect: index.propTypes.func.isRequired,\n  onChange: index.propTypes.func.isRequired,\n  placeholder: index.propTypes.string,\n  renderItem: index.propTypes.func,\n  required: index.propTypes.bool,\n  value: index.propTypes.string,\n  wide: index.propTypes.bool\n};\n/* eslint-disable react/prop-types */\n\nvar _StyledLi = _styled__default['default'](\"li\").withConfig({\n  displayName: \"AutoComplete___StyledLi\",\n  componentId: \"bpnxyo-1\"\n})([\"overflow:hidden;cursor:pointer;\", \";\"], function (p) {\n  return p._css;\n});\n\nvar _StyledButtonBase = _styled__default['default'](ButtonBase.default).withConfig({\n  displayName: \"AutoComplete___StyledButtonBase\",\n  componentId: \"bpnxyo-2\"\n})([\"text-align:left;padding:4px 8px;width:100%;border-radius:0;border-left:3px solid transparent;cursor:pointer;\", \";\", \";\"], function (p) {\n  return p._css2;\n}, function (p) {\n  return p._css3;\n});\n\nvar Item = /*#__PURE__*/React__default['default'].forwardRef(function Item(_ref3, ref) {\n  var children = _ref3.children,\n      index = _ref3.index,\n      item = _ref3.item,\n      itemButtonStyles = _ref3.itemButtonStyles,\n      onHighlight = _ref3.onHighlight,\n      onSelect = _ref3.onSelect,\n      selected = _ref3.selected;\n  var theme = Theme.useTheme();\n  var handleClick = React.useCallback(function (event) {\n    event.preventDefault();\n    onSelect(item);\n  }, [item, onSelect]);\n  var handleFocusOrMouseOver = React.useCallback(function () {\n    onHighlight(index);\n  }, [index, onHighlight]);\n  return /*#__PURE__*/React__default['default'].createElement(_StyledLi, {\n    role: \"option\",\n    _css: css.unselectable()\n  }, /*#__PURE__*/React__default['default'].createElement(_StyledButtonBase, {\n    ref: ref,\n    onClick: handleClick,\n    onFocus: handleFocusOrMouseOver,\n    onMouseOver: handleFocusOrMouseOver,\n    _css2: selected ? \"\\n                outline: 2px solid \".concat(theme.accent, \";\\n                background: \").concat(theme.surfaceHighlight, \";\\n                border-left: 3px solid \").concat(theme.accent, \";\\n              \") : '',\n    _css3: itemButtonStyles\n  }, children));\n});\n/* eslint-enable react/prop-types */\n\n/* eslint-disable react/prop-types */\n\nvar _StyledAnimatedUl = _styled__default['default'](web.extendedAnimated.ul).withConfig({\n  displayName: \"AutoComplete___StyledAnimatedUl\",\n  componentId: \"bpnxyo-3\"\n})([\"position:absolute;z-index:2;top:100%;width:100%;padding:8px 0;color:\", \";background:\", \";border:1px solid \", \";box-shadow:0 4px 4px 0 rgba(0,0,0,0.06);border-radius:3px;padding:0;margin:0;list-style:none;& > li:first-child{border-top-left-radius:3px;border-top-right-radius:3px;}& > li:last-child{border-bottom-left-radius:3px;border-bottom-right-radius:3px;}\"], function (p) {\n  return p._css4;\n}, function (p) {\n  return p._css5;\n}, function (p) {\n  return p._css6;\n});\n\nvar Items = function Items(props) {\n  var theme = Theme.useTheme();\n  return /*#__PURE__*/React__default['default'].createElement(_StyledAnimatedUl, _extends._extends_1({\n    role: \"listbox\"\n  }, props, {\n    _css4: theme.surfaceContent,\n    _css5: theme.surface,\n    _css6: theme.border\n  }));\n};\n/* eslint-enable react/prop-types */\n\n\nvar AutoCompleteMemo = /*#__PURE__*/React__default['default'].memo(AutoComplete);\nvar AutoComplete$1 = /*#__PURE__*/React__default['default'].forwardRef(function (props, ref) {\n  return /*#__PURE__*/React__default['default'].createElement(AutoCompleteMemo, _extends._extends_1({}, props, {\n    forwardedRef: ref\n  }));\n});\nexports.default = AutoComplete$1;","map":{"version":3,"sources":["../src/components/AutoComplete/AutoComplete.js"],"names":["forwardedRef","itemButtonStyles","items","onSelect","noop","onChange","placeholder","renderItem","identity","required","value","wide","ref","uniqueItems","opened","setOpened","useState","wrapRef","useRef","refs","handleClose","useCallback","handleFocus","handleSelect","handleInputChange","handleFocusLeave","useFocusLeave","highlightedIndex","setHighlightedIndex","useArrowKeysFocus","useClickOutside","useKeyDown","KEY_ESC","useEffect","SearchInput","Transition","springs","scale","opacity","show","transform","item","index","AutoComplete","PropTypes","bool","Item","children","onHighlight","selected","theme","useTheme","handleClick","event","handleFocusOrMouseOver","unselectable","Items","border","AutoCompleteMemo","React"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useCallback, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { Transition, animated } from 'react-spring'\nimport {\n  useArrowKeysFocus,\n  useClickOutside,\n  useKeyDown,\n  useFocusLeave,\n} from '../../hooks'\nimport { springs } from '../../style'\nimport { useTheme } from '../../theme'\nimport { unselectable, noop, identity, KEY_ESC } from '../../utils'\nimport ButtonBase from '../ButtonBase/ButtonBase'\nimport SearchInput from '../Input/SearchInput'\n\nfunction AutoComplete({\n  forwardedRef,\n  itemButtonStyles = '',\n  items = [],\n  onSelect = noop,\n  onChange = noop,\n  placeholder,\n  renderItem = identity,\n  required,\n  value,\n  wide,\n}) {\n  const ref = forwardedRef\n  const uniqueItems = new Set(items)\n  const [opened, setOpened] = useState(true)\n  const wrapRef = useRef()\n  const refs = useRef([])\n\n  const handleClose = useCallback(() => setOpened(false), [])\n  const handleFocus = useCallback(() => setOpened(true), [])\n\n  const handleSelect = useCallback(\n    item => {\n      onSelect(item)\n      setOpened(false)\n    },\n    [onSelect]\n  )\n\n  const handleInputChange = useCallback(\n    (...params) => {\n      setOpened(true)\n      onChange(...params)\n    },\n    [onChange]\n  )\n\n  const { handleFocusLeave } = useFocusLeave(handleClose, wrapRef)\n  const { highlightedIndex, setHighlightedIndex } = useArrowKeysFocus(refs)\n\n  useClickOutside(handleClose, wrapRef)\n  useKeyDown(KEY_ESC, handleClose)\n\n  useEffect(() => {\n    setHighlightedIndex(-1)\n  }, [opened, items, value, setHighlightedIndex])\n\n  return (\n    <div css=\"position: relative\" ref={wrapRef} onBlur={handleFocusLeave}>\n      <SearchInput\n        ref={ref}\n        wide={wide}\n        placeholder={placeholder}\n        required={required}\n        onChange={handleInputChange}\n        onFocus={handleFocus}\n        value={value}\n      />\n      <Transition\n        config={springs.swift}\n        items={opened && items.length > 0}\n        from={{ scale: 0.98, opacity: 0 }}\n        enter={{ scale: 1, opacity: 1 }}\n        leave={{ scale: 1, opacity: 0 }}\n        native\n      >\n        {show =>\n          show &&\n          /* eslint-disable react/prop-types */\n          (({ scale, opacity }) => (\n            <Items\n              style={{\n                opacity,\n                transform: scale.interpolate(t => `scale3d(${t},${t},1)`),\n              }}\n            >\n              {Array.from(uniqueItems).map((item, index) => (\n                <Item\n                  key={item.key || item}\n                  ref={node => (refs.current[index] = node)}\n                  index={index}\n                  item={item}\n                  itemButtonStyles={itemButtonStyles}\n                  onHighlight={setHighlightedIndex}\n                  onSelect={handleSelect}\n                  selected={index === highlightedIndex}\n                >\n                  {renderItem(item, value)}\n                </Item>\n              ))}\n            </Items>\n          ))\n        /* eslint-enable react/prop-types */\n        }\n      </Transition>\n    </div>\n  )\n}\n\nAutoComplete.propTypes = {\n  forwardedRef: PropTypes.object,\n  itemButtonStyles: PropTypes.string,\n  items: PropTypes.array.isRequired,\n  onSelect: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired,\n  placeholder: PropTypes.string,\n  renderItem: PropTypes.func,\n  required: PropTypes.bool,\n  value: PropTypes.string,\n  wide: PropTypes.bool,\n}\n\n/* eslint-disable react/prop-types */\nconst Item = React.forwardRef(function Item(\n  { children, index, item, itemButtonStyles, onHighlight, onSelect, selected },\n  ref\n) {\n  const theme = useTheme()\n\n  const handleClick = useCallback(\n    event => {\n      event.preventDefault()\n      onSelect(item)\n    },\n    [item, onSelect]\n  )\n\n  const handleFocusOrMouseOver = useCallback(() => {\n    onHighlight(index)\n  }, [index, onHighlight])\n\n  return (\n    <li\n      role=\"option\"\n      css={`\n        overflow: hidden;\n        cursor: pointer;\n        ${unselectable()};\n      `}\n    >\n      <ButtonBase\n        ref={ref}\n        onClick={handleClick}\n        onFocus={handleFocusOrMouseOver}\n        onMouseOver={handleFocusOrMouseOver}\n        css={`\n          text-align: left;\n          padding: 4px 8px;\n          width: 100%;\n          border-radius: 0;\n          border-left: 3px solid transparent;\n          cursor: pointer;\n\n          ${selected\n            ? `\n                outline: 2px solid ${theme.accent};\n                background: ${theme.surfaceHighlight};\n                border-left: 3px solid ${theme.accent};\n              `\n            : ''};\n          ${itemButtonStyles};\n        `}\n      >\n        {children}\n      </ButtonBase>\n    </li>\n  )\n})\n/* eslint-enable react/prop-types */\n\n/* eslint-disable react/prop-types */\nconst Items = function Items(props) {\n  const theme = useTheme()\n  return (\n    <animated.ul\n      role=\"listbox\"\n      css={`\n        position: absolute;\n        z-index: 2;\n        top: 100%;\n        width: 100%;\n        padding: 8px 0;\n        color: ${theme.surfaceContent};\n        background: ${theme.surface};\n        border: 1px solid ${theme.border};\n        box-shadow: 0 4px 4px 0 rgba(0, 0, 0, 0.06);\n        border-radius: 3px;\n        padding: 0;\n        margin: 0;\n        list-style: none;\n\n        & > li:first-child {\n          border-top-left-radius: 3px;\n          border-top-right-radius: 3px;\n        }\n        & > li:last-child {\n          border-bottom-left-radius: 3px;\n          border-bottom-right-radius: 3px;\n        }\n      `}\n      {...props}\n    />\n  )\n}\n/* eslint-enable react/prop-types */\n\nconst AutoCompleteMemo = React.memo(AutoComplete)\n\nexport default React.forwardRef((props, ref) => (\n  <AutoCompleteMemo {...props} forwardedRef={ref} />\n))\n"]},"metadata":{},"sourceType":"script"}