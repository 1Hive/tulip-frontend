{"ast":null,"code":"var _classCallCheck = require(\"/Users/fabianmolina/Documents/1hive/tulip-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/fabianmolina/Documents/1hive/tulip-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar Fifo = require('fast-fifo');\n\nvar defer = require('p-defer');\n\nmodule.exports = /*#__PURE__*/function () {\n  \"use strict\";\n\n  function PFifo() {\n    _classCallCheck(this, PFifo);\n\n    this._buffer = new Fifo();\n    this._waitingConsumers = new Fifo();\n  }\n\n  _createClass(PFifo, [{\n    key: \"push\",\n    value: function push(chunk) {\n      var _defer = defer(),\n          promise = _defer.promise,\n          resolve = _defer.resolve;\n\n      this._buffer.push({\n        chunk: chunk,\n        resolve: resolve\n      });\n\n      this._consume();\n\n      return promise;\n    }\n  }, {\n    key: \"_consume\",\n    value: function _consume() {\n      while (!this._waitingConsumers.isEmpty() && !this._buffer.isEmpty()) {\n        var nextConsumer = this._waitingConsumers.shift();\n\n        var nextChunk = this._buffer.shift();\n\n        nextConsumer.resolve(nextChunk.chunk);\n        nextChunk.resolve();\n      }\n    }\n  }, {\n    key: \"shift\",\n    value: function shift() {\n      var _defer2 = defer(),\n          promise = _defer2.promise,\n          resolve = _defer2.resolve;\n\n      this._waitingConsumers.push({\n        resolve: resolve\n      });\n\n      this._consume();\n\n      return promise;\n    }\n  }, {\n    key: \"isEmpty\",\n    value: function isEmpty() {\n      return this._buffer.isEmpty();\n    }\n  }]);\n\n  return PFifo;\n}();","map":null,"metadata":{},"sourceType":"script"}